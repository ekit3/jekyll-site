<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.7">Jekyll</generator><link href="/feed.xml" rel="self" type="application/atom+xml" /><link href="/" rel="alternate" type="text/html" /><updated>2023-11-23T02:10:59-06:00</updated><id>/feed.xml</id><title type="html">Blog | Tech</title><subtitle>Welcome To the Ekite's Tech Blogs.</subtitle><entry><title type="html">Feature Flipping</title><link href="/articles/architecture/feature-flipping/" rel="alternate" type="text/html" title="Feature Flipping" /><published>2023-07-27T02:00:00-05:00</published><updated>2023-07-27T02:00:00-05:00</updated><id>/articles/architecture/feature-flipping</id><content type="html" xml:base="/articles/architecture/feature-flipping/">&lt;h5 id=&quot;introduction&quot;&gt;Introduction&lt;/h5&gt;

&lt;p&gt;Ici nous allons parler de Feature Flipping, (que vous pouvez aussi connaitre sous le nom de Feature Toggles, Feature Switches, Feature Flag et bien d‚Äôautres encore), qui a pour principe de donner la possibilit√© de contr√¥ler l‚Äôacc√®s √† des fonctionnalit√©s de vos applications.&lt;/p&gt;

&lt;p&gt;Cette technique devient pertinente lorsque que par exemple, nous voulons mettre en place des fonctionnalit√©s destin√©es √† un public cible (beta user, premium user ‚Ä¶), que nous souhaitons avoir plus de contr√¥le sur l‚Äôensemble des services propos√©s par une application (possibilit√© de d√©sactiver telle ou telle fonctionnalit√© pour maintenance, √©volution, correctifs).&lt;/p&gt;

&lt;p&gt;Cette m√©thodologie peut √™tre impl√©ment√©e dans diff√©rents langage et de mani√®re diff√©rente, cela va √™tre √† vous de choisir ce qui correspond le mieux √† votre besoin. 
Il existe d√©j√† des librairies, des Frameworks, et m√™me des solutions SaaS pour r√©pondre √† ce besoin.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/architecture/feature-flipping//intro.jpg&quot; alt=&quot;image&quot; /&gt; &lt;br /&gt;
&lt;!--END_SUMMARY--&gt;&lt;/p&gt;

&lt;h2 id=&quot;quel-int√©r√™t-pour-la-technique-&quot;&gt;Quel int√©r√™t pour la technique ?&lt;/h2&gt;

&lt;h3 id=&quot;cycle-de-vie-de-livraison-dapplication&quot;&gt;Cycle de vie de livraison d‚Äôapplication&lt;/h3&gt;

&lt;p&gt;Le Feature Flipping apporte beaucoup de souplesse dans le cycle de vie d‚Äôune application et ce √† plusieurs niveaux.&lt;/p&gt;

&lt;p&gt;D‚Äôabord l‚Äô√©quipe de d√©veloppement va pouvoir d√©sactiver tout ou partie du code source d‚Äôune ou de plusieurs features. Une feature non finalis√©e ou qu‚Äôon ne souhaite pas activer ne bloquera pas le d√©ploiement d‚Äôune release compl√®te. Ce qui ajoute √©norm√©ment de libert√© √† l‚Äô√©quipe de d√©veloppement dans ses r√©alisations.&lt;/p&gt;

&lt;p&gt;Ces features pourront √™tre activ√©es dans un second temps et n‚Äôemp√™chent donc pas le bon fonctionnement du processus de d√©ploiement continu d‚Äôune application.&lt;/p&gt;

&lt;h3 id=&quot;graceful-degradation--progressive-enhancement--fr-d√©gradation-gracieuse--am√©lioration-progressive&quot;&gt;Graceful degradation &amp;amp; Progressive enhancement ( fr: D√©gradation gracieuse &amp;amp; Am√©lioration progressive)&lt;/h3&gt;

&lt;p&gt;Cela permet aussi, lorsqu‚Äôon identifie un probl√®me sur une fonctionnalit√©, de pouvoir la d√©sactiver sans avoir besoin de d√©ployer une nouvelle release. L‚Äôactivation et la d√©sactivation d‚Äôune feature peut se faire distinctement du d√©ploiement d‚Äôune release. Imaginons que votre parcours de vente soit compl√©tement bloqu√© √† cause d‚Äôune √©tape facultative, la d√©sactiver rendra le service √† vos utilisateurs&lt;/p&gt;

&lt;p&gt;On peut √©galement faire du d√©ploiement ‚Äúprogressif‚Äù de fonctionnalit√©s. C‚Äôest √† dire, n‚Äôautoriser l‚Äôacc√®s qu‚Äô√† une poign√©e d‚Äôutilisateurs de l‚Äôapplication. Ainsi, cela permet √† l‚Äô√©quipe de s‚Äôassurer de la pertinence d‚Äôune fonctionnalit√© avant un d√©ploiement complet √† l‚Äôensemble des utilisateurs, et aussi potentiellement d√©tecter des anomalies niveau applicatif ou infrastructure, qui n‚Äôavaient pas √©t√© anticip√©es.&lt;/p&gt;

&lt;h2 id=&quot;quel-int√©r√™t-pour-le-m√©tier-&quot;&gt;Quel int√©r√™t pour le M√©tier ?&lt;/h2&gt;

&lt;h3 id=&quot;tests-ab&quot;&gt;Tests A/B&lt;/h3&gt;

&lt;p&gt;Dans l‚Äôagilit√©, nous parlons souvent du principe de l‚Äôempirisme. Ce principe se r√©sume grosso-modo √† l‚Äôapprentissage par l‚Äôexp√©rience. L‚ÄôA/B testing en est un bel exemple. Il permet de proposer des parcours diff√©rents de fa√ßon al√©atoire afin de r√©colter des datas sur l‚Äôutilisation de l‚Äôapplication, et donc, de comprendre comment les utilisateurs l‚Äôutilisent en r√©alit√©.&lt;/p&gt;

&lt;p&gt;La mise en place de campagnes de test ‚ÄúA/B testing‚Äù est simple √† comprendre, il permet de donner l‚Äôacc√®s √† diff√©rents parcours utilisateurs sur une m√™me fonctionnalit√© ou encore de modifier graphiquement l‚Äôapplication pour avoir diff√©rents retours selon son utilisation. Ainsi, gr√¢ce aux donn√©es r√©colt√©es lors des campagnes de test, nous allons pouvoir valider une ou plusieurs hypoth√®ses sur l‚Äôutilisation d‚Äôune ou de plusieurs fonctionnalit√©s.&lt;/p&gt;

&lt;p&gt;Nous avons donc appris par l‚Äôexp√©rience des utilisateurs que l‚Äôapplication devra s‚Äôorienter vers la version d√©finitive d‚Äôune fonctionnalit√© qui correspond mieux aux besoins utilisateurs.&lt;/p&gt;

&lt;h3 id=&quot;fonctionnalit√©s-temporaires--payantes&quot;&gt;Fonctionnalit√©s temporaires &amp;amp; Payantes&lt;/h3&gt;

&lt;p&gt;Le feature flipping permet √©galement de pouvoir activer des fonctionnalit√©s uniquement lors de p√©riodes sp√©cifiques. Comme par exemple, un jeu ou un affichage sp√©cifique pour la p√©riode de No√´l, qu‚Äôon pourra d√©sactiver une fois les f√™tes termin√©es. 
Des modules activ√©s uniquement en p√©riode de soldes, ou m√™me des campagnes r√©serv√©es aux premiers utilisateurs qui acc√©derons a la fonctionnalit√©. 
On peut √©galement rapidement mettre en place un syst√®me pour g√©rer des fonctionnalit√©s payantes de la m√™me mani√®re que pour les features temporaire, juste en changeant les crit√®res de s√©lection.&lt;/p&gt;

&lt;h2 id=&quot;comment-impl√©menter&quot;&gt;Comment impl√©menter&lt;/h2&gt;

&lt;p&gt;Il existe un &lt;a href=&quot;https://featureflags.io/&quot;&gt;site web&lt;/a&gt; qui rassemble √©norm√©ment de ressources autour de ce sujet, des guides, mais aussi une liste de librairies/SDKs. En le parcourant, nous nous rendons compte qu‚Äôil existe beaucoup de fa√ßons diff√©rentes de l‚Äôimpl√©menter.&lt;/p&gt;

&lt;p&gt;Il existe plusieurs frameworks disponibles, parfois pour plusieurs langages de d√©veloppement, nous pouvons retrouver par exemple, FF4J pour Java, FFLIP pour nodeJS ou encore Toggle pour Golang.&lt;/p&gt;

&lt;p&gt;On peut √©galement retrouver des solutions Saas qui vont vous permettre via un SDK, (et bien s√ªr moyennant finance üòä), d‚Äôimpl√©menter du feature flipping dans votre code, c‚Äôest le cas par exemple de launchdarkly, qui a un sdk disponible pour quasiment tous les langages du march√©.&lt;/p&gt;

&lt;p&gt;Le plus int√©ressant serait peut-√™tre de cr√©er une solution maison, mais cela demanderait pas mal d‚Äôeffort, et pourrait devenir vite complexe √† g√©rer pour les diff√©rents langages qu‚Äôon peut utiliser. Cependant ! Il existe une solution open source, que vous pouvez d√©ployer, via du conteneur dans votre infrastructure, compatible avec les langages les plus communs, il s‚Äôagit de Unleash qui apprait comme √©tant une solution tr√®s attrayante ! Mettant √† disposition facilement une plateforme de gestion des features, facile √† d√©ployer et √† maintenir, vous laissant √©galement la possibilit√© d‚Äôy impl√©menter des fonctionnalit√©s propres √† vos besoin, compatible avec la plupart des langages, que demander de mieux !&lt;/p&gt;

&lt;h2 id=&quot;quelques-tests-pour-se-faire-un-avis&quot;&gt;Quelques tests pour se faire un avis&lt;/h2&gt;

&lt;p&gt;Pour tester rapidement, nous avons d√©cid√© de fabriquer une application web, d√©velopp√©e en React, qui ferait appel √† deux APIs diff√©rentes, une d√©velopp√©e en NestJS, l‚Äôautre en Java Spring, pour justement activer ou non des features.&lt;/p&gt;

&lt;p&gt;C√¥t√© React nous avons utilis√© &lt;a href=&quot;https://github.com/paralleldrive/react-feature-toggles/&quot;&gt;React Feature Toggles&lt;/a&gt;, l‚Äôimpl√©mentation du feature flipping est assez simple cot√© front. Nous r√©cup√©rons la liste des features et en fonction de leur disponibilit√© : les composants relatifs √† ces features sont activ√©s/charg√©s.&lt;/p&gt;

&lt;p&gt;Pour l‚ÄôAPI Nestjs, nous avons utilis√© &lt;a href=&quot;https://github.com/FredKSchott/fflip&quot;&gt;FFLIP&lt;/a&gt;, plut√¥t simple √† mettre en place, qui fonctionne avec un principe de crit√®res qui peuvent √™tre d√©finis, calcul√©s et cumul√©s, qui donnent acc√®s √† une ou plusieurs features. La simplicit√© d‚Äôutilisation et de compr√©hension permet une mutualisation rapide du code et le tout sans co√ªt suppl√©mentaire, contrairement √† d‚Äôautres solutions Saas.&lt;/p&gt;

&lt;p&gt;Exemple d‚Äôun crit√®re&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;nl&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;isPaidUser&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;nx&quot;&gt;check&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isPaid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isPaid&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;isPaid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exemple d‚Äôune feature&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;nl&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;newFeatureRollout&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;c1&quot;&gt;// Si la feature est associ√©e √† une liste de crit√®re, tous les crit√®res doivent √™tre √©valu√©s √† vrai pour rendre accessible la feature √† l‚Äôutilisateur &lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;criteria&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;isPaidUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;percentageOfUsers&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.5&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; 
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;allowUserIDs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;AllowEdIds&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;],&lt;/span&gt; 
    &lt;span class=&quot;nx&quot;&gt;enabled&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Exemple utilisation simple&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fflip&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;fflip&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; 

 &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Users&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Bob&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;isPaid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;role&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;scrum&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;canDrinkBeer&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; 
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; 
&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 

&lt;span class=&quot;nx&quot;&gt;fflip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt; 
    &lt;span class=&quot;na&quot;&gt;criteria&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Criteria&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Une liste de crit√®res comme d√©finie plus haut &lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Features&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// Une liste de feature comme d√©finie plus haut &lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt; 

&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;fflip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getFeaturesForUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]));&lt;/span&gt; 

&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;listName&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Users&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;fflip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;isFeatureEnabledForUser&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;canDrinkBeer&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;Welcome to the Closed Beta!&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;str&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; can go drink some beer!\n`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pour finir, avec l‚ÄôAPI Spring, nous avons essay√© de mettre en place un syst√®me maison, afin de v√©rifier la possibilit√© de se passer de librairie ou solution tierce. Et le r√©sultat est plut√¥t concluant, nous avons des r√©sultats similaires entre les 2 APIs.&lt;/p&gt;

&lt;p&gt;Tr√®s grossi√®rement, pour imager √† quoi ressemble un bout de code qui utilise du Feature Flipping, nous pourrions le r√©sumer √† un ensemble de ‚Äúif‚Äù.&lt;/p&gt;

&lt;p&gt;Type impl√©mentation simple&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    if Feature.is_enabled(‚Äònew_feature‚Äô) 
        # new feature 
    else 
        # other 
    End 
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le Feature Flipping consiste √† activer ou d√©sactiver une fonctionnalit√© en fonction d‚Äôune variable, dynamiquement dans le code.&lt;/p&gt;

&lt;p&gt;Mais vous vous rendrez compte que c‚Äôest un peu plus complexe que cela, si vous le souhaitez, vous pouvez retrouver nos essais &lt;a href=&quot;https://github.com/ekit3/feature-flipping&quot;&gt;ici&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Au final il nous restait un bon nombre de librairies sur diff√©rentes technologies √† tester, la liste √©tant longue, peu importe les affinit√©s que vous avez dans les langages de d√©veloppement vous trouverez de quoi essayer et pourquoi pas le mettre en place&lt;/p&gt;

&lt;h2 id=&quot;limites&quot;&gt;Limites&lt;/h2&gt;

&lt;h3 id=&quot;multiplications-des-cas-de-tests&quot;&gt;Multiplications des cas de tests&lt;/h3&gt;

&lt;p&gt;Ce type de d√©veloppement implique une grande rigueur quant au suivi et √† la mise en place des tests autour de l‚Äôapplication. La multiplication des sc√©narios de tests et des diff√©rents parcours utilisateurs peut √™tre une source de complication si le Feature Flipping n‚Äôest pas suivi ni appliqu√© correctement. Une grande rigueur est n√©cessaire de la part de toute l‚Äô√©quipe de d√©veloppement.&lt;/p&gt;

&lt;h3 id=&quot;changement-mod√®le-de-donn√©es&quot;&gt;Changement mod√®le de donn√©es&lt;/h3&gt;

&lt;p&gt;Il ne faut pas oublier non plus que certaines modifications de fonctionnalit√©s peuvent impliquer des impacts sur le mod√®le de donn√©es de l‚Äôapplication, ce qui peut rendre compliqu√© la cohabitation de plusieurs features.&lt;/p&gt;

&lt;p&gt;Le m√©tier ne demandera pas le feature flipping pour les m√™mes raisons (activation des features en fonctions des p√©riodes, des profils utilisateurs) que le d√©veloppement (faciliter le d√©veloppement, le d√©ploiement et rendre dispo la feature une fois termin√©e et test√©e)&lt;/p&gt;

&lt;p&gt;Alors, dans quelle mesure et jusqu‚Äôo√π peut-on aller avec le Feature Flipping ?&lt;/p&gt;

&lt;h3 id=&quot;quelques-conseils&quot;&gt;Quelques conseils&lt;/h3&gt;

&lt;p&gt;Si vous deviez mettre en place le Feature Flipping, un premier conseil serait de le faire d√®s le d√©but de vos projets ou de l‚Äôint√©grer sur des nouvelles fonctionnalit√©s ind√©pendantes, cela peut repr√©senter un gros travail de reprendre un syst√®me d√©j√† en place.&lt;/p&gt;

&lt;p&gt;Il vous faudra √©galement beaucoup de liant entre les √©quipes de d√©veloppement, la qualit√© et le m√©tier afin garantir une application parfaitement fonctionnelle de bout en bout. 
Mais ces efforts en valent la peine, vous n‚Äôaurez plus √† attendre les tests de telle ou telle feature pour d√©ployer, vous pourrez interagir plus facilement avec vos utilisateurs et mieux r√©agir en cas de probl√®mes.&lt;/p&gt;</content><author><name>[&quot;yohann_gueguin&quot;, &quot;maxime_montagne&quot;, &quot;jean_dusenne&quot;]</name></author><category term="Architecture" /><summary type="html">Introduction Ici nous allons parler de Feature Flipping, (que vous pouvez aussi connaitre sous le nom de Feature Toggles, Feature Switches, Feature Flag et bien d‚Äôautres encore), qui a pour principe de donner la possibilit√© de contr√¥ler l‚Äôacc√®s √† des fonctionnalit√©s de vos applications. Cette technique devient pertinente lorsque que par exemple, nous voulons mettre en place des fonctionnalit√©s destin√©es √† un public cible (beta user, premium user ‚Ä¶), que nous souhaitons avoir plus de contr√¥le sur l‚Äôensemble des services propos√©s par une application (possibilit√© de d√©sactiver telle ou telle fonctionnalit√© pour maintenance, √©volution, correctifs). Cette m√©thodologie peut √™tre impl√©ment√©e dans diff√©rents langage et de mani√®re diff√©rente, cela va √™tre √† vous de choisir ce qui correspond le mieux √† votre besoin. Il existe d√©j√† des librairies, des Frameworks, et m√™me des solutions SaaS pour r√©pondre √† ce besoin.</summary></entry><entry><title type="html">Kafka</title><link href="/articles/architecture/kafka/" rel="alternate" type="text/html" title="Kafka" /><published>2023-05-11T02:00:00-05:00</published><updated>2023-05-11T02:00:00-05:00</updated><id>/articles/architecture/kafka</id><content type="html" xml:base="/articles/architecture/kafka/">&lt;h5 id=&quot;introduction-√†-kafka&quot;&gt;Introduction √† Kafka&lt;/h5&gt;

&lt;p&gt;Bienvenue dans cette vid√©o !
Ici nous allons vulgariser les concepts de bases li√©s √† Kafka, et vous donner une id√©e des cas dans lesquels il est justifi√© de l‚Äôutiliser.
Apr√®s cette vid√©o vous en aurez appris davantage sur les principes de base de Kafka, les diff√©rentes briques qui le composent, leurs fonctionnement et interactions ainsi que les alternatives existantes.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/architecture/kafka//kafka.png&quot; alt=&quot;image&quot; /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;315&quot; src=&quot;https://www.youtube-nocookie.com/embed/1I8oVv7LNUM&quot; title=&quot;YouTube video player&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;
&lt;!--END_SUMMARY--&gt;</content><author><name>[&quot;yohann_gueguin&quot;]</name></author><category term="Architecture" /><summary type="html">Introduction √† Kafka Bienvenue dans cette vid√©o ! Ici nous allons vulgariser les concepts de bases li√©s √† Kafka, et vous donner une id√©e des cas dans lesquels il est justifi√© de l‚Äôutiliser. Apr√®s cette vid√©o vous en aurez appris davantage sur les principes de base de Kafka, les diff√©rentes briques qui le composent, leurs fonctionnement et interactions ainsi que les alternatives existantes.</summary></entry><entry><title type="html">Cr√©er un site web de documentation statique avec MkDocs</title><link href="/articles/common/mkdocs-material/" rel="alternate" type="text/html" title="Cr√©er un site web de documentation statique avec MkDocs" /><published>2023-04-27T03:00:00-05:00</published><updated>2023-04-27T03:00:00-05:00</updated><id>/articles/common/mkdocs-material</id><content type="html" xml:base="/articles/common/mkdocs-material/">&lt;h1 id=&quot;cr√©er-un-site-web-de-documentation-statique-avec-mkdocs&quot;&gt;Cr√©er un site web de documentation statique avec MkDocs&lt;/h1&gt;

&lt;p&gt;Que ce soit pour un projet d‚Äôentreprise ou un projet open-source, la documentation utilisateur et technique est cruciale.
Dans une documentation d‚Äôusage, les utilisateurs doivent pouvoir retrouver les instructions leur permettant d‚Äôaccomplir les gestes m√©tier de tous les jours.
Pour la documentation technique, les administrateurs, op√©rateurs et d√©veloppeurs doivent pouvoir retrouver les op√©rations d‚Äôinstallation, de mise √† jour, ou encore de d√©veloppement du produit.&lt;/p&gt;

&lt;p&gt;La documentation peut prendre plusieurs formes:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;un document bureautique, de type LibreOffice Writer ou Microsoft Word&lt;/li&gt;
  &lt;li&gt;des pages dans un r√©f√©rentiel documentaire de type &lt;em&gt;wiki&lt;/em&gt;, ou &lt;em&gt;Atlassian Confluence&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;un site web d√©di√©&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Les documents bureautique sont bien adapt√©s √† la documentation de proc√©dures, ou de sp√©cifications. Cependant, ils souffrent de nombreux d√©fauts comme le manque d‚Äôarchivage des modifications, une recherche compliqu√©e, un fort liant entre le format et le contenu et sont souvent port√©s par des formats propri√©taires (le fameux &lt;code class=&quot;highlighter-rouge&quot;&gt;.docx&lt;/code&gt;).&lt;/p&gt;

&lt;p&gt;Les r√©f√©rentiels de type &lt;em&gt;wiki&lt;/em&gt; r√©pondent au probl√®mes de recherche et d‚Äôarchivage des historiques de modifications. Cependant, ils n√©cessitent souvent une infrastructure avec une base de donn√©es, et ont donc un co√ªt d‚Äôh√©bergement et de maintenance.&lt;/p&gt;

&lt;p&gt;Le cas du site web statique d√©di√© est le plus adapt√© √† un projet open-source. Le site sera expos√© sur internet, aidant √† mettre en visibilit√© le projet. Un site web statique n√©cessite un h√©bergement minimum, sans base de donn√©es, et sera donc plus simple √† mettre en place.&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;h1 id=&quot;documentation-as-code&quot;&gt;&lt;em&gt;documentation-as-code&lt;/em&gt;&lt;/h1&gt;

&lt;p&gt;Pour encourager les d√©veloppeurs √† r√©diger plus de documentation, il est int√©ressant de consid√©rer l‚Äôapproche &lt;em&gt;documentation-as-code&lt;/em&gt;.
Cette approche s‚Äôappuie sur les process et outils de d√©veloppement pour proposer aux d√©veloppeurs un moyen moderne d‚Äô√©crire et publier leur documentation.&lt;/p&gt;

&lt;p&gt;Dans un processus de &lt;em&gt;documentation-as-code&lt;/em&gt;, les d√©veloppeurs r√©digent et archivent la documentation au m√™me endroit que le code source, dans un repository &lt;em&gt;git&lt;/em&gt;.
Cela permet de fournir une documentation plus pr√©cise, et plus √† jour. Les mises √† jour de documentation sont effectu√©es en m√™me temps que les mises √† jour du code source.&lt;/p&gt;

&lt;p&gt;Un site web de documentation pourra alors √™tre g√©n√©r√© √† partir des documents r√©dig√©s par les d√©veloppeurs. Ce site pourra √™tre publi√© avec des cha√Ænes d‚Äôint√©gration continue.&lt;/p&gt;

&lt;h2 id=&quot;les-formats-asciidoc-et-markdown&quot;&gt;Les formats &lt;em&gt;asciidoc&lt;/em&gt; et &lt;em&gt;markdown&lt;/em&gt;&lt;/h2&gt;

&lt;p&gt;En &lt;em&gt;documentation-as-code&lt;/em&gt;, la documentation sera √©crite dans un format simple, d√©j√† maitris√© par les d√©veloppeurs. Un des avantages principaux est que ces formats peuvent √™tre √©dit√©s dans les IDE que les d√©veloppeurs utilisent d√©j√†.&lt;/p&gt;

&lt;p&gt;Les deux formats les plus utilis√©s sont l‚Äô&lt;em&gt;asciidoc&lt;/em&gt; et le &lt;em&gt;markdown&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;L‚Äôint√©r√™t d‚Äôutiliser ces formats est multiple:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;le d√©veloppeur se concentre sur la r√©dation du contenu plut√¥t que sur le formattage des donn√©es&lt;/li&gt;
  &lt;li&gt;la documentation peut √™tre archiv√©e comme du code source, voire dans le m√™me repository que le projet&lt;/li&gt;
  &lt;li&gt;ces formats sont simples d‚Äôutilisation, m√™me pour des personnes ayant peu ou pas de connaissances techniques&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;les-g√©n√©rateurs-de-sites-web-statiques&quot;&gt;Les g√©n√©rateurs de sites web statiques&lt;/h2&gt;

&lt;p&gt;Des fichiers &lt;em&gt;markdown&lt;/em&gt; ou &lt;em&gt;asciidoc&lt;/em&gt; sur un repository &lt;em&gt;git&lt;/em&gt; peuvent parfois √™tre suffisant. &lt;em&gt;Gitlab&lt;/em&gt; et &lt;em&gt;Github&lt;/em&gt; sont capables d‚Äôafficher des fichiers &lt;em&gt;markdown&lt;/em&gt; ou &lt;em&gt;asciidoc&lt;/em&gt; directement dans leur interface. C‚Äôest le cas par exemple des fameux &lt;code class=&quot;highlighter-rouge&quot;&gt;README.md&lt;/code&gt; qu‚Äôon retrouve sur une majorit√© de projets.
Cet usage peut suffire pour documenter une librairie ou un projet simple. 
D‚Äôautres projets, plus compliqu√©s, auront plus de pages de documentation, et des besoins de personnalisation, c‚Äôest l√† o√π un g√©n√©rateur de site web statique sera utile.&lt;/p&gt;

&lt;h3 id=&quot;asciidoc-et-asciidoctor&quot;&gt;&lt;em&gt;asciidoc&lt;/em&gt; et &lt;em&gt;asciidoctor&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;La suite de cet article ne d√©crira pas comment mettre en place &lt;em&gt;asciidoc&lt;/em&gt; et &lt;em&gt;asciidoctor&lt;/em&gt;, mais il √©tait important de mentionner ces outils, qui sont utilis√©s par de nombreux projets.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;asciidoc&lt;/em&gt;, coupl√© au g√©n√©rateur &lt;em&gt;asciidoctor&lt;/em&gt; permet directement de g√©n√©rer des pages &lt;em&gt;HTML&lt;/em&gt; statiques √† partir de un ou plusieurs fichiers de documentation source.
Les pages &lt;em&gt;HTML&lt;/em&gt; g√©n√©r√©es peuvent alors √™tre publi√©es directement.
C‚Äôest ce qui est utilis√© par le framework Java &lt;em&gt;Spring&lt;/em&gt; par exemple.&lt;/p&gt;

&lt;p&gt;Voici √† titre d‚Äôexemple la &lt;a href=&quot;https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/&quot; target=&quot;_blank&quot;&gt;documentation g√©n√©r√©e pour le framework Spring&lt;/a&gt; , √† partir des documents &lt;em&gt;asciidoc&lt;/em&gt; disponible sur &lt;em&gt;Github&lt;/em&gt;:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//mkdocs-spring.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Les sources sont visibles sur le &lt;a href=&quot;https://github.com/spring-projects/spring-boot/tree/main/spring-boot-project/spring-boot-docs/src/docs/asciidoc&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Github&lt;/em&gt; de &lt;em&gt;Spring&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Spring&lt;/em&gt; utilise donc &lt;em&gt;asciidoctor&lt;/em&gt; pour g√©n√©rer leur documentation dans 3 formats diff√©rents:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;un pdf complet&lt;/li&gt;
  &lt;li&gt;une page HTML compl√®te (autonome)&lt;/li&gt;
  &lt;li&gt;un ensemble de pages HTMLs li√©es entre elles&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;markdown-et-mkdocs&quot;&gt;&lt;em&gt;markdown&lt;/em&gt; et &lt;em&gt;MkDocs&lt;/em&gt;&lt;/h3&gt;

&lt;p&gt;Bien qu‚Äô&lt;em&gt;asciidoctor&lt;/em&gt; propose de g√©n√©rer plusieurs formats, d‚Äôautres g√©n√©rateurs compatibles Markdown existent:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jekyllrb.com/&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Jekyll&lt;/em&gt;&lt;/a&gt;, est plut√¥t orient√© blogging&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://gohugo.io/&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Hugo&lt;/em&gt;&lt;/a&gt;, est orient√© site web g√©n√©raliste&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mkdocs.org/&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;MkDocs&lt;/em&gt;&lt;/a&gt;, est orient√© documentation&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Ces g√©n√©rateurs am√®nent une structure de site web classique, avec une navigation √† plusieurs niveaux de menus, et souvent des champs de recherche.&lt;/p&gt;

&lt;p&gt;Parmis ces 3 solutions, &lt;em&gt;MkDocs&lt;/em&gt; est le plus orient√© documentation, c‚Äôest cet outil que nous allons mettre en place dans la suite de cet article.&lt;/p&gt;

&lt;h1 id=&quot;mise-en-place-de-mkdocs&quot;&gt;Mise en place de &lt;em&gt;MkDocs&lt;/em&gt;&lt;/h1&gt;

&lt;p&gt;Nous allons voir dans la suite de cet article:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;l‚Äôinstallation et la configuration de &lt;em&gt;MkDocs&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;l‚Äôutilisation et la configuration d‚Äôun th√®me et sa customisation (logo, couleurs)&lt;/li&gt;
  &lt;li&gt;la r√©daction de quelques pages&lt;/li&gt;
  &lt;li&gt;la publication en site statique avec &lt;em&gt;Github Actions&lt;/em&gt; &amp;amp; &lt;em&gt;Github Pages&lt;/em&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;cr√©ation-du-projet-de-documentation&quot;&gt;Cr√©ation du projet de documentation&lt;/h1&gt;

&lt;p&gt;La documentation peut √™tre cr√©√©e comme un repository Git d√©di√©, ou comme un r√©pertoire d‚Äôun repository existant, dans le cas d‚Äôune approche &lt;em&gt;mono-repo&lt;/em&gt; par exemple.&lt;/p&gt;

&lt;p&gt;C‚Äôest cette deuxi√®me solution que nous allons suivre.
Dans un projet existant, on commence par cr√©er un r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;docs&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;mkdir &lt;/span&gt;docs/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;La cr√©ation du squelette de documentation peut se faire avec le &lt;em&gt;CLI&lt;/em&gt; (pour Command Line Interface) de &lt;em&gt;MkDocs&lt;/em&gt; et la commande &lt;a href=&quot;https://www.mkdocs.org/user-guide/cli/#mkdocs-new&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;mkdocs new&lt;/code&gt;&lt;/a&gt;, ou simplement en initialisant quelques fichiers √† la main.&lt;/p&gt;

&lt;p&gt;Nous allons cr√©er l‚Äôarborescence suivante:&lt;/p&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
‚îú‚îÄ docs/
‚îÇ  ‚îî‚îÄ index.md
‚îî‚îÄ mkdocs.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le contenu de notre fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdocs.yml&lt;/code&gt; minimal est le suivant:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;site_name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Galactic Empire&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pour r√©f√©rence, la &lt;a href=&quot;https://www.mkdocs.org/user-guide/configuration/&quot; target=&quot;_blank&quot;&gt;documentation de &lt;em&gt;MkDocs&lt;/em&gt;&lt;/a&gt; liste les param√®tres de configuration qui peuvent √™tre modifi√©s dans le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdocs.yml&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Un fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;docs/index.md&lt;/code&gt; permet de servir de page d‚Äôaccueil:&lt;/p&gt;

&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;gh&quot;&gt;# Documentation&lt;/span&gt;

Bienvenue sur la documentation de l'Empire Galactique
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;d√©marrage-de-mkdocs-en-mode-preview&quot;&gt;D√©marrage de &lt;em&gt;MkDocs&lt;/em&gt; en mode preview&lt;/h1&gt;

&lt;p&gt;&lt;em&gt;MkDocs&lt;/em&gt; est √©crit en python, et peut √™tre install√© en quelques commandes. La &lt;a href=&quot;https://www.mkdocs.org/user-guide/installation/#installing-mkdocs&quot; target=&quot;_blank&quot;&gt;proc√©dure d‚Äôinstallation&lt;/a&gt; est simple:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mkdocs
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Il existe √©galement des images &lt;em&gt;Docker&lt;/em&gt; d√©di√©es, qui seront utiles pour l‚Äôautomatisation avec &lt;em&gt;Github Actions&lt;/em&gt; ou &lt;em&gt;Gitlab CI&lt;/em&gt; pour la publication, bien que nous allons nous en passer.&lt;/p&gt;

&lt;p&gt;Le d√©marrage du site, en mode &lt;em&gt;preview&lt;/em&gt;, se fait en une commande:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkdocs serve
INFO     -  Building documentation...
INFO     -  Cleaning site directory
INFO     -  Documentation built &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;0.15 seconds
INFO     -  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;09:32:45] Watching paths &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes: &lt;span class=&quot;s1&quot;&gt;'docs'&lt;/span&gt;, &lt;span class=&quot;s1&quot;&gt;'mkdocs.yml'&lt;/span&gt;
INFO     -  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;09:32:45] Serving on http://127.0.0.1:8000/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le site web est construit, et disponible en local:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//create-docs-website-preview.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;ajout-dun-th√®me--customisation&quot;&gt;Ajout d‚Äôun th√®me &amp;amp; customisation&lt;/h1&gt;

&lt;p&gt;Le th√®me par d√©faut n‚Äôest pas tr√®s √©l√©gant.
Plusieurs th√®mes existent, et il est possible de cr√©er le sien, √† condition de savoir un peu d√©velopper en HTML/CSS.&lt;/p&gt;

&lt;p&gt;N√©anmoins, un th√®me populaire est &lt;a href=&quot;https://squidfunk.github.io/mkdocs-material&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Material for MkDocs&lt;/em&gt;&lt;/a&gt; (13k stars sur &lt;em&gt;Github&lt;/em&gt;). Ce th√®me propose une interface √©pur√©e, personnalisable, et le support d‚Äôextensions √† &lt;em&gt;markdown&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;L‚Äôinstallation du th√®me se fait en une ligne de commande:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;pip &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;mkdocs-material
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pour utiliser notre th√®me, il faut le pr√©ciser dans le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdocs.yml&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;site_name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Galactic Empire&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# configuration du th√®me&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;material&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Nous allons maintenant un peu customiser notre th√®me.
Toutes les instructions sont disponible dans la &lt;a href=&quot;https://squidfunk.github.io/mkdocs-material/setup/changing-the-colors/&quot; target=&quot;_blank&quot;&gt;documentation de &lt;em&gt;Material for Mkdocs&lt;/em&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;h2 id=&quot;le-logo&quot;&gt;Le logo&lt;/h2&gt;

&lt;p&gt;Pour changer le logo, il faut indiquer quel fichier utiliser dans la configuration.
Pour notre exemple, je suis all√© chercher un logo libre de droits sur le site web &lt;a href=&quot;https://pngrepo.com&quot; target=&quot;_blank&quot;&gt;https://pngrepo.com&lt;/a&gt;, et je l‚Äôai positionn√© dans un r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;docs/assets&lt;/code&gt; que j‚Äôai cr√©√© pour l‚Äôoccasion:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
‚îú‚îÄ‚îÄ docs
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ death-star.png
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ index.md
‚îî‚îÄ‚îÄ mkdocs.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le logo est ensuite r√©f√©renc√© dans le fichier de configuration:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;site_name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Galactic Empire project&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# configuration du th√®me&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;material&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;logo&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;assets/death-star.png&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;√Ä noter que le r√©pertoire &lt;em&gt;assets&lt;/em&gt; d√©clar√© dans la configuration est bien relatif au r√©pertoire &lt;em&gt;docs&lt;/em&gt;.&lt;/p&gt;

&lt;h2 id=&quot;les-couleurs&quot;&gt;Les couleurs&lt;/h2&gt;
&lt;p&gt;La configuration des couleurs passe par une d√©claration CSS, si on veut sortir des couleurs propos√©es dans la palette de couleurs par d√©faut.
Un fichier css peut surcharger l‚Äôensemble des variables de couleurs pr√©d√©finies. La liste des variables est disponible dans le &lt;a href=&quot;https://github.com/squidfunk/mkdocs-material/blob/master/src/assets/stylesheets/main/_colors.scss&quot; target=&quot;_blank&quot;&gt;fichier de d√©finition des couleurs&lt;/a&gt; du code source de &lt;em&gt;Material for MkDocs&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;Pour surcharger les couleurs principales, il suffit donc de les re-d√©clarer dans un fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.css&lt;/code&gt;, de cette mani√®re:&lt;/p&gt;

&lt;div class=&quot;language-css highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nd&quot;&gt;:root&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;py&quot;&gt;--md-primary-fg-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;#394A59&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;py&quot;&gt;--md-accent-fg-color&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;m&quot;&gt;#556567&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.css&lt;/code&gt; doit √™tre d√©pos√© o√π l‚Äôon souhaite. Ici, nous avons cr√©√© un r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;docs/stylesheets&lt;/code&gt;:&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;.
‚îú‚îÄ‚îÄ docs
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ assets
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ death-star.png
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ index.md
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ stylesheets
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ galactic-empire.css
‚îî‚îÄ‚îÄ mkdocs.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Enfin, le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.css&lt;/code&gt; doit √™tre r√©f√©renc√© dans la configuration de notre site:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;site_name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Galactic Empire project&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;# configuration du th√®me&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;theme&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;material&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;logo&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;assets/death-star.png&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;extra_css&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;stylesheets/galactic-empire.css&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Et voici notre site avec le th√®me et sa customisation.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//create-docs-website-theme.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;h1 id=&quot;lajout-de-contenu&quot;&gt;L‚Äôajout de contenu&lt;/h1&gt;
&lt;p&gt;L‚Äôajout de contenu passe maintenant simplement par l‚Äôajout de nouveaux fichiers &lt;em&gt;markdown&lt;/em&gt; dans le r√©pertoire de documentation.&lt;/p&gt;

&lt;p&gt;Voici un exemple de page de contenu suppl√©mentaire:&lt;/p&gt;

&lt;div class=&quot;language-markdown highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;title&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Organisation&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;author&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Darth Vader&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;

&lt;span class=&quot;gh&quot;&gt;# Organisation de l'Empire Galactique&lt;/span&gt;

L'Empire Galactique est dirig√© par l'Empereur Palpatine.

Son bras droit est le seigneur Vador.

Le Grand Moff Tarkin est le gouverneur r√©gional de la Bordure Ext√©rieur.
Il est √† la t√™te du projet &quot;√âtoile de la mort&quot;, et son commandant.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;L‚Äôen-t√™te du fichier est au format &lt;em&gt;Front Matter&lt;/em&gt;, qui a √©t√© popularis√© par &lt;a href=&quot;https://jekyllrb.com/docs/front-matter/&quot; target=&quot;_blank&quot;&gt;&lt;em&gt;Jekyll&lt;/em&gt;&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Le rendu est le suivant:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//create-docs-website-content-page.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Notez que :&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;le titre de la page est celui du premier header Markdown &lt;code class=&quot;highlighter-rouge&quot;&gt;#&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;dans la navigation de gauche, le titre utilis√© est celui du bloc de description de la page &lt;em&gt;Front Matter&lt;/em&gt;.&lt;/li&gt;
  &lt;li&gt;le nom de l‚Äôauteur appara√Æt dans les m√©ta-donn√©es de la page g√©n√©r√©e:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
  ...
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;meta&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;author&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;content=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Darth Vader&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
  ...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/head&lt;/span&gt;      
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;publication-avec-github-actions--github-pages&quot;&gt;Publication avec &lt;em&gt;Github Actions&lt;/em&gt; &amp;amp; &lt;em&gt;Github Pages&lt;/em&gt;&lt;/h1&gt;

&lt;p&gt;Maintenant que notre site web est fonctionnel, nous allons le mettre √† disposition sur le web avec &lt;em&gt;Github Pages&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;La cr√©ation d‚Äôun repository &lt;em&gt;Github&lt;/em&gt; et les bases de &lt;em&gt;Github Actions&lt;/em&gt; sont en dehors du p√©rim√®tre de cet article.&lt;/p&gt;

&lt;p&gt;La construction du site web se fait avec la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;mkdocs build&lt;/code&gt;.
L‚Äôex√©cution de cette commande produit un nouveau r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;site&lt;/code&gt; qui contient le site web g√©n√©r√©:&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;mkdocs build 
INFO     -  Cleaning site directory
INFO     -  Building documentation to directory: ekit3/mkdocs-website-sample/site
INFO     -  Documentation built &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;0.16 seconds
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Nous allons donc utiliser cette commmande pour g√©n√©rer notre site web √† publier.&lt;/p&gt;

&lt;p&gt;Voici un workflow &lt;em&gt;Github Actions&lt;/em&gt;, qui installe le langage &lt;em&gt;Python&lt;/em&gt;, &lt;em&gt;MkDocs&lt;/em&gt; et &lt;em&gt;Material for MkDocs&lt;/em&gt;, et construit notre site:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Build &amp;amp; Publish site&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;main&quot;&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;pull_request&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;branches&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;main&quot;&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/checkout@v3&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Set up Python $&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/setup-python@v3&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Install dependencies&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;python -m pip install mkdocs&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;python -m pip install mkdocs-material&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Build site&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;|&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;mkdocs build&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;L‚Äô√©tape suivante consiste √† publier le site construit sur &lt;em&gt;Github Pages&lt;/em&gt;, ce qui se fait avec 2 actions d√©di√©es.&lt;/p&gt;

&lt;p&gt;L‚Äôaction &lt;code class=&quot;highlighter-rouge&quot;&gt;upload-pages-artifact&lt;/code&gt; permet de s√©lectionner un r√©pertoire √† envoyer √† Github Pages, en l‚Äôoccurence, notre r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;site&lt;/code&gt;, qui contient notre site web.&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Upload Pages Artifact&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/upload-pages-artifact@v1&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;path&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;./site&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Cette action peut √™tre ajout√©e au job &lt;em&gt;build&lt;/em&gt; d√©crit plus haut.&lt;/p&gt;

&lt;p&gt;Enfin, l‚Äôaction &lt;code class=&quot;highlighter-rouge&quot;&gt;deploy-pages&lt;/code&gt; permet d‚Äôex√©cuter le d√©ploiement, nous l‚Äôajoutons dans un job s√©par√©:&lt;/p&gt;

&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;jobs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;]&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;deploy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;needs&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;build&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;runs-on&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;ubuntu-latest&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;permissions&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;pages&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;write&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;id-token&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;write&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;github-pages&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;$&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;steps&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Deploy to GitHub Pages&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;deployment&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;uses&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;actions/deploy-pages@v1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le fichier final complet est disponible sur &lt;a href=&quot;https://github.com/ekit3/mkdocs-website-sample/blob/main/.github/workflows/publish.yml&quot; target=&quot;_blank&quot;&gt;le repository &lt;em&gt;Github&lt;/em&gt;&lt;/a&gt; contenant le code source de cet article.&lt;/p&gt;

&lt;p&gt;√Ä noter que le d√©ploiement avec &lt;em&gt;Github Pages&lt;/em&gt; doit √™tre activ√© dans le repository &lt;em&gt;Github&lt;/em&gt;, et que le repository doit √™tre public :&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//create-docs-website-github-pages.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Une fois le fichier Github Actions publi√©, le workflow pourra s‚Äôex√©cuter, et publier le site web:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/mkdocs-material//create-docs-website-workflow.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Le r√©sultat final est visible &lt;a href=&quot;https://ekit3.github.io/mkdocs-website-sample/&quot; target=&quot;_blank&quot;&gt;via ce lien&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Le code source de cet article est disponible dans notre repository &lt;em&gt;Github&lt;/em&gt; &lt;a href=&quot;https://github.com/ekit3/mkdocs-website-sample&quot; target=&quot;_blank&quot;&gt;mkdocs-website-sample&lt;/a&gt;&lt;/p&gt;

&lt;h1 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h1&gt;

&lt;p&gt;En conclusion, nous avons vu les principes de documentation-as-code, et qu‚Äôil √©tait tr√®s simple de publier une documentation sous la forme d‚Äôun site web. 
Nous avons √©galement vu comment utiliser le format &lt;em&gt;markdown&lt;/em&gt;, coupl√© √† l‚Äôoutil &lt;em&gt;MkDocs&lt;/em&gt; et le th√®me &lt;em&gt;Material for MkDocs&lt;/em&gt; pour g√©n√©rer un site web et le personnaliser.
Enfin, nous avons vu comment utiliser &lt;em&gt;Github Actions&lt;/em&gt; et &lt;em&gt;Github Pages&lt;/em&gt; pour publier notre site de documentation sur internet.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;MkDocs&lt;/em&gt;, coupl√© √† un h√©bergement avec &lt;em&gt;Gitlab Pages&lt;/em&gt; ou &lt;em&gt;Github Pages&lt;/em&gt;, permet de g√©n√©rer un site web en quelques √©tapes rapides.
Cela en fait l‚Äôoutil id√©al pour documenter un projet open-source ou interne.&lt;/p&gt;

&lt;h1 id=&quot;liens&quot;&gt;Liens&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.mkdocs.org/&quot; target=&quot;_blank&quot;&gt;Documentation&lt;/a&gt; de &lt;em&gt;MkDocs&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://squidfunk.github.io/mkdocs-material/&quot; target=&quot;_blank&quot;&gt;Documentation&lt;/a&gt; de &lt;em&gt;Material for MkDocs&lt;/em&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://squidfunk.github.io/mkdocs-material/setup/changing-the-colors/&quot; target=&quot;_blank&quot;&gt;La customisation&lt;/a&gt; de &lt;em&gt;Material for MkDocs&lt;/em&gt; (couleurs, fonts, ic√¥nes)&lt;/li&gt;
  &lt;li&gt;L‚Äôic√¥ne &lt;em&gt;Death Star&lt;/em&gt; utilis√©e pour le site g√©n√©r√© sur &lt;a href=&quot;https://www.pngrepo.com/svg/275952/death-star-star-wars&quot; target=&quot;_blank&quot;&gt;pngrepo.com&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Les actions Github utilis√©es:
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/actions/upload-pages-artifact&quot; target=&quot;_blank&quot;&gt;upload-pages-artifact&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://github.com/actions/deploy-pages&quot; target=&quot;_blank&quot;&gt;deploy-pages&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;Le &lt;a href=&quot;https://github.com/ekit3/mkdocs-website-sample&quot; target=&quot;_blank&quot;&gt;code source&lt;/a&gt; associ√© √† cet article&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;julien_wittouck&quot;]</name></author><category term="Common" /><category term="git" /><category term="tools" /><category term="docs" /><summary type="html">Cr√©er un site web de documentation statique avec MkDocs Que ce soit pour un projet d‚Äôentreprise ou un projet open-source, la documentation utilisateur et technique est cruciale. Dans une documentation d‚Äôusage, les utilisateurs doivent pouvoir retrouver les instructions leur permettant d‚Äôaccomplir les gestes m√©tier de tous les jours. Pour la documentation technique, les administrateurs, op√©rateurs et d√©veloppeurs doivent pouvoir retrouver les op√©rations d‚Äôinstallation, de mise √† jour, ou encore de d√©veloppement du produit. La documentation peut prendre plusieurs formes: un document bureautique, de type LibreOffice Writer ou Microsoft Word des pages dans un r√©f√©rentiel documentaire de type wiki, ou Atlassian Confluence un site web d√©di√© Les documents bureautique sont bien adapt√©s √† la documentation de proc√©dures, ou de sp√©cifications. Cependant, ils souffrent de nombreux d√©fauts comme le manque d‚Äôarchivage des modifications, une recherche compliqu√©e, un fort liant entre le format et le contenu et sont souvent port√©s par des formats propri√©taires (le fameux .docx). Les r√©f√©rentiels de type wiki r√©pondent au probl√®mes de recherche et d‚Äôarchivage des historiques de modifications. Cependant, ils n√©cessitent souvent une infrastructure avec une base de donn√©es, et ont donc un co√ªt d‚Äôh√©bergement et de maintenance. Le cas du site web statique d√©di√© est le plus adapt√© √† un projet open-source. Le site sera expos√© sur internet, aidant √† mettre en visibilit√© le projet. Un site web statique n√©cessite un h√©bergement minimum, sans base de donn√©es, et sera donc plus simple √† mettre en place.</summary></entry><entry><title type="html">Abstract Data Types</title><link href="/articles/common/abstract-data-types/" rel="alternate" type="text/html" title="Abstract Data Types" /><published>2023-03-15T02:00:00-05:00</published><updated>2023-03-15T02:00:00-05:00</updated><id>/articles/common/abstract-data-types</id><content type="html" xml:base="/articles/common/abstract-data-types/">&lt;h5 id=&quot;les-types-abstraits-ou-pourquoi-vous-devez-utiliser-optional&quot;&gt;Les types abstraits, ou pourquoi vous devez utiliser Optional&lt;/h5&gt;

&lt;p&gt;En tant que d√©veloppeur, nous cherchons souvent des moyens d‚Äôam√©liorer nos applications. Les rendre plus robustes, plus norm√©es, ou encore an√©antir les potentiels effets de bord. La mont√©e des langages fonctionnels a pu faire r√©appara√Ætre certains concepts math√©matiques pour am√©liorer tout √ßa.
C‚Äôest le cas des types abstraits (en anglais, abstract data type ou ADT). Au-del√† des gains cit√©s, certains ADT permettent d‚Äôam√©liorer la gestion de certains langages.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/abstract-data-types//henry_1.png&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;L‚Äôillustre Henri, qui aime tant les math√©matiques, semble √™tre tr√®s int√©ress√© par le sujet, mais surtout parce qu‚Äôil existe un ADT pour optimiser &lt;a href=&quot;https://ekite.tech/articles/front-end/algebraic-structure/&quot;&gt;son application du plus fort cailloux&lt;/a&gt;. Cela permettra d‚Äôillustrer les explications qui suivent.
&lt;!--END_SUMMARY--&gt;&lt;/p&gt;

&lt;h5 id=&quot;d√©finitions&quot;&gt;D√©finitions&lt;/h5&gt;

&lt;p&gt;Pour cr√©er un type de donn√©e il faut r√©unir un ensemble de valeurs et des op√©rations √† appliquer sur cet ensemble. On peut prendre exemple sur les nombres entiers (int, integer).
Il est possible d‚Äôappliquer une multitude d‚Äôop√©rations sur les entiers : additions, soustractions, multiplications, etc.&lt;/p&gt;

&lt;p&gt;Une des analogies les plus reprises en informatique des types de donn√©es sont les primitives, comme les entiers, les bool√©ens, ou les float par exemple.
N.B : Les types primitifs sont nativement g√©r√©s par le langage, qui stocke directement les valeurs des variables en m√©moire, parfois dans une zone m√©moire d√©di√©e (la stack).&lt;/p&gt;

&lt;p&gt;L‚Äô√©volution d‚Äôun type de donn√©e, ce sont les types de donn√©es d√©finis par utilisateur. Pour vulgariser il s‚Äôagit d‚Äôune structure nomm√©e et compos√©e de type de donn√©es. Il est possible de les repr√©senter par des structures, des √©num√©rations ou encore des unions. Pour illustrer la repr√©sentation d‚Äôun point est un type de donn√©es d√©finies par utilisateur : Point(int x, int y).&lt;/p&gt;

&lt;p&gt;Les types de donn√©es d√©fini par utilisateur ne sont pas d√©finis par la machine contrairement aux primitives. Les op√©rations sous-jacentes de ce type de donn√©es sont elles aussi d√©finies par l‚Äôutilisateur (le d√©veloppeur).&lt;/p&gt;

&lt;p&gt;Un type abstrait peut √™tre repr√©sent√© comme le moule d‚Äôun type de donn√©es d√©finis par utilisateur √† la diff√©rence pr√®s que ce type doit amener une certaine robustesse dans l‚Äô√©criture de types. 
Ce type de donn√©es doit r√©pondre √† trois contraintes pour subsister dans un syst√®me de type. Il doit √™tre capable de d√©finir des types sommes, produits et r√©cursifs.&lt;/p&gt;

&lt;h5 id=&quot;pr√©-requis-du-syst√®me-de-type-pour-faire-des-adt&quot;&gt;Pr√©-requis du syst√®me de type pour faire des ADT&lt;/h5&gt;

&lt;p&gt;1 - Le type somme (tagged-union, variant) c‚Äôest la capacit√© de d√©finir un type pouvant se d√©finir par un sous-ensemble fini de types. En Java cela correspond aux sealed-interface, en OCaml ce sont les variants, en Rust les enum.
Exemple en OCaml :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; type month_type = 
  | PLEIN 
  | CREUX 
  | BIS of int
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;2 - Le type produit (record) correspond √† la capacit√© de cr√©er des structures dans un langage. En Java, on peut cr√©er des objets ou des records, en Rust ou en C on peut cr√©er des structures (struct).&lt;/p&gt;

&lt;p&gt;3 - Le type r√©cursif correspond √† la capacit√© pour un type de s‚Äôappeler lui-m√™me. 
Exemple avec les variants :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt; type List = 
  | Item of int * List
  | Empty

Item (1, Item (2, Item ( 3, Empty)))
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Voici une liste de quelques langages permettant de faire des ADT :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Caml&lt;/li&gt;
  &lt;li&gt;Rust&lt;/li&gt;
  &lt;li&gt;Haskell&lt;/li&gt;
  &lt;li&gt;Java 17+&lt;/li&gt;
  &lt;li&gt;Typescript&lt;/li&gt;
  &lt;li&gt;Python&lt;/li&gt;
  &lt;li&gt;Scala&lt;/li&gt;
  &lt;li&gt;Kotlin&lt;/li&gt;
&lt;/ul&gt;

&lt;h5 id=&quot;cas-dutilisations&quot;&gt;Cas d‚Äôutilisations&lt;/h5&gt;

&lt;p&gt;Les types de donn√©es abstraits permettent d‚Äôacqu√©rir de la robustesse applicative ET conceptuelle. Cela permet √©galement de pouvoir cr√©er des &lt;a href=&quot;https://ekite.tech/articles/other/design-pattern/&quot;&gt;design pattern&lt;/a&gt; purs et de simplifier la mise en place de machine √† √©tat.
Enfin les ADT permettent de rapprocher les donn√©es d‚Äôun programme li√© aux &lt;a href=&quot;https://ekite.tech/articles/front-end/algebraic-structure/&quot;&gt;structures alg√©briques&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Voici une liste de quelques types abstraits connus, li√©s aux structures alg√©briques:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;La pr√©sence de valeur (Option)&lt;/li&gt;
  &lt;li&gt;La r√©ussite d‚Äôun programme (Try)&lt;/li&gt;
  &lt;li&gt;La r√©ussite ou l‚Äôerreur d‚Äôun programme (Result)&lt;/li&gt;
  &lt;li&gt;La possibilit√© d‚Äôafficher une donn√©e (Show)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Henri a pr√©par√© quelques cartes que vous pourrez trouver &lt;a href=&quot;https://docs.google.com/presentation/u/0/d/1P06bSfyXNix0k740iRl1LyyqNyRibcAOsTWn9lomjUo/edit&quot;&gt;ici&lt;/a&gt; !&lt;/p&gt;

&lt;h5 id=&quot;la-parole-√†-henri&quot;&gt;La parole √† Henri&lt;/h5&gt;

&lt;p&gt;Henri nous rappelle que son application a √©t√© cod√©e en Java 17.
La gestion d‚Äôerreur dans certains langages peut-√™tre tr√®s gourmande en termes de ressources. Ce &lt;a href=&quot;https://www.infoworld.com/article/2076868/how-the-java-virtual-machine-handles-exceptions.html&quot;&gt;lien&lt;/a&gt; explique en d√©tails le bytecode derri√®re un try-catch. Pour r√©sumer, lorsqu‚Äôune exception survient il faut pouvoir dire √† la machine de revenir en arri√®re et ex√©cuter le code dans la partie ‚Äúcatch‚Äù.
Plusieurs ann√©es se sont √©coul√©es depuis et Henri trouve que son application est obsol√®te
Il demande √† son ami de faire √©voluer son application, mais se retrouve depuis quelques temps confront√© √† une multitude de probl√®me qu‚Äôil ne comprend pas :&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    java.lang.IllegalArgumentException: D20160229 is not a Caillou
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/abstract-data-types//henry_2.png&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Henri est venu nous voir en nous expliquant qu‚Äôil a ce probl√®me √† chaque fois qu‚Äôil enregistre un de ses cailloux un 29 f√©vrier. Cela fait d√©j√† 6 ans qu‚ÄôHenri n‚Äôarrive pas √† enregistrer son caillou pr√©f√©r√©.
Prenons notes de l‚Äôexistant :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Les fonctionnalit√©s sont r√©tro-compatibles avec l‚Äôancien mod√®le.&lt;/li&gt;
  &lt;li&gt;La structure de donn√©es d‚Äôun caillou a chang√© comme suit :
    &lt;ul&gt;
      &lt;li&gt;Un caract√®re et 8 chiffres.
Nous d√©cidons de corriger l‚Äôensemble tel qu‚Äôil soit constitu√© d‚Äôun caract√®re et d‚Äôune date au format yyyyMMdd. (Cela corrigera en parti les probl√®mes de la nouvelle application d‚ÄôHenri)
Nous ne pouvons donc plus nous fier √† l‚Äôensemble CPH (Cailloux Potentiels d‚ÄôHenri), nous sommes sur un ensemble diff√©rent que nous nommerons NCPH (Nouveaux Cailloux Potentiels d‚ÄôHenri) .
Notons que cet ensemble est compos√© de l‚Äôensemble CPH et de toute cha√Æne de caract√®res avec les caract√©ristiques susmentionn√©es (nommons cet ensemble CPGH pour Cailloux Potentiels du Grand Henri). On obtient donc CPGH = CPH + NPCH.&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/abstract-data-types//henry_3.png&quot; alt=&quot;image&quot; /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Malgr√© notre pr√©c√©dente correction Henri nous a remont√© qu‚Äôil subsiste quelques lenteurs et nous fait part de ses besoins :&lt;br /&gt;
1 - Il veut pouvoir basculer sur son ancien mod√®le √† tout moment.&lt;br /&gt;
2 - Faire en sorte que son application ne subisse plus de lenteurs / erreurs incompr√©hensibles.&lt;br /&gt;
Pour le premier point nous verrons une prochaine fois l‚Äôapplication de la th√©orie des cat√©gories (plus particuli√®rement la fl√®che).
Pour le second √ßa tombe bien, car nous avons investigu√© et sommes tomb√© sur quelques imbrications de try-catch dignes d‚Äôune &lt;a href=&quot;https://en.wikipedia.org/wiki/Defensive_programming&quot;&gt;bonne programmation d√©fensive&lt;/a&gt;. Cela s‚Äôexplique par le fait de devoir convertir les √©l√©ments de CPH vers CPGH.
/!\ N‚Äôoublions pas qu‚ÄôHenri proc√®de √† des millions d‚Äôenregistrements de cailloux par jour.&lt;/p&gt;

&lt;p&gt;La solution au probl√®me &lt;img src=&quot;/articles/common/abstract-data-types//henry_4.png&quot; alt=&quot;image&quot; /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;65&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s is not a Cailloux&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;365&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s is not a Cailloux&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;doSomethingWithCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(L‚Äôancien code.)&lt;/p&gt;

&lt;p&gt;Ces imbrications nous privent de pr√©cieuses performances. Une des solutions √† ce probl√®me c‚Äôest l‚ÄôADT Result. 
Malheureusement pour Henri en Java 17 il n‚Äôexiste pas d‚Äôimpl√©mentation de Result. Cependant il y a eu une grande avanc√©e permettant de cr√©er ce genre de typage :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Les interfaces scell√©es&lt;/li&gt;
  &lt;li&gt;Les records&lt;/li&gt;
  &lt;li&gt;Le switch-pattern-matching
Voici comment on pourrait repr√©senter le Result en Java 17&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;sealed&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;interface&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;permits&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ok&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;util&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;requireNonNull&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; 
    &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Err&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;java&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;util&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Objects&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;requireNonNull&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Ok&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Err&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;E&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(source: &lt;a href=&quot;https://oteku.github.io/&quot;&gt;Thomas Haessl√©&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;Voici comment Henri l‚Äôutilise aujourd‚Äôhui&lt;/p&gt;
&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;65&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s is not a Cailloux&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;365&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;%s is not a Cailloux&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;kt&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;handleCreate&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;input&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Err&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;Ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Exception&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;doSomethingWithCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;ok&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;(Le nouveau code)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/common/abstract-data-types//henry_5.png&quot; alt=&quot;image&quot; /&gt; &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Maintenant Henri est heureux, il propose pour conclure quelques cartes pour m√©moriser certains ADT et leurs particularit√©s.&lt;/p&gt;

&lt;p&gt;Sources&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Tagged_union&quot;&gt;https://en.wikipedia.org/wiki/Tagged_union&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://fr.wikipedia.org/wiki/Structure_de_donn%C3%A9es&quot;&gt;https://fr.wikipedia.org/wiki/Structure_de_donn%C3%A9es&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://fr.wikipedia.org/wiki/Type_abstrait&quot;&gt;https://fr.wikipedia.org/wiki/Type_abstrait&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://dev.realworldocaml.org/variants.html&quot;&gt;https://dev.realworldocaml.org/variants.html&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jpintelli.com/2020/12/28/adt-with-java-sealed-classes-pattern-matching-records/&quot;&gt;https://jpintelli.com/2020/12/28/adt-with-java-sealed-classes-pattern-matching-records/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Record_(computer_science)&quot;&gt;https://en.wikipedia.org/wiki/Record_(computer_science)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://fr.wikipedia.org/wiki/Type_r%C3%A9cursif&quot;&gt;https://fr.wikipedia.org/wiki/Type_r%C3%A9cursif&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://blog.shangjiaming.com/vavr-introduction/&quot;&gt;https://blog.shangjiaming.com/vavr-introduction/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.vavr.io/&quot;&gt;https://www.vavr.io/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://v2.ocaml.org/manual/gadts-tutorial.html&quot;&gt;https://v2.ocaml.org/manual/gadts-tutorial.html&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://cs.wellesley.edu/~cs251/s12/handouts/modules.pdf&quot;&gt;https://cs.wellesley.edu/~cs251/s12/handouts/modules.pdf&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://medium.com/@aoturan/commonly-used-abstract-data-types-d9470b14f864&quot;&gt;https://medium.com/@aoturan/commonly-used-abstract-data-types-d9470b14f864&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;florian_barbet&quot;]</name></author><category term="Common" /><summary type="html">Les types abstraits, ou pourquoi vous devez utiliser Optional En tant que d√©veloppeur, nous cherchons souvent des moyens d‚Äôam√©liorer nos applications. Les rendre plus robustes, plus norm√©es, ou encore an√©antir les potentiels effets de bord. La mont√©e des langages fonctionnels a pu faire r√©appara√Ætre certains concepts math√©matiques pour am√©liorer tout √ßa. C‚Äôest le cas des types abstraits (en anglais, abstract data type ou ADT). Au-del√† des gains cit√©s, certains ADT permettent d‚Äôam√©liorer la gestion de certains langages. L‚Äôillustre Henri, qui aime tant les math√©matiques, semble √™tre tr√®s int√©ress√© par le sujet, mais surtout parce qu‚Äôil existe un ADT pour optimiser son application du plus fort cailloux. Cela permettra d‚Äôillustrer les explications qui suivent.</summary></entry><entry><title type="html">direnv pour booster votre shell</title><link href="/articles/devops/direnv-pour-votre-shell/" rel="alternate" type="text/html" title="direnv pour booster votre shell" /><published>2022-11-02T00:00:00-05:00</published><updated>2022-11-02T00:00:00-05:00</updated><id>/articles/devops/direnv-pour-votre-shell</id><content type="html" xml:base="/articles/devops/direnv-pour-votre-shell/">&lt;p&gt;Je suis le genre de d√©veloppeur qui travaille toujours avec un terminal ouvert sur le c√¥t√©, en plus de mon IDE.
Je lance souvent des commandes &lt;code class=&quot;highlighter-rouge&quot;&gt;mvn&lt;/code&gt; pour m‚Äôassurer que mon projet compile et que mes tests s‚Äôex√©cutent correctement. C‚Äôest un vieux r√©flexe qui date de l‚Äô√©poque o√π les IDE n‚Äôavaient qu‚Äôun support limit√© de &lt;em&gt;Maven&lt;/em&gt;. Lancer ces commandes hors-IDE m‚Äôaide souvent √† valider que tout fonctionnera bien dans un environnement de CI par exemple.
J‚Äôai donc parfois besoin de changer de version de &lt;em&gt;Java&lt;/em&gt; en fonction du projet dans lequel je me trouve.
&lt;em&gt;Maven&lt;/em&gt; utilise la variable d‚Äôenvironnement &lt;code class=&quot;highlighter-rouge&quot;&gt;JAVA_HOME&lt;/code&gt; pour localiser l‚Äôinstallation de &lt;em&gt;Java&lt;/em&gt; √† utiliser. Donc √™tre capable de charger des variables d‚Äôenvironnement diff√©rentes en fonction d‚Äôun projet peut s‚Äôav√©rer pratique.
Un autre usage courant consiste √† venir charger des cl√© d‚ÄôAPI ou des secrets d‚Äôacc√®s cloud comme des variables &lt;code class=&quot;highlighter-rouge&quot;&gt;AWS_ACCESS_KEY&lt;/code&gt; ou autres en fonction de mes diff√©rents projets.&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; (&lt;a href=&quot;https://direnv.net/&quot; target=&quot;_blank&quot;&gt;lien&lt;/a&gt;) est un outil √©crit en go qui permet de charger des variables d‚Äôenvironnement dans la session courante du terminal, lorsqu‚Äôon change de r√©pertoire en effectuant un &lt;code class=&quot;highlighter-rouge&quot;&gt;cd&lt;/code&gt; .&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;h2 id=&quot;installation&quot;&gt;Installation&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; est disponible dans les d√©pots de nombreuses distributions Linux, l‚Äôinstallation sur Ubuntu se fait avec les commandes habituelles, √† savoir &lt;code class=&quot;highlighter-rouge&quot;&gt;apt install direnv&lt;/code&gt;.
L‚Äôinstallation pour d‚Äôautres distributions se fait √† partir des d√©p√¥ts, ou bien directement √† partir de binaires pr√©-compil√©s √† r√©cup√©rer sur Github dans &lt;a href=&quot;https://github.com/direnv/direnv/releases&quot; target=&quot;_blank&quot;&gt;les releases de direnv&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id=&quot;configuration&quot;&gt;Configuration&lt;/h2&gt;
&lt;p&gt;Une fois install√©, il faut indiquer au shell d‚Äôappeler le binaire &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; √† chaque changement de r√©pertoire.
Le shell que j‚Äôutilise au quotidien est &lt;code class=&quot;highlighter-rouge&quot;&gt;zsh&lt;/code&gt;. Pour &lt;code class=&quot;highlighter-rouge&quot;&gt;zsh&lt;/code&gt;, la configuration de &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; consiste √† venir modifier mon fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.zshrc&lt;/code&gt; pour y ajouter la ligne suivante:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;eval&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;direnv hook zsh&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Les proc√©dures de configuration pour les autres shells sont d√©taill√©es &lt;a href=&quot;https://direnv.net/docs/hook.html&quot; target=&quot;_blank&quot;&gt;sur le site de direnv&lt;/a&gt; et sont du m√™me ordre que la proc√©dure ci-dessus.&lt;/p&gt;
&lt;h2 id=&quot;utilisation-basique&quot;&gt;Utilisation basique&lt;/h2&gt;
&lt;p&gt;L‚Äôutilisation de &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; se fait au travers d‚Äôun fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; √† positionner dans le r√©pertoire souhait√©.
Ce fichier peut contenir:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;des commandes &lt;code class=&quot;highlighter-rouge&quot;&gt;export&lt;/code&gt; pour d√©clarer des variables d‚Äôenvironnement&lt;/li&gt;
  &lt;li&gt;des appels de fonction de la stdlib &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;des appels de fonction customis√©s&lt;/li&gt;
  &lt;li&gt;du code shell (bash)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Un exemple de fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; d√©pos√© dans un r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;~/workspaces/demo-direnv&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/jdk-17.0.1+12
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;MAVEN_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/apache-maven-3.8.4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ce fichier d√©clare deux variables d‚Äôenvironnement qui me sont utiles dans un projet Java.
√Ä l‚Äôentr√©e dans le r√©pertoire contenant ce fichier, &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; va tenter de charger le fichier. Les variables d‚Äôenvironnement export√©es par le fichier seront alors charg√©es dans la session shell courante.
Au premier chargement d‚Äôun fichier, ou apr√®s une modification, &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; demandera une validation explicite pour autoriser le fichier.&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/workspaces &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;demo-direnv
direnv: error /home/jwittouck/workspaces/demo-direnv/.envrc is blocked. Run &lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt;direnv allow&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; to approve its content
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;J‚Äôex√©cute donc &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv allow&lt;/code&gt; pour autoriser le chargement de mon fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; direnv allow
direnv: loading ~/workspaces/demo-direnv/.envrc
direnv: &lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; +JAVA_HOME +MAVEN_HOME
~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; nous indique qu‚Äôil a charg√© notre fichier, ainsi que nos deux variables d‚Äôenvironnement.
Nous pouvons maintenant les utiliser:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;
/opt/jdk-17.0.1+12
~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$MAVEN_HOME&lt;/span&gt;
/opt/apache-maven-3.8.4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si on quitte le r√©pertoire, les variables sont d√©charg√©es:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ..
direnv: unloading
~/workspaces &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# rien ici !&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;modification-du-path&quot;&gt;Modification du PATH&lt;/h2&gt;
&lt;p&gt;Pour nous simplifier la vie, &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; propose des fonctions qui permettent de manipuler le &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt; facilement. La fonction &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH_add&lt;/code&gt; permet d‚Äôajouter simplement une nouvelle valeur au &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;. En voici un exemple dans mon fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; pr√©c√©dent:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/jdk-17.0.1+12
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;MAVEN_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/apache-maven-3.8.4

PATH_add &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin
PATH_add &lt;span class=&quot;nv&quot;&gt;$MAVEN_HOME&lt;/span&gt;/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Avec cette nouvelle version de mon fichier, j‚Äôai donc ajout√© mes versions de &lt;code class=&quot;highlighter-rouge&quot;&gt;java&lt;/code&gt; et &lt;code class=&quot;highlighter-rouge&quot;&gt;maven&lt;/code&gt; au &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;.  Ces ajouts seront retir√©s √† la sortie du r√©pertoire:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;# je rentre dans mon r√©pertoire demo-direnv&lt;/span&gt;
~/workspaces &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;demo-direnv
direnv: loading ~/workspaces/demo-direnv/.envrc
direnv: &lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; +JAVA_HOME +MAVEN_HOME ~PATH

&lt;span class=&quot;c&quot;&gt;# le $PATH a √©t√© modifi√©&lt;/span&gt;
~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; java &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
openjdk 17.0.1 2021-10-19
OpenJDK Runtime Environment Temurin-17.0.1+12 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;build 17.0.1+12&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
OpenJDK 64-Bit Server VM Temurin-17.0.1+12 &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;build 17.0.1+12, mixed mode, sharing&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# je sors du r√©pertoire&lt;/span&gt;
~/workspaces/demo-direnv &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ..
direnv: unloading

&lt;span class=&quot;c&quot;&gt;# le $PATH ne contient plus la commande java&lt;/span&gt;
~/workspaces &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; java &lt;span class=&quot;nt&quot;&gt;--version&lt;/span&gt;
zsh: &lt;span class=&quot;nb&quot;&gt;command &lt;/span&gt;not found: java
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Avec &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt;, je peux donc changer de version de &lt;code class=&quot;highlighter-rouge&quot;&gt;java&lt;/code&gt; dans mon &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;, simplement en changeant de r√©pertoire.&lt;/p&gt;
&lt;h2 id=&quot;utilisation-avanc√©e&quot;&gt;Utilisation avanc√©e&lt;/h2&gt;
&lt;p&gt;Pour aller plus loin, &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; propose une librairie de fonctions qu‚Äôils nomment &lt;em&gt;stdlib&lt;/em&gt;. Ces fonctions sont list√©es et document√©es dans la documentation de direnv &lt;a href=&quot;https://direnv.net/man/direnv-stdlib.1.html&quot; target=&quot;_blank&quot;&gt;man/direnv-stdlib.1&lt;/a&gt;.
Voici quelques unes de ces commandes que j‚Äôutilise r√©guli√®rement.&lt;/p&gt;
&lt;h3 id=&quot;source_up&quot;&gt;&lt;a href=&quot;https://direnv.net/man/direnv-stdlib.1.html#codesourceup-ltfilenamegtcode&quot; target=&quot;_blank&quot;&gt;source_up&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Cette commande permet d‚Äôaller chercher et ex√©cuter le premier fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; dans l‚Äôarborescence remontante des fichiers, ce qui permet de factoriser un peu le contenu de mes fichiers &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt;.
Un exemple concret d‚Äôarborescence de fichiers:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
‚îî‚îÄ‚îÄ workspaces
 ¬†¬† ‚îú‚îÄ‚îÄ .envrc
 ¬†¬† ‚îú‚îÄ‚îÄ projet-java-11
 ¬†¬† ‚îÇ   ‚îî‚îÄ‚îÄ .envrc
 ¬†  ‚îî‚îÄ‚îÄ projet-java-17
 ¬†      ‚îî‚îÄ‚îÄ .envrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;~/workspaces/.envrc&lt;/code&gt; contient les variables communes √† mes deux projets:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;MAVEN_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/apache-maven-3.8.4
PATH_add &lt;span class=&quot;nv&quot;&gt;$MAVEN_HOME&lt;/span&gt;/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Le fichier  &lt;code class=&quot;highlighter-rouge&quot;&gt;~/workspaces/projet-java-11/.envrc&lt;/code&gt; contient une configuration pour &lt;em&gt;Java&lt;/em&gt; 11, ainsi que la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;source_up&lt;/code&gt; qui permet de charger le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;~/workspaces/.envrc&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source_up
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/jdk-11.0.13+8
PATH_add &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Le fichier  &lt;code class=&quot;highlighter-rouge&quot;&gt;~/workspaces/projet-java-17/.envrc&lt;/code&gt; contient une configuration similaire pour &lt;em&gt;Java&lt;/em&gt; 17:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;source_up
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/opt/jdk-17.0.1+12
PATH_add &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Avec cette utilisation, la variable &lt;code class=&quot;highlighter-rouge&quot;&gt;MAVEN_HOME&lt;/code&gt; est disponible dans les sous-r√©pertoires. Cette configuration permet de factoriser mes fichiers &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; pour tous mes projets.&lt;/p&gt;
&lt;h3 id=&quot;dotenv&quot;&gt;&lt;a href=&quot;https://direnv.net/man/direnv-stdlib.1.html#codedotenv-ltdotenvpathgtcode&quot; target=&quot;_blank&quot;&gt;dotenv&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; peut aussi scruter les fichiers &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt;, qui doivent exposer les variables d‚Äôenvironnement sous forme de cl√©/valeur. Les fichiers &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; sont moins souple car aucun script ne peut y √™tre √©crit. La commande &lt;code class=&quot;highlighter-rouge&quot;&gt;dotenv&lt;/code&gt; peut n√©anmoins aider si des &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt; existent d√©j√† sur un projet.
Voici un exemple de fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;AWS_ACCESS_KEY_ID&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;xxxx-xxx-xxx-xxxx
&lt;span class=&quot;nv&quot;&gt;AWS_SECRET_ACCESS_KEY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;xxxx-xxx-xxx-xxxx
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Et un exemple de fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; qui charge le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;dotenv
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Dans le cas o√π beaucoup de projets utilisent des &lt;code class=&quot;highlighter-rouge&quot;&gt;.env&lt;/code&gt;, on peut aussi configurer &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; pour charger ces fichiers automatiquement, en plus des &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; (qui restent charg√©s en priorit√©)
Cette configuration se fait dans &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.config/direnv/direnv.toml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-toml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;[global]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;load_dotenv&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;whitelist&quot;&gt;&lt;a href=&quot;https://direnv.net/man/direnv.toml.1.html#whitelist&quot; target=&quot;_blank&quot;&gt;whitelist&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Par d√©faut, pour chaque fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt;, nouveau ou modifi√©, &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; affichera ce message:&lt;/p&gt;
&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;direnv: error .envrc is blocked. Run `direnv allow` to approve its content
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Il faut donc utiliser la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv allow&lt;/code&gt; pour autoriser ces fichiers. Cela peut √™tre assez r√©barbatif quand cela arrive sur de nombreux projets.
&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; fournit une configuration permettant de whitelister les fichiers et de les autoriser automatiquement. J‚Äôy ai ajout√© mon r√©pertoire de travail. Cette configuration se fait dans &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.config/direnv/direnv.toml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-toml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nn&quot;&gt;[whitelist]&lt;/span&gt;
&lt;span class=&quot;py&quot;&gt;prefix&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;[&quot;/home/jwittouck/workspaces&quot;]&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h3 id=&quot;fonction-customis√©es&quot;&gt;Fonction customis√©es&lt;/h3&gt;
&lt;p&gt;Pour am√©liorer l‚Äôexemple plus haut concernant la gestion de la variable &lt;code class=&quot;highlighter-rouge&quot;&gt;JAVA_HOME&lt;/code&gt;, il est aussi possible d‚Äôenrichir les fonctions disponibles de &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt;.
Pour cela, il faut les ajouter au fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.config/direnv/direnvrc&lt;/code&gt;.
Pour mon usage, j‚Äôai cr√©√© cette fonction :&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;function &lt;/span&gt;use_java&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Using Java version &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;JAVA_HOME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;find /opt &lt;span class=&quot;nt&quot;&gt;-maxdepth&lt;/span&gt; 1 &lt;span class=&quot;nt&quot;&gt;-type&lt;/span&gt; d &lt;span class=&quot;nt&quot;&gt;-name&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;jdk-&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$1&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;*&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;echo&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;Loading JAVA_HOME &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;
    PATH_add &lt;span class=&quot;nv&quot;&gt;$JAVA_HOME&lt;/span&gt;/bin
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Tous mes JDK sont install√©s dans &lt;code class=&quot;highlighter-rouge&quot;&gt;/opt&lt;/code&gt;. Cette fonction permet de trouver le JDK qui correspond au premier param√®tre de la fonction et de positionner les variables &lt;code class=&quot;highlighter-rouge&quot;&gt;JAVA_HOME&lt;/code&gt; et &lt;code class=&quot;highlighter-rouge&quot;&gt;PATH&lt;/code&gt;.
Elle s‚Äôutilise dans un &lt;code class=&quot;highlighter-rouge&quot;&gt;.envrc&lt;/code&gt; de cette mani√®re:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;use_java 17
&lt;span class=&quot;c&quot;&gt;# ou&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# use_java 11&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;et voici ce que loggue &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; √† l‚Äôentr√©e du r√©pertoire :&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;~/workspaces &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;demo-direnv
direnv: loading ~/workspaces/demo-direnv/.envrc
direnv: using java 17
Using Java version 17
Loading JAVA_HOME /opt/jdk-17.0.1+12
direnv: &lt;span class=&quot;nb&quot;&gt;export&lt;/span&gt; +JAVA_HOME +MAVEN_HOME ~PATH
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; est un outil tr√®s pratique pour manipuler les variables d‚Äôenvironnement. Il s‚Äôadresse avant tout √† ceux qui passent du temps dans un shell, devs ou sysadmins.
Cet article a pr√©sent√© principalement les usages que j‚Äôen ai pour mes projets &lt;em&gt;Java&lt;/em&gt;, mais &lt;code class=&quot;highlighter-rouge&quot;&gt;direnv&lt;/code&gt; propose aussi des fonctions pour les projets &lt;code class=&quot;highlighter-rouge&quot;&gt;node&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;ruby&lt;/code&gt;, &lt;code class=&quot;highlighter-rouge&quot;&gt;python&lt;/code&gt; et d‚Äôautres.
C‚Äôest vite devenu un indispensable dans mes shells.&lt;/p&gt;
&lt;h3 id=&quot;liens&quot;&gt;Liens&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;la page d‚Äôaccueil du projet sur &lt;a href=&quot;https://direnv.net/&quot; target=&quot;_blank&quot;&gt;direnv.net&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;le repository Github du projet &lt;a href=&quot;https://github.com/direnv/direnv&quot; target=&quot;_blank&quot;&gt;direnv/direnv&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;la documentation d‚Äôinstall &lt;a href=&quot;https://direnv.net/docs/installation.html&quot; target=&quot;_blank&quot;&gt;docs/installation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;la documentation de la stdlib &lt;a href=&quot;https://direnv.net/man/direnv-stdlib.1.html&quot; target=&quot;_blank&quot;&gt;man/direnv-stdlib&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;julien_wittouck&quot;]</name></author><category term="Devops" /><summary type="html">Je suis le genre de d√©veloppeur qui travaille toujours avec un terminal ouvert sur le c√¥t√©, en plus de mon IDE. Je lance souvent des commandes mvn pour m‚Äôassurer que mon projet compile et que mes tests s‚Äôex√©cutent correctement. C‚Äôest un vieux r√©flexe qui date de l‚Äô√©poque o√π les IDE n‚Äôavaient qu‚Äôun support limit√© de Maven. Lancer ces commandes hors-IDE m‚Äôaide souvent √† valider que tout fonctionnera bien dans un environnement de CI par exemple. J‚Äôai donc parfois besoin de changer de version de Java en fonction du projet dans lequel je me trouve. Maven utilise la variable d‚Äôenvironnement JAVA_HOME pour localiser l‚Äôinstallation de Java √† utiliser. Donc √™tre capable de charger des variables d‚Äôenvironnement diff√©rentes en fonction d‚Äôun projet peut s‚Äôav√©rer pratique. Un autre usage courant consiste √† venir charger des cl√© d‚ÄôAPI ou des secrets d‚Äôacc√®s cloud comme des variables AWS_ACCESS_KEY ou autres en fonction de mes diff√©rents projets. direnv (lien) est un outil √©crit en go qui permet de charger des variables d‚Äôenvironnement dans la session courante du terminal, lorsqu‚Äôon change de r√©pertoire en effectuant un cd .</summary></entry><entry><title type="html">Web Assembly</title><link href="/articles/front-end/web-assembly/" rel="alternate" type="text/html" title="Web Assembly" /><published>2022-10-06T02:00:00-05:00</published><updated>2022-10-06T02:00:00-05:00</updated><id>/articles/front-end/web-assembly</id><content type="html" xml:base="/articles/front-end/web-assembly/">&lt;h5 id=&quot;boostez-vos-applis-web-avec-web-assembly--&quot;&gt;Boostez vos applis web avec Web Assembly ! &lt;br /&gt;&lt;/h5&gt;

&lt;p&gt;Web Assembly (ou WASM) est un standard du World Wide Web consistant en un &lt;a href=&quot;#bytecode&quot;&gt;bytecode&lt;/a&gt; ex√©cut√© c√¥t√© navigateur dans un environnement d√©di√© (sandbox) en compl√©ment du Javascript (JS).&lt;/p&gt;

&lt;p&gt;Ce code bas niveau √©tant interpr√©t√© c√¥t√© navigateur peut √™tre √©crit dans diff√©rents langages comme le C, C++, RUST, x86 etc.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;L‚Äôinterpr√©tation du Web Assembly se fait plus bas-niveau que celle du Javascript. Web Assembly utilise de mani√®re plus efficace et directe les ressources disponibles sur la machine sur laquelle il s‚Äôex√©cute (CPU/M√©moire), et permet donc d‚Äôatteindre un haut niveau de performances.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Ces performances accrues permettent alors de d√©velopper des applications qui n‚Äô√©taient pas envisageables en Javascript. Par exemple du traitement vid√©o en temps r√©el, comme le floutage d‚Äôarri√®re plan en visio-conf√©rence, ou encore des jeux vid√©o.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Pour r√©sumer, WASM a √©t√© cr√©√© pour tirer parti de la puissance des langages de bas niveau, coupl√© √† la flexibilit√© de Javascript afin de cr√©er des applications Web plus performantes.&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;h2 id=&quot;un-peu-de-contexte&quot;&gt;Un peu de contexte&lt;/h2&gt;

&lt;p&gt;WASM fut officiellement lanc√© en 2015 pour la premi√®re fois sous forme d‚Äôune d√©monstration faite sous Unity (moteur de jeu multi plateforme) afin de d√©montrer les performances et les possibilit√©s de l‚Äôoutil.&lt;/p&gt;

&lt;p&gt;Mozilla a sorti asm.js, le 21 mars 2013, un sous-ensemble du langage JS pour am√©liorer les performances gr√¢ce √† une couche de traitement binaire. 
Google et Lars Bak ont mis en place un moteur JS V8, le 2 septembre 2008, qui peut compiler nativement vers de l‚Äôassembleur.
Ces deux derniers √©v√©nements sont surtout des am√©liorations li√©es √† la gestion du langage.&lt;/p&gt;

&lt;h2 id=&quot;objectifs&quot;&gt;Objectifs&lt;/h2&gt;

&lt;p&gt;Les objectifs du WASM sont:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;la rapidit√©&lt;/b&gt; : avoir des performances proches des applications natives (C/C++/Rust) tout en fonctionnant sur un navigateur Web..&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;la portabilit√©&lt;/b&gt; : WebAssembly est con√ßu de mani√®re √† s‚Äôassocier aux autres technologies web mais aussi de garantir une r√©tro compatibilit√© ascendante entre les diff√©rentes versions.&lt;br /&gt;
Il existe aussi des polyfills pour les navigateurs plus anciens.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;la s√©curit√©&lt;/b&gt; : l‚Äôenvironnement d√©di√© permet de garantir une isolation totale du code et de la machine de l‚Äôutilisateur.
Par exemple, la partie entr√©e / sortie (r√©seau et fichier) est totalement inaccessible (en dehors du module qui l‚Äôembarque).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;la-compilation&quot;&gt;La compilation&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/web-assembly//image-1.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Fig: Le processus de compilation Web Assembly &lt;br /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Afin d‚Äôex√©cuter du Web Assembly dans une page web, il faut compiler du code √©crit dans un langage source (√©crit en C, C++, Rust ou autre) vers un code interm√©diaire (le bytecode WASM). Le bytecode est situ√© entre le code d‚Äôun langage source et le code machine (binaire).
Cela est rendu possible gr√¢ce √† une infrastructure de compilation &lt;a href=&quot;#llvm&quot;&gt;LLVM&lt;/a&gt;, qui impl√©mente la traduction d‚Äôun AST (&lt;a href=&quot;#syntaxeTree&quot;&gt;arbre de syntaxe abstraite&lt;/a&gt;) en bytecode WASM. &lt;br /&gt;
Le fichier ainsi compil√© aura pour extension ‚Äò.wasm‚Äô.&lt;/p&gt;

&lt;p&gt;L‚Äôutilisation d‚Äôune LLVM permet d‚Äôisoler et d‚Äôuniformiser la compilation de tous les langages sources support√©s vers ce format. Pour ajouter le support d‚Äôun langage, il suffit d‚Äôimpl√©menter un programme capable de lire un AST pour le transmettre √† la LLVM (transpilateur).&lt;br /&gt;
Il est donc possible de cr√©er des compilateurs pour n‚Äôimporte quel langage. (une liste des langages principaux d√©j√† support√©s par WASM se trouve sur le Discord de sa communaut√©.)&lt;/p&gt;

&lt;p&gt;Fonctionnement g√©n√©ral du Web Assembly&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/web-assembly//image-2.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le code initialement √©crit dans un langage haut-niveau est donc compil√© dans en un module web-assembly. La compilation produit un fichier binaire ‚Äò.wasm‚Äô contenant le bytecode devant √™tre ex√©cut√© dans le navigateur web de l‚Äôutilisateur. Les fichiers ‚Äò.wasm‚Äô peuvent alors √™tre distribu√©s aux utilisateurs comme le reste des ressources statiques d‚Äôune application web.&lt;/p&gt;

&lt;p&gt;Lorsqu‚Äôun utilisateur consulte l‚Äôapplication web, les ressources statiques (HTML, CSS, Images) sont t√©l√©charg√©es par son navigateur, ainsi que le code Javascript et les binaires ‚Äò.wasm‚Äô. Le navigateur se charge de d√©coder, compiler et ex√©cuter le code WASM, en parall√®le du code Javascript habituel.&lt;/p&gt;

&lt;h2 id=&quot;les-concepts&quot;&gt;Les concepts&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Int√©gration sur le web
WebAssembly est con√ßu de mani√®re √† facilement s‚Äôassocier aux autres technologies web et de garantir une r√©trocompatibilit√©.&lt;/li&gt;
  &lt;li&gt;Le fichier compil√© est t√©l√©charg√©, l‚Äôex√©cution est faite nativement sur le poste de l‚Äôutilisateur et la m√©moire est g√©r√©e de mani√®re lin√©aire.&lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Bien que l‚Äôex√©cution ait lieu sur le poste de l‚Äôutilisateur, WASM ne permet pas l‚Äôacc√®s √† certains composants du &lt;a href=&quot;#kernel&quot;&gt;kernel&lt;/a&gt; : Il existe une limite sur la gestion des entr√©es/sorties. (pour des raisons de s√©curit√©)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;M√©moire lin√©aire
La m√©moire lin√©aire est une seule plage d‚Äôadresse m√©moire sur laquelle on peut agir au fil de l‚Äôeau. Vu l‚Äôabstraction du sujet, il est mieux de pouvoir se repr√©senter tout √ßa. Voici un parall√®le entre la mani√®re dont est g√©r√©e la m√©moire en Java (de Jakob Jenkov) et un sch√©ma de la m√©moire lin√©aire (de Meghalee Goswami) :&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/web-assembly//image-3.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Avant d‚Äôaller √† la suite un petit apart√© : WASM a mis en place un traducteur du fichier compil√© nomm√© &lt;a href=&quot;https://developer.mozilla.org/en-US/docs/WebAssembly/Understanding_the_text_format&quot;&gt;Web Assembly Text (WAT)&lt;/a&gt;. Le fichier compil√© est donc lisible&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Module 
Repr√©sente un binaire WASM qui a √©t√© compil√© en code ex√©cutable par le navigateur.&lt;/li&gt;
  &lt;li&gt;Table 
Repr√©sente un tableau typ√© de r√©f√©rence ne pouvant √™tre stock√© de mani√®re brute en m√©moire (pour des raisons de s√©curit√© et de portabilit√©).&lt;/li&gt;
  &lt;li&gt;Instance
Repr√©sente un module associ√© ainsi que ses √©tats (la m√©moire, la table ainsi qu‚Äôun ensemble de donn√©es import√©es).&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;les-cas-dusage-de-wasm&quot;&gt;Les cas d‚Äôusage de WASM&lt;/h2&gt;

&lt;p&gt;Comme expliqu√© en introduction, WASM permet un haut niveau de performances impossible en Javascript. Ces performances ouvrent la possibilit√© d‚Äôimpl√©menter de nouveaux cas d‚Äôusage. Certains de ces cas d‚Äôusage sont concrets et d√©j√† mis en place dans certaines applications et jeux. D‚Äôautres cas d‚Äôusage sont plut√¥t de l‚Äôordre du POC (Proof Of Concept) ou de la d√©mo : &lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Server-side rendering&lt;/li&gt;
  &lt;li&gt;OCI (Open Container Initiative)&lt;/li&gt;
  &lt;li&gt;3D Web View Rendering&lt;/li&gt;
  &lt;li&gt;√âtendre des fonctions JS&lt;/li&gt;
  &lt;li&gt;Extensions navigateurs (ublock origin)&lt;/li&gt;
  &lt;li&gt;Utilisation de la 3D&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Voici des exemples d‚Äôapplications connues faites √† l‚Äôaide de WASM : &lt;br /&gt;
&lt;a href=&quot;https://www.figma.com/fr/blog/webassembly-cut-figmas-load-time-by-3x/&quot;&gt;Figma&lt;/a&gt;, &lt;a href=&quot;https://madewithwebassembly.com/showcase/google-earth&quot;&gt;Google Earth&lt;/a&gt;, &lt;a href=&quot;https://madewithwebassembly.com/showcase/unity&quot;&gt;Unity&lt;/a&gt;, &lt;a href=&quot;https://madewithwebassembly.com/showcase/tensorflow&quot;&gt;Unity&lt;/a&gt;, etc.&lt;/p&gt;

&lt;h3 id=&quot;pros&quot;&gt;Pros&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Performance&lt;/li&gt;
  &lt;li&gt;Cross platform&lt;/li&gt;
  &lt;li&gt;S√©curisation&lt;/li&gt;
  &lt;li&gt;multiples langages Rust / C++ / C etc.&lt;/li&gt;
  &lt;li&gt;Portabilit√©&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;cons&quot;&gt;Cons&lt;/h3&gt;
&lt;ul&gt;
  &lt;li&gt;Communaut√© faible&lt;/li&gt;
  &lt;li&gt;Beaucoups de concepts complexe √† appr√©hender avant de pouvoir faire la moindre chose&lt;/li&gt;
  &lt;li&gt;N‚Äôa pas encore perc√© malgr√© son ‚Äú√¢ge‚Äù&lt;/li&gt;
  &lt;li&gt;Installation plus ou moins ais√©e en fonction de la plateforme de d√©veloppement&lt;/li&gt;
  &lt;li&gt;Pas ‚Äúuser friendly‚Äù&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;Le principal but de WASM est d‚Äôapporter un enrichissement de la stack technique de Javascript avec un haut niveau de performances.
La plus grande difficult√© de WASM reste d‚Äôassimiler ses diff√©rents principes et concepts g√©n√©raux&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;devoir utiliser un langage de bas niveau&lt;/li&gt;
  &lt;li&gt;utiliser un compilateur&lt;/li&gt;
  &lt;li&gt;avoir affaire √† une communaut√© de niche&lt;/li&gt;
  &lt;li&gt;assez complexe √† appr√©hender
Malgr√© une adoption encore faible, il n‚Äôen reste pas moins fiable que ce soit en termes de s√©curit√©, de performance, de lisibilit√© et dans certains domaines la seule solution possible afin de garantir un haut niveau de performance sur une application Web.&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;lexique&quot;&gt;Lexique&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;b&gt;&lt;a name=&quot;bytecode&quot;&gt;bytecode:&lt;/a&gt;&lt;/b&gt; En informatique, le bytecode (terme anglais signifiant ¬´ code en bytes ¬ª) est un code interm√©diaire entre les instructions machines et le code source, qui n‚Äôest pas directement ex√©cutable. Le bytecode (√©galement appel√© code portable ou p-code) peut √™tre cr√©√© √† la vol√©e et r√©sider en m√©moire (compilation √† la vol√©e, JIT en anglais) ou bien r√©sider dans un fichier, g√©n√©ralement binaire qui repr√©sente le programme, tout comme un fichier de code objet produit par un compilateur.
&lt;a href=&quot;https://fr.wikipedia.org/wiki/Bytecode&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;b&gt;&lt;a name=&quot;syntaxeTree&quot;&gt;Arbre de syntaxe abstraite:&lt;/a&gt;&lt;/b&gt; Un arbre de syntaxe abstraite (AST) est une mani√®re de repr√©senter la syntaxe d‚Äôun langage de programmation sous la forme d‚Äôune structure arborescente hi√©rarchique. Cette structure est utilis√©e pour g√©n√©rer des tables de symboles pour les compilateurs et la g√©n√©ration de code ult√©rieure. L‚Äôarbre repr√©sente toutes les constructions du langage et leurs r√®gles ult√©rieures.
&lt;a href=&quot;https://definir-tech.com/arbre-de-syntaxe-abstraite-ast/&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;b&gt;&lt;a name=&quot;llvm&quot;&gt;LLVM:&lt;/a&gt;&lt;/b&gt; LLVM (anciennement appel√© Low Level Virtual Machine en fran√ßais : ¬´ machine virtuelle de bas niveau ¬ª) est une infrastructure de compilateur con√ßue pour l‚Äôoptimisation du code √† la compilation, √† l‚Äô√©dition de liens, voire √† l‚Äôex√©cution ou durant les ¬´ temps morts ¬ª d‚Äôun programme, quel que soit le langage d‚Äôorigine.
LLVM permet de cr√©er une machine virtuelle pour des langages similaires √† Java et sa JVM, un g√©n√©rateur de code pour une architecture mat√©rielle sp√©cifique, et des optimiseurs de compilation ind√©pendants de toute plate-forme et de tout langage.
&lt;a href=&quot;https://fr.wikipedia.org/wiki/LLVM&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;&lt;b&gt;&lt;a name=&quot;kernel&quot;&gt;Kernel:&lt;/a&gt;&lt;/b&gt; terme anglais signifiant ¬´ noyau ¬ª. Il constitue le c≈ìur du syst√®me qui exploite un ordinateur. Il √©tablit la communication entre la partie mat√©rielle et la partie logicielle de l‚Äôappareil.
&lt;a href=&quot;https://www.jedha.co/blog/kernel-definition-utilite&quot;&gt;Source&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;sources&quot;&gt;Sources&lt;/h2&gt;

&lt;p&gt;The state of WebAssembly (2022)&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://tech.mozfr.org/post/2017/03/08/D-ou-vient-la-rapidite-de-WebAssembly&quot;&gt;https://tech.mozfr.org/post/2017/03/08/D-ou-vient-la-rapidite-de-WebAssembly&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/fr/docs/&quot;&gt;https://developer.mozilla.org/fr/docs/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://emscripten.org/&quot;&gt;https://emscripten.org/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/fr/docs/&quot;&gt;https://developer.mozilla.org/fr/docs/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://jenkov.com/tutorials/java-concurrency/java-memory-model.html&quot;&gt;https://jenkov.com/tutorials/java-concurrency/java-memory-model.html&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=hSeB9I_mK6A&amp;amp;t=4s&quot;&gt;Angry Bots D√©mo&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://discord.gg/3B8QFXkYTc&quot;&gt;lien discord Wasm&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://madewithwebassembly.com/&quot;&gt;Applications faite en WASM&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://radu-matei.com/blog/wasm-to-oci/&quot;&gt;OCI (Open Container Initiative)&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://study.com/academy/lesson/what-is-the-linear-memory-model-definition-constraints.html&quot;&gt;sch√©ma m√©moire lin√©aire de Meghalee Goswami&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;laurent_duchaussoy&quot;, &quot;florian_barbet&quot;, &quot;jean_dusenne&quot;]</name></author><category term="Front-End" /><summary type="html">Boostez vos applis web avec Web Assembly ! Web Assembly (ou WASM) est un standard du World Wide Web consistant en un bytecode ex√©cut√© c√¥t√© navigateur dans un environnement d√©di√© (sandbox) en compl√©ment du Javascript (JS). Ce code bas niveau √©tant interpr√©t√© c√¥t√© navigateur peut √™tre √©crit dans diff√©rents langages comme le C, C++, RUST, x86 etc. L‚Äôinterpr√©tation du Web Assembly se fait plus bas-niveau que celle du Javascript. Web Assembly utilise de mani√®re plus efficace et directe les ressources disponibles sur la machine sur laquelle il s‚Äôex√©cute (CPU/M√©moire), et permet donc d‚Äôatteindre un haut niveau de performances. Ces performances accrues permettent alors de d√©velopper des applications qui n‚Äô√©taient pas envisageables en Javascript. Par exemple du traitement vid√©o en temps r√©el, comme le floutage d‚Äôarri√®re plan en visio-conf√©rence, ou encore des jeux vid√©o. Pour r√©sumer, WASM a √©t√© cr√©√© pour tirer parti de la puissance des langages de bas niveau, coupl√© √† la flexibilit√© de Javascript afin de cr√©er des applications Web plus performantes.</summary></entry><entry><title type="html">Ex√©cuter une application localement sur minikube avec skaffold</title><link href="/articles/devops/skaffold-et-minikube/" rel="alternate" type="text/html" title="Ex√©cuter une application localement sur minikube avec skaffold" /><published>2022-07-29T00:00:00-05:00</published><updated>2022-07-29T00:00:00-05:00</updated><id>/articles/devops/skaffold-et-minikube</id><content type="html" xml:base="/articles/devops/skaffold-et-minikube/">&lt;p&gt;Lors du d√©veloppement d‚Äôune application pour Kubernetes, le d√©veloppeur est souvent li√© √† une boucle de feedback assez longue:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;D√©veloppement&lt;/li&gt;
  &lt;li&gt;Contruction de l‚Äôimage Docker (quelques secondes/minutes)&lt;/li&gt;
  &lt;li&gt;Push de l‚Äôimage sur un registry&lt;/li&gt;
  &lt;li&gt;D√©ploiement sur Kubernetes (quelques minutes)&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Cette boucle est g√©n√©ralement impl√©ment√©e par des pipelines de CI/CD. Ces pipelines augmentent encore le temps entre le d√©veloppement et une application d√©marr√©e sur Kubernetes. Ce temps est relativement long lorsqu‚Äôon compare un cycle de d√©veloppement local auquel un d√©veloppeur peut √™tre habitu√©.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://skaffold.dev&quot; target=&quot;_blank&quot;&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt;&lt;/a&gt;, d√©velopp√© par Google, est un outil open-source en license Apache, qui permet d‚Äôimpl√©menter cette boucle de d√©veloppement sur un environnement Kubernetes local ou distant. La promesse de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; est de rendre le d√©veloppement sur Kubernetes simple, rapide et reproductible.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/devops/skaffold-et-minikube//skaffold.png&quot; alt=&quot;la page d'accueil de skaffold&quot; /&gt;&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; impl√©mente un &lt;em&gt;pipeline&lt;/em&gt; qui se d√©roule en plusieurs √©tapes:&lt;/p&gt;
&lt;ol&gt;
  &lt;li&gt;&lt;em&gt;build&lt;/em&gt; : construction des images docker avec:
    &lt;ul&gt;
      &lt;li&gt;Docker (sur base d‚Äôun &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;)&lt;/li&gt;
      &lt;li&gt;Buildpacks&lt;/li&gt;
      &lt;li&gt;Jib&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;em&gt;tag&lt;/em&gt; de l‚Äôimage docker en utilisant diff√©rentes strat√©gies :
    &lt;ul&gt;
      &lt;li&gt;l‚Äôidentifiant du commit git (par d√©faut)&lt;/li&gt;
      &lt;li&gt;une date&lt;/li&gt;
      &lt;li&gt;des variables d‚Äôenvironnement&lt;/li&gt;
      &lt;li&gt;un hash des fichiers source
      * push de l‚Äôimage sur un registry
      * chargement direct de l‚Äôimage dans un cluster Kubernetes&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;em&gt;deploy&lt;/em&gt; : d√©ploiement de l‚Äôapplication sur Kubernetes (local ou distant) en utilisant:
    &lt;ul&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; et des fichiers yaml&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;kustomize&lt;/code&gt;&lt;/li&gt;
      &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;helm&lt;/code&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;em&gt;tail logs &amp;amp; port forward&lt;/em&gt; : affiche les logs de l‚Äôapplication et redirige un port local&lt;/li&gt;
  &lt;li&gt;&lt;em&gt;status check&lt;/em&gt; : attend la fin du bon d√©ploiement de application&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; a besoin d‚Äôun code √† d√©ployer, ainsi qu‚Äôun acc√®s √† un cluster Kubernetes. L‚Äôacc√®s au cluster se configure de la m√™me mani√®re que pour &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt;, √† travers un fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.kube/config&lt;/code&gt;. Pour la suite de cet article, j‚Äôutilise un cluster &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; que j‚Äôinstalle sur mon poste pour l‚Äôoccasion.&lt;/p&gt;

&lt;h2 id=&quot;d√©ployer-un-cluster-minikube-localement&quot;&gt;D√©ployer un cluster minikube localement&lt;/h2&gt;
&lt;p&gt;La premi√®re √©tape consiste √† d√©ployer un cluster &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; sur mon poste de d√©veloppement.
Pour ce faire, le plus pratique est de suivre les √©tapes d‚Äôinstallation de l‚Äôoutil d√©taill√©es &lt;a href=&quot;https://minikube.sigs.k8s.io/docs/start/&quot; target=&quot;_blank&quot;&gt;dans leur documentation d‚Äôinstallation&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/devops/skaffold-et-minikube//minikube-install.png&quot; alt=&quot;installation de minikube&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Voici les commandes que j‚Äôai ex√©cut√© pour installer &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; sur mon poste Linux :&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-LO&lt;/span&gt; https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64
&lt;span class=&quot;nb&quot;&gt;sudo install &lt;/span&gt;minikube-linux-amd64 /usr/local/bin/minikube
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;docker&lt;/code&gt; √©tant d√©j√† install√© sur mon poste, je peux tout de suite d√©marrer un cluster Kubernetes local avec la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube start&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;minikube start
üòÑ  minikube v1.24.0 on Debian bookworm/sid
üéâ  minikube 1.26.0 is available! Download it: https://github.com/kubernetes/minikube/releases/tag/v1.26.0
üí°  To disable this notice, run: &lt;span class=&quot;s1&quot;&gt;'minikube config set WantUpdateNotification false'&lt;/span&gt;

‚ú®  Using the docker driver based on existing profile
üëç  Starting control plane node minikube &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;cluster minikube
üöú  Pulling base image ...
üîÑ  Restarting existing docker container &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;minikube&quot;&lt;/span&gt; ...

üßØ  Docker is nearly out of disk space, which may cause deployments to fail! &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;92% of capacity&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
üí°  Suggestion: 

    Try one or more of the following to free up space on the device:
    
    1. Run &lt;span class=&quot;s2&quot;&gt;&quot;docker system prune&quot;&lt;/span&gt; to remove unused Docker data &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;optionally with &lt;span class=&quot;s2&quot;&gt;&quot;-a&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    2. Increase the storage allocated to Docker &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;Desktop by clicking on:
    Docker icon &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Preferences &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Resources &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; Disk Image Size
    3. Run &lt;span class=&quot;s2&quot;&gt;&quot;minikube ssh -- docker system prune&quot;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if &lt;/span&gt;using the Docker container runtime
üçø  Related issue: https://github.com/kubernetes/minikube/issues/9024

üê≥  Preparing Kubernetes v1.22.3 on Docker 20.10.8 ...
üîé  Verifying Kubernetes components...
    ‚ñ™ Using image gcr.io/k8s-minikube/storage-provisioner:v5
    ‚ñ™ Using image k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1
    ‚ñ™ Using image k8s.gcr.io/ingress-nginx/controller:v1.0.4
    ‚ñ™ Using image k8s.gcr.io/ingress-nginx/kube-webhook-certgen:v1.1.1
üîé  Verifying ingress addon...
üåü  Enabled addons: storage-provisioner, default-storageclass, ingress
üèÑ  Done! kubectl is now configured to use &lt;span class=&quot;s2&quot;&gt;&quot;minikube&quot;&lt;/span&gt; cluster and &lt;span class=&quot;s2&quot;&gt;&quot;default&quot;&lt;/span&gt; namespace by default
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Par d√©faut, &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; va g√©n√©rer un fichier de configuration pour &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; dans &lt;code class=&quot;highlighter-rouge&quot;&gt;~/.kube/config&lt;/code&gt;. La commande &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; sera donc imm√©diatement utilisable:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kubectl get nodes
NAME       STATUS   ROLES                  AGE    VERSION
minikube   Ready    control-plane,master   1d     v1.22.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Si la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; n‚Äôest pas install√©e, &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; l‚Äôint√®gre et elle est utilisable de cette mani√®re:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;minikube kubectl get nodes
NAME       STATUS   ROLES                  AGE    VERSION
minikube   Ready    control-plane,master   1d     v1.22.3
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Pour ma part, j‚Äôai install√© &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; avec l‚Äôoutil de packaging de mon syst√®me en suivant &lt;a href=&quot;https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/#install-using-native-package-management&quot; target=&quot;_blank&quot;&gt;cette proc√©dure&lt;/a&gt;.
Une fois que &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; et &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; sont install√©s, d√©marr√©s et configur√©s, je peux passer √† l‚Äôinstallation de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id=&quot;installation-de-skaffold&quot;&gt;Installation de skaffold&lt;/h2&gt;
&lt;p&gt;L‚Äôinstallation de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; est similaire √† celle de &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; et &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt;.
J‚Äôai suivi la proc√©dure sur &lt;a href=&quot;https://skaffold.dev/docs/install/&quot; target=&quot;_blank&quot;&gt;dans leur documentation&lt;/a&gt; et install√© la version Linux avec ces commandes:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-Lo&lt;/span&gt; skaffold https://storage.googleapis.com/skaffold/releases/latest/skaffold-linux-amd64 &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo install &lt;/span&gt;skaffold /usr/local/bin/
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; est maintenant disponible sur mon poste:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;skaffold version
v1.39.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;configuration-dun-projet&quot;&gt;Configuration d‚Äôun projet&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; se configure avec un fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold.yml&lt;/code&gt; √† positionner √† la racine de votre projet.
J‚Äôai pris pour exemple un projet Micronaut avec lequel je suis en train d‚Äôexp√©rimenter:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
‚îú‚îÄ‚îÄ micronaut-cli.yml
‚îú‚îÄ‚îÄ mvnw
‚îú‚îÄ‚îÄ mvnw.bat
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ src
    ‚îî‚îÄ‚îÄ main
        ‚îú‚îÄ‚îÄ java
        ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ com
        ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ example
        ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ Application.java
        ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ pokemons
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ PokemonController.java
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ Pokemon.java
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ PokemonRepository.java
        ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ PokemonService.java
        ‚îî‚îÄ‚îÄ resources
            ‚îú‚îÄ‚îÄ application.yml
            ‚îú‚îÄ‚îÄ bootstrap.yml
            ‚îî‚îÄ‚îÄ logback.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;La configuration initiale du projet se fait en utilisant la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold init&lt;/code&gt; . Cette commande propose diff√©rentes options (&lt;a href=&quot;https://skaffold.dev/docs/pipeline-stages/init/&quot; target=&quot;_blank&quot;&gt;documentation&lt;/a&gt;) en interactif pour cr√©er son fichier de configuration. Cette √©tape est plus simple qu‚Äô√©crire le fichier √† la main.
Comme je n‚Äôai pas encore √©crit de fichiers manifest Kubernetes pour mon application, &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; a une option pour les g√©n√©rer: &lt;code class=&quot;highlighter-rouge&quot;&gt;--generate-manifests&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;La premi√®re √©tape consiste √† configurer la phase de &lt;em&gt;build&lt;/em&gt; de l‚Äôapplication, √† savoir la construction de l‚Äôimage docker. Plusieurs options seront propos√©es, en fonction de ce qui est d√©j√† disponible dans le code : &lt;code class=&quot;highlighter-rouge&quot;&gt;Dockerfile&lt;/code&gt;, configuration de &lt;code class=&quot;highlighter-rouge&quot;&gt;jib&lt;/code&gt;, ou manifests Kubernetes.
Mon projet Micronaut a d√©j√† une configuration pour &lt;code class=&quot;highlighter-rouge&quot;&gt;jib&lt;/code&gt; dans son &lt;code class=&quot;highlighter-rouge&quot;&gt;pom.xml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;com.google.cloud.tools&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jib-maven-plugin&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.2.1&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold init&lt;/code&gt; me propose alors de param√©trer ma phase de &lt;em&gt;build&lt;/em&gt; avec Buildpacks ou Jib:&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;skaffold init &lt;span class=&quot;nt&quot;&gt;--generate-manifests&lt;/span&gt;
? Which builders would you like to create Kubernetes resources &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;?  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Use arrows to move, space to &lt;span class=&quot;k&quot;&gt;select&lt;/span&gt;, &amp;lt;right&amp;gt; to all, &amp;lt;left&amp;gt; to none, &lt;span class=&quot;nb&quot;&gt;type &lt;/span&gt;to filter]
&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;  Buildpacks &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;pom.xml&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;]&lt;/span&gt;  Jib Maven Plugin &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;com.example:demo-app-pokemon-micronaut, pom.xml&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Je choisis l‚Äôoption &lt;em&gt;Jib&lt;/em&gt; √©tant donn√© que ce plugin est d√©j√† configur√© pour mon application.&lt;/p&gt;

&lt;p&gt;L‚Äô√©tape suivante propose de configurer un port √† forwarder pour mon image Docker, je saisis le port 8080 qui est le port par d√©faut de mon application:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;? Select port to forward &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;pom-xml-image &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;leave blank &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;none&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;: 8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; me propose ensuite un manifest Kubernetes et me demande si je souhaite g√©n√©rer les fichiers:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;? Do you want to write this configuration, along with the generated k8s manifests, to skaffold.yaml? Yes
Generated manifest deployment.yaml was written
Configuration skaffold.yaml was written
You can now run &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;skaffold build] to build the artifacts
or &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;skaffold run] to build and deploy
or &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;skaffold dev] to enter development mode, with auto-redeploy
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;√Ä noter que si des fichiers de d√©ploiement Kubernetes sont d√©j√† pr√©sents dans l‚Äôapplication, &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; les d√©tecte et les ajoute √† sa configuration automatiquement.
Le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;deployment.yaml&lt;/code&gt; g√©n√©r√© pour Kubernetes est simple:&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Service&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;ports&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8080&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;protocol&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;TCP&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;clusterIP&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;None&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
&lt;span class=&quot;nn&quot;&gt;---&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;apps/v1&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Deployment&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;replicas&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;1&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;selector&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;matchLabels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;template&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;labels&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;app&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;spec&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;containers&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
        &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;ainsi que le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold.yaml&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;skaffold/v2beta29&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Config&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;demo-app-pokemon-micronaut&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;artifacts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;jib&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;na&quot;&gt;project&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;com.example:demo-app-pokemon-micronaut&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;deploy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;kubectl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;manifests&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;deployment.yaml&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;portForward&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;resourceType&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;resourceName&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;pom-xml-image&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8080&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Le fichier g√©n√©r√© contient de la configuration pour 3 √©tapes du pipeline de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;La phase de &lt;em&gt;build&lt;/em&gt; est bien configur√©e pour construire une image Docker en utilisant &lt;em&gt;Jib&lt;/em&gt;, l‚Äôimage produite sera nomm√©e &lt;code class=&quot;highlighter-rouge&quot;&gt;pom-xml-image&lt;/code&gt;. Ce nom par d√©faut pourra √™tre chang√© en modifiant ce fichier de configuration.&lt;/p&gt;

&lt;p&gt;La phase de &lt;em&gt;deploy&lt;/em&gt; est configur√©e pour d√©ployer des manifests Kubernetes, ici le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;deployment.yaml&lt;/code&gt; qui a √©t√© g√©n√©r√© par la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold init&lt;/code&gt;. Ces fichiers manifest r√©f√©rencent l‚Äôimage &lt;code class=&quot;highlighter-rouge&quot;&gt;pom-xml-image&lt;/code&gt; dans la partie &lt;em&gt;Deployment&lt;/em&gt; du manifest.
On voit donc ici comment on peut adapter cette configuration pour inclure d‚Äôautres fichiers, comme une &lt;em&gt;ConfigMap&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;J‚Äôai pris le parti de d√©placer les fichiers de manifest Kubernetes g√©n√©r√©s dans le r√©pertoire &lt;code class=&quot;highlighter-rouge&quot;&gt;src/main/Kubernetes&lt;/code&gt; de mon application et de renommer l‚Äôimage g√©n√©r√©e.
Voici la structure de mon application apr√®s ces op√©rations:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
‚îú‚îÄ‚îÄ micronaut-cli.yml
‚îú‚îÄ‚îÄ mvnw
‚îú‚îÄ‚îÄ mvnw.bat
‚îú‚îÄ‚îÄ pom.xml
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ skaffold.yaml
‚îî‚îÄ‚îÄ src
    ‚îî‚îÄ‚îÄ main
        ‚îú‚îÄ‚îÄ java
        ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ com
        ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ example
        ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ Application.java
        ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ pokemons
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ PokemonController.java
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ Pokemon.java
        ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ PokemonRepository.java
        ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ PokemonService.java
        ‚îú‚îÄ‚îÄ kubernetes
        ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ configMap.yaml
        ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ deployment.yaml
        ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ service.yaml
        ‚îî‚îÄ‚îÄ resources
            ‚îú‚îÄ‚îÄ application.yml
            ‚îú‚îÄ‚îÄ bootstrap.yml
            ‚îî‚îÄ‚îÄ logback.xml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Ainsi que le fichier &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold.yaml&lt;/code&gt;:&lt;/p&gt;
&lt;div class=&quot;language-yaml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;na&quot;&gt;apiVersion&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;skaffold/v2beta29&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;kind&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;Config&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;metadata&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;demo-skaffold&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;artifacts&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;image&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;demo-skaffold&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;jib&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;pi&quot;&gt;{}&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;deploy&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;kubectl&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;manifests&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;src/main/kubernetes/*.yaml&lt;/span&gt;
&lt;span class=&quot;na&quot;&gt;portForward&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;pi&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;resourceType&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;service&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;resourceName&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;demo-skaffold&lt;/span&gt;
  &lt;span class=&quot;na&quot;&gt;port&lt;/span&gt;&lt;span class=&quot;pi&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;m&quot;&gt;8080&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;d√©marrage-de-mon-projet&quot;&gt;D√©marrage de mon projet&lt;/h2&gt;
&lt;p&gt;Une fois les fichiers g√©n√©r√©s, la commande &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold dev&lt;/code&gt; va:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;construire l‚Äôimage docker en utilisant le builder &lt;em&gt;Jib&lt;/em&gt; configur√©&lt;/li&gt;
  &lt;li&gt;d√©poser cette image directement dans l‚Äôenvironnement du &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;d√©ployer les fichiers de configuration Kubernetes&lt;/li&gt;
  &lt;li&gt;ouvrir un port-forward sur mon port d‚Äô√©coute 8080&lt;/li&gt;
  &lt;li&gt;afficher les logs de mon application dans mon shell&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;skaffold dev   
Listing files to watch...
 - demo-skaffold
Generating tags...
 - demo-skaffold -&amp;gt; demo-skaffold:latest
Some taggers failed. Rerun with &lt;span class=&quot;nt&quot;&gt;-vdebug&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;errors.
Checking cache...
 - demo-skaffold: Found Locally
Tags used &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;deployment:
 - demo-skaffold -&amp;gt; demo-skaffold:275bf648a141313e52f422d73ad69379be4f4d7c3e9e50fe3c16289da8391c33
Starting deploy...
 - configmap/demo-skaffold created
 - deployment.apps/demo-skaffold created
 - service/demo-skaffold created
Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;deployments to stabilize...
 - deployment/demo-skaffold is ready.
Deployments stabilized &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;2.047 seconds
Port forwarding service/demo-skaffold &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;namespace default, remote port 8080 -&amp;gt; http://127.0.0.1:8080
Press Ctrl+C to &lt;span class=&quot;nb&quot;&gt;exit
&lt;/span&gt;Watching &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes...
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend]  __  __ _                                  _   
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] |  &lt;span class=&quot;se&quot;&gt;\/&lt;/span&gt;  &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;_&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; ___ _ __ ___  _ __   __ _ _   _| |_ 
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] | |&lt;span class=&quot;se&quot;&gt;\/&lt;/span&gt;| | |/ __| &lt;span class=&quot;s1&quot;&gt;'__/ _ \| '&lt;/span&gt;_ &lt;span class=&quot;se&quot;&gt;\ &lt;/span&gt;/ _&lt;span class=&quot;sb&quot;&gt;`&lt;/span&gt; | | | | __|
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] | |  | | | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;__| | | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;_&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; | | | | &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;_| | |_| | |_ 
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] |_|  |_|_|&lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;__|_|  &lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;__/|_| |_|&lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;_,_|&lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;_,_|&lt;span class=&quot;se&quot;&gt;\_&lt;/span&gt;_|
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend]   Micronaut &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;v3.5.1&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] 
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] 14:15:41.202 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;main] INFO  i.m.context.env.DefaultEnvironment - Established active environments: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;k8s, cloud]
&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;backend] 14:15:41.557 &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;main] INFO  io.micronaut.runtime.Micronaut - Startup completed &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;803ms. Server Running: http://demo-skaffold-5bfb47c8fc-cvld4:8080
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/articles/devops/skaffold-et-minikube//localhost.png&quot; alt=&quot;&quot; /&gt;&lt;/p&gt;

&lt;p&gt;En quelques minutes, mon application est d√©marr√© sur mon cluster &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt; local.
Je peux voir avec une commande &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl get all&lt;/code&gt; que mes manifests ont bien √©t√© d√©ploy√©s et que mon application tourne:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ &lt;/span&gt;kubectl get all
NAME                                 READY   STATUS    RESTARTS   AGE
pod/demo-skaffold-5bfb47c8fc-cvld4   1/1     Running   0          19m

NAME                    TYPE        CLUSTER-IP   EXTERNAL-IP   PORT&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;S&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;    AGE
service/demo-skaffold   ClusterIP   None         &amp;lt;none&amp;gt;        8080/TCP   19m
service/kubernetes      ClusterIP   10.96.0.1    &amp;lt;none&amp;gt;        443/TCP    1d

NAME                            READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/demo-skaffold   1/1     1            1           19m

NAME                                       DESIRED   CURRENT   READY   AGE
replicaset.apps/demo-skaffold-5bfb47c8fc   1         1         1       19m

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; est aussi capable de faire du &lt;em&gt;hot-reload&lt;/em&gt; sans configuration suppl√©mentaire pour les applications build√©es avec &lt;em&gt;jib&lt;/em&gt;.
Il suffit de:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;modifier le code&lt;/li&gt;
  &lt;li&gt;attendre quelques secondes que le code soit re-compil√© et l‚Äôapplication est re-d√©marr√©e&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Watching &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes...
Generating tags...
 - pom-xml-image -&amp;gt; pom-xml-image:latest
Some taggers failed. Rerun with &lt;span class=&quot;nt&quot;&gt;-vdebug&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;errors.
Checking cache...
 - pom-xml-image: Not found. Building
Starting build...
Found &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;minikube] context, using &lt;span class=&quot;nb&quot;&gt;local &lt;/span&gt;docker daemon.
Building &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;pom-xml-image]...
Target platforms: &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;linux/amd64]

...

Build &lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;pom-xml-image] succeeded
Tags used &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;deployment:
 - pom-xml-image -&amp;gt; pom-xml-image:c6d646c3c9ba7ac130cfe23c31b2391584b4bddfce984b2cc1f1f2c711c9d509
Starting deploy...
Waiting &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;deployments to stabilize...
 - deployment/pom-xml-image is ready.
Deployments stabilized &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;1.038 second
Port forwarding service/pom-xml-image &lt;span class=&quot;k&quot;&gt;in &lt;/span&gt;namespace default, remote port 8080 -&amp;gt; http://127.0.0.1:8080
Watching &lt;span class=&quot;k&quot;&gt;for &lt;/span&gt;changes...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;C‚Äôest particuli√®rement pratique pour tester une application localement!
Si je veux arr√™ter de d√©velopper, j‚Äôutilise la combinaison de touches &lt;em&gt;CTRL+C&lt;/em&gt;, qui va stopper l‚Äôapplication et faire le m√©nage sur le cluster Kubernetes:&lt;/p&gt;
&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;^C
Cleaning up...
 - configmap &lt;span class=&quot;s2&quot;&gt;&quot;demo-skaffold&quot;&lt;/span&gt; deleted
 - deployment.apps &lt;span class=&quot;s2&quot;&gt;&quot;demo-skaffold&quot;&lt;/span&gt; deleted
 - service &lt;span class=&quot;s2&quot;&gt;&quot;demo-skaffold&quot;&lt;/span&gt; deleted
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;
&lt;p&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; permet de rendre accessible au d√©veloppeur le d√©ploiement sur un cluster Kubernetes, local ou distant. Cet article a pr√©sent√© son usage sur un cluster local &lt;code class=&quot;highlighter-rouge&quot;&gt;minikube&lt;/code&gt;, mais &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; fonctionne de mani√®re indiff√©renci√©e sur un cluster distant. Il permet aussi de r√©utiliser des fichiers de configuration Kubernetes, Kustomize ou Helm existants, ce qui est tr√®s pratique si l‚Äôapplication dispose d√©j√† de ce type de fichiers.&lt;/p&gt;

&lt;p&gt;Le port forward est tr√®s bien int√©gr√© et pratique √† l‚Äôusage (pas besoin de taper une commande &lt;code class=&quot;highlighter-rouge&quot;&gt;kubectl&lt;/code&gt; suppl√©mentaire).&lt;/p&gt;

&lt;p&gt;La &lt;a href=&quot;https://skaffold.dev/docs/&quot; target=&quot;_blank&quot;&gt;documentation de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt;&lt;/a&gt; est tr√®s compl√®te et indique tous les param√®tres que chaque phase de son pipeline accepte et fourni aussi des liens vers des tutoriaux.&lt;/p&gt;

&lt;p&gt;Enfin, &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt; est au coeur des plugins &lt;em&gt;Cloud Code&lt;/em&gt; de Google, pour IntelliJ IDEA et VSCode pour l‚Äôex√©cution et le d√©ploiement des application sur Kubernetes.&lt;/p&gt;

&lt;p&gt;De nombreux &lt;a href=&quot;https://github.com/GoogleContainerTools/skaffold/tree/main/examples&quot; target=&quot;_blank&quot;&gt;exemples&lt;/a&gt; sont disponibles sur le repository Github de &lt;code class=&quot;highlighter-rouge&quot;&gt;skaffold&lt;/code&gt;, il y en aura surement un qui correspondra √† votre type de projet si vous voulez exp√©rimenter.&lt;/p&gt;

&lt;h3 id=&quot;liens&quot;&gt;Liens&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;le repository Github de &lt;a href=&quot;https://github.com/GoogleContainerTools/skaffold&quot; target=&quot;_blank&quot;&gt;GoogleContainerTools/skaffold&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;le site web &lt;a href=&quot;https://skaffold.dev/&quot; target=&quot;_blank&quot;&gt;skaffold.dev&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;la &lt;a href=&quot;https://skaffold.dev/docs/&quot; target=&quot;_blank&quot;&gt;documentation&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;les &lt;a href=&quot;https://github.com/GoogleContainerTools/skaffold/tree/main/examples&quot; target=&quot;_blank&quot;&gt;exemples de code sur Github&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;julien_wittouck&quot;]</name></author><category term="Devops" /><category term="kubernetes" /><category term="skaffold" /><category term="minikube" /><category term="docker" /><summary type="html">Lors du d√©veloppement d‚Äôune application pour Kubernetes, le d√©veloppeur est souvent li√© √† une boucle de feedback assez longue: D√©veloppement Contruction de l‚Äôimage Docker (quelques secondes/minutes) Push de l‚Äôimage sur un registry D√©ploiement sur Kubernetes (quelques minutes) Cette boucle est g√©n√©ralement impl√©ment√©e par des pipelines de CI/CD. Ces pipelines augmentent encore le temps entre le d√©veloppement et une application d√©marr√©e sur Kubernetes. Ce temps est relativement long lorsqu‚Äôon compare un cycle de d√©veloppement local auquel un d√©veloppeur peut √™tre habitu√©. skaffold, d√©velopp√© par Google, est un outil open-source en license Apache, qui permet d‚Äôimpl√©menter cette boucle de d√©veloppement sur un environnement Kubernetes local ou distant. La promesse de skaffold est de rendre le d√©veloppement sur Kubernetes simple, rapide et reproductible.</summary></entry><entry><title type="html">Design Pattern</title><link href="/articles/other/design-pattern/" rel="alternate" type="text/html" title="Design Pattern" /><published>2022-06-15T02:00:00-05:00</published><updated>2022-06-15T02:00:00-05:00</updated><id>/articles/other/design-pattern</id><content type="html" xml:base="/articles/other/design-pattern/">&lt;h5 id=&quot;lart-de-savoir-utiliser-le-bon-outil-au-bon-moment&quot;&gt;L‚Äôart de savoir utiliser le bon outil au bon moment&lt;br /&gt;&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//image-pattern.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les ‚ÄúDesign Patterns‚Äù, ou ‚Äúpatrons de conception‚Äù, sont un ensemble de solutions reconnues, particuli√®rement dans la programmation orient√©e objet, comme √©tant la meilleure r√©ponse afin de r√©soudre un probl√®me de conception r√©current.&lt;/p&gt;

&lt;p&gt;Les exemples de patrons peuvent √™tre faits de diff√©rentes fa√ßons: par le biais de sch√©mas, de pseudo code, la mani√®re d‚Äôorganiser ses modules ou classes ou √† l‚Äôaide d‚Äôune impl√©mentation propos√©e.&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;h2 id=&quot;do√π-viennent-ils-&quot;&gt;D‚Äôo√π viennent-ils ?&lt;/h2&gt;

&lt;p&gt;Nous pouvons √™tre redevable √† Christopher Alexander, anthropologue et architecte Am√©ricain pour avoir travaill√© sur ‚Äúla th√©orie des Pattern Languages‚Äù permettant des d√©clinaisons dans des domaines aussi divers que l‚Äôhistoire de l‚Äôart, l‚Äôanthropologie‚Ä¶&lt;br /&gt;
Cette fa√ßon d‚Äôaborder le mod√®le de conception a √©t√© reprise en 1987 par Kent Beck (concepteur d‚Äôextr√™me programming) et Ward Cunningham (inventeur du concept de Wiki) , qui ont d√©cid√© d‚Äôappliquer ce type de design architectural √† l‚Äôinformatique.&lt;br /&gt;
C‚Äôest en 1994, √† la suite d‚Äôun livre nomm√© &lt;b&gt;Design Patterns: Elements of Reusable Software&lt;/b&gt; co-√©crit par un collectif (GoF pour Gang of Four) et d√©crivant plus d‚Äôune vingtaine de patrons que ce principe fut r√©ellement reconnu.&lt;/p&gt;

&lt;h2 id=&quot;voici-les-diff√©rents-types-de-patrons-de-conception-&quot;&gt;Voici les diff√©rents types de patrons de conception :&lt;/h2&gt;

&lt;h3 id=&quot;le-patron-de-cr√©ation-creational-pattern&quot;&gt;&lt;b&gt;Le patron de cr√©ation&lt;/b&gt; (Creational Pattern)&lt;br /&gt;&lt;/h3&gt;
&lt;p&gt;Il a pour but d‚Äôaider √† r√©soudre les probl√®mes d‚Äôinstanciation de classes.&lt;/p&gt;

&lt;p&gt;Quelques exemples:&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Singleton&lt;/li&gt;
  &lt;li&gt;Prototype&lt;/li&gt;
  &lt;li&gt;Fabrique (Factory)&lt;/li&gt;
  &lt;li&gt;Fabrique Abstraite (Abstract Factory)&lt;/li&gt;
  &lt;li&gt;Monteur (Builder)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;le-patron-de-structure-structural-pattern&quot;&gt;&lt;b&gt;Le patron de structure&lt;/b&gt; (Structural Pattern)&lt;/h3&gt;
&lt;p&gt;Structurer les classes et objets afin de garder ceux-ci flexibles et efficaces au travers de leur 
structuration et leur interface.&lt;/p&gt;

&lt;p&gt;Quelques exemples:&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Pont (Bridge)&lt;/li&gt;
  &lt;li&gt;Fa√ßade&lt;/li&gt;
  &lt;li&gt;Adaptateur (Adapter)&lt;/li&gt;
  &lt;li&gt;Objet composite&lt;/li&gt;
  &lt;li&gt;Proxy&lt;/li&gt;
  &lt;li&gt;Poids-mouche (Flyweight pattern)&lt;/li&gt;
  &lt;li&gt;D√©corateur (Decorator)&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;le-patron-de-comportement-behavioral-pattern&quot;&gt;&lt;b&gt;Le patron de comportement&lt;/b&gt; (Behavioral Pattern)&lt;/h3&gt;
&lt;p&gt;Permet de mod√©liser et r√©partir les responsabilit√©s entre les objets.&lt;/p&gt;

&lt;p&gt;Quelques exemples:&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Cha√Æne de responsabilit√© (Chain of Responsibility)&lt;/li&gt;
  &lt;li&gt;Commande (Command)&lt;/li&gt;
  &lt;li&gt;Interpr√©teur (Interpreter)&lt;/li&gt;
  &lt;li&gt;It√©rateur (Iterator)&lt;/li&gt;
  &lt;li&gt;M√©diateur (Mediator)&lt;/li&gt;
  &lt;li&gt;M√©mento&lt;/li&gt;
  &lt;li&gt;Observateur (Observer)&lt;/li&gt;
  &lt;li&gt;Etat (State)&lt;/li&gt;
  &lt;li&gt;Strat√©gie (Strategy)&lt;/li&gt;
  &lt;li&gt;Patron de m√©thode (Template Method Pattern)&lt;/li&gt;
  &lt;li&gt;Visiteur (Visitor)&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;quand-et-pourquoi-les-utiliser-&quot;&gt;Quand et pourquoi les utiliser ?&lt;/h2&gt;

&lt;p&gt;Un d√©veloppeur ayant une culture du Design Pattern (et sachant quand c‚Äôest le moment d‚Äôen utiliser un) pourra trouver plus rapidement une solution gr√¢ce aux diff√©rents paradigmes propos√©s et ayant d√©j√† fait leurs preuves.&lt;/p&gt;

&lt;p&gt;Il permet donc :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;d‚Äôacc√©l√©rer le processus de d√©veloppement,&lt;/li&gt;
  &lt;li&gt;de r√©duire les bugs potentiels,&lt;/li&gt;
  &lt;li&gt;de conna√Ætre les bonnes pratiques et les pi√®ges √† √©viter&lt;/li&gt;
  &lt;li&gt;de s‚Äôappuyer sur la capitalisation de l‚Äôexp√©rience de la communaut√©.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Il est donc vraiment important de l‚Äôint√©grer le plus t√¥t possible dans le processus de conception / d√©veloppement.&lt;br /&gt;
Un bon d√©veloppeur devra savoir s‚Äôarr√™ter et remettre en question son code lorsqu‚Äôil se retrouve face √† un probl√®me.&lt;br /&gt;
Il faudra se demander ‚ÄúNe suis-je pas en train de r√©inventer la roue ? N‚Äôexiste t‚Äôil pas un patron qui pourrait r√©pondre √† ma probl√©matique ?‚Äù&lt;/p&gt;

&lt;h3 id=&quot;quelques-exemples&quot;&gt;Quelques exemples&lt;/h3&gt;

&lt;p&gt;Il existe de nombreux mod√®les qui sont souvent tr√®s utilis√©s. La plupart du temps beaucoup de d√©veloppeurs en utilisent sans savoir qu‚Äôil s‚Äôagit de mod√®les de patrons de conception.
Voici quelques cas parmis ceux que vous utilisez peut-√™tre sans m√™me le savoir.&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;Mod√®le Composite&lt;/b&gt; : pour repr√©senter des structures arborescentes pour pr√©senter des hi√©rarchies de composants / compos√©s.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-1.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;Singleton&lt;/b&gt; qui permet de limiter l‚Äôinstanciation d‚Äôune classe √† un seul objet.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-2.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les &lt;b&gt;it√©rateurs&lt;/b&gt; qui permettent de parcourir les √©l√©ments d‚Äôune collection (liste, arbre etc.).&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;Proxy&lt;/b&gt; : substitue une classe √† une autre en utilisant la m√™me interface permettant entre autres la s√©curit√© ou l‚Äôappel de m√©thodes √† distance.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-3.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;D√©corateur&lt;/b&gt; : attacher dynamiquement des nouvelles responsabilit√©s √† un objet&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-4.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;Fa√ßade&lt;/b&gt; pour simplifier l‚Äôutilisation d‚Äôune interface compl√®te.&lt;/p&gt;

&lt;p&gt;L‚Äô&lt;b&gt;Observateur&lt;/b&gt; : m√©canisme de souscription afin d‚Äôenvoyer des notifications √† plusieurs objets qui sont observ√©s.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-5.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le &lt;b&gt;Strat√©gie&lt;/b&gt; qui permet de cr√©er des algorithmes s√©par√©s dans plusieurs classes autonomes / interchangeables.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/other/design-pattern//dp-6.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Voici un cas d‚Äôusage √©crit en Typescript pour savoir quand l‚Äôutiliser. Imaginons que l‚Äôon souhaite faire plusieurs actions diff√©rentes mais avec le m√™me objet, nous pourrions √™tre tent√© de faire une classe qui contiendrait toutes ces actions? Oui et non, car cel√† reviendrait √† ne pas respecter un des principes du &lt;a href=&quot;https://fr.wikipedia.org/wiki/SOLID_(informatique)&quot;&gt;SOLID&lt;/a&gt; √† savoir le ‚ÄúS‚Äù pour Single Responsibility Principe.
Prenons le cas d‚Äôun site, nous voulons d√©velopper une classe qui permet de g√©rer le paiement.&lt;/p&gt;

&lt;div class=&quot;language-typescript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;Interface&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PaymentStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;amount&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;nous allons ensuite cr√©er plusieurs classes correspondant aux diff√©rents moyens de paiement :&lt;/p&gt;

&lt;div class=&quot;language-typescript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreditCardStrategy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PaymentStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

    &lt;span class=&quot;c1&quot;&gt;//  ici on fait des traitements diff√©rents&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;je paye en carte de cr√©dit un total de&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;		
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;div class=&quot;language-typescript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OtherPaymentStrategy&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;implements&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PaymentStrategy&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;


    &lt;span class=&quot;c1&quot;&gt;//  ici on fait des traitements diff√©rents&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;je paye en X moyen de paiement un total de&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;		
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Pour finir nous cr√©erons une classe finale qui va permettre d‚Äôutiliser notre strat√©gie.&lt;/p&gt;

&lt;div class=&quot;language-typescript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cart&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

	&lt;span class=&quot;kd&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
	
	&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;getTotalCart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;kr&quot;&gt;number&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;total&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

	&lt;span class=&quot;k&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;PaymentStrategyMethod&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;methodToPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
		&lt;span class=&quot;nx&quot;&gt;methodToPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;getTotalCart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
	&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Afin d‚Äôutiliser tout √ßa on pourrait imaginer un s√©lecteur lorsque l‚Äôon passe √† l‚Äô√©tape du paiement qui permettrait de s√©lectionner son moyen de paiement pr√©f√©r√©.&lt;/p&gt;

&lt;p&gt;exemple :&lt;/p&gt;

&lt;div class=&quot;language-typescript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nx&quot;&gt;cart&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Cart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;199&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;cart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;CreditCardStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// pour le premier cas&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;cart&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;doPay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;OtherPaymentStrategy&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// pour le second cas&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Le &lt;b&gt;Prototype&lt;/b&gt; qui permet de cr√©er de nouveaux objets √† partir d‚Äôobjets existants tout en laissant √† la classe le soin du type d‚Äôobjet √† cr√©er.&lt;/p&gt;

&lt;p&gt;La &lt;b&gt;Fabrique&lt;/b&gt; pour instancier des objets dans une classe m√®re tout en laissant aux sous classes le choix des types d‚Äôobjets √† cr√©er.&lt;/p&gt;

&lt;p&gt;L‚Äô &lt;b&gt;Object Pool&lt;/b&gt; pour √©conomiser le temps d‚Äôinstanciation et de suppression lorsque de nombreux objets ayant une vie courte seront utilis√©s.&lt;/p&gt;

&lt;h2 id=&quot;pour-finir&quot;&gt;Pour finir&lt;/h2&gt;

&lt;p&gt;Vous l‚Äôaurez compris, le Design Pattern fait partie int√©grante des outils indispensables du d√©veloppeur.&lt;br /&gt; 
Le but de cet article est de vous donner l‚Äôenvie de vous y int√©resser, de lire, de d√©couvrir et surtout d‚Äôapprendre √† savoir quand les utiliser afin de r√©pondre au mieux √† vos besoins.&lt;/p&gt;

&lt;p&gt;Attention toutefois √† ne pas tomber dans l‚Äôexact contraire, √† savoir, l‚Äôanti pattern.&lt;br /&gt;
Cela reviendrait √† faire le mauvais choix et donc √† apporter la mauvaise r√©ponse √† une probl√©matique donn√©e.&lt;/p&gt;

&lt;p&gt;Voici un exemple d√©velopp√© en Java par Maxime, il combine le Pattern Observer et Builder avec comme th√®me l‚Äôorganisation de course √† pied. &lt;br /&gt;
Lien du repos git : https://github.com/ekit3/design-pattern&lt;/p&gt;

&lt;p&gt;Sources ayant servie √† √©crire l‚Äôarticle et pour aller plus loin :&lt;/p&gt;

&lt;p&gt;https://fr.wikibooks.org/wiki/Patrons_de_conception
https://ryax.tech/fr/design-pattern-cest-quoi-et-pourquoi-lutiliser/
https://refactoring.guru/
https://madasamy.medium.com/introduction-to-object-oriented-design-patterns-part-i-4e5c7845015b&lt;/p&gt;</content><author><name>[&quot;laurent_duchaussoy&quot;]</name></author><category term="Other" /><summary type="html">L‚Äôart de savoir utiliser le bon outil au bon moment Les ‚ÄúDesign Patterns‚Äù, ou ‚Äúpatrons de conception‚Äù, sont un ensemble de solutions reconnues, particuli√®rement dans la programmation orient√©e objet, comme √©tant la meilleure r√©ponse afin de r√©soudre un probl√®me de conception r√©current. Les exemples de patrons peuvent √™tre faits de diff√©rentes fa√ßons: par le biais de sch√©mas, de pseudo code, la mani√®re d‚Äôorganiser ses modules ou classes ou √† l‚Äôaide d‚Äôune impl√©mentation propos√©e.</summary></entry><entry><title type="html">Les structures alg√©briques</title><link href="/articles/front-end/algebraic-structure/" rel="alternate" type="text/html" title="Les structures alg√©briques" /><published>2022-05-18T02:00:00-05:00</published><updated>2022-05-18T02:00:00-05:00</updated><id>/articles/front-end/algebraic-structure</id><content type="html" xml:base="/articles/front-end/algebraic-structure/">&lt;p&gt;Les premiers algorithmes ont √©t√© r√©alis√©s bien avant que le premier ordinateur ne soit conceptualis√©.&lt;br /&gt; 
Le tout premier algorithme connu a √©t√© √©crit en -300 avant notre √®re par Euclide (PGCD).&lt;br /&gt;
Aujourd‚Äôhui les math√©matiques font r√™ver, font peur et semblent parfois inaccessibles. Une chose est s√ªre, elles sont partout.&lt;br /&gt;
Comptables, d√©veloppeurs, boulangers ou m√™me politiques, tous utilisent les math√©matiques : le langage suit un ensemble de r√®gles math√©matiques.&lt;br /&gt;
Les structures du langage sont r√©alis√©es par l‚Äôapplication d‚Äôun arbre de la syntaxe abstraite.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les structures alg√©briques font partie des bases des math√©matiques. C‚Äôest un socle sur lequel de nombreuses r√®gles sont construites.&lt;br /&gt;
En particulier, pour r√©aliser des applications robustes, performantes et maintenables. Elles peuvent apporter une aide pr√©cieuse.&lt;/p&gt;

&lt;!--END_SUMMARY--&gt;

&lt;h4 id=&quot;d√©finition&quot;&gt;D√©finition:&lt;/h4&gt;

&lt;p&gt;Les structures alg√©briques sont un ensemble d‚Äôentit√©s bas√©es sur des axiomes initiaux √† partir desquels il est possible de d√©montrer un certain nombre de lois.&lt;br /&gt;
L‚Äôobjectif de ces structures est d‚Äôassurer, apr√®s avoir v√©rifi√© des axiomes simples, la d√©duction de lois dont il est possible de tirer des conclusions utiles.&lt;br /&gt;
Les premi√®res structures √† √©tudier, les plus simples, sont les magmas et les mono√Ødes.&lt;/p&gt;

&lt;h3 id=&quot;les-magmas&quot;&gt;Les magmas&lt;/h3&gt;

&lt;p&gt;Les magmas sont les fondations des structures alg√©briques, le premier niveau. Ils permettent de d√©finir le contexte.&lt;br /&gt;
Cependant, n‚Äôayant que tr√®s peu de contraintes, ils ne donnent pas la possibilit√© d‚Äôen d√©duire beaucoup de lois.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Recette miracle:&lt;/b&gt;&lt;br /&gt;
&lt;b&gt;Pour cr√©er un magma, il faut r√©unir un ensemble et une loi de composition interne.&lt;/b&gt;
&lt;br /&gt;&lt;br /&gt;
Un ensemble est constitu√© d‚Äô√©l√©ments en nombre fini ou non et peut √™tre constitu√© de diff√©rents types d‚Äô√©l√©ments.&lt;br /&gt;
Par exemple, l‚Äôunivers est un ensemble contenant des sous-ensembles de plan√®tes, d‚Äô√©toiles, de trou noirs, etc.&lt;/p&gt;

&lt;p&gt;Une loi de composition interne est une op√©ration entre deux √©l√©ments de l‚Äôensemble qui renvoie un √©l√©ment de ce m√™me ensemble.&lt;br /&gt;
L‚Äôop√©ration consistant √† m√©langer deux pots de peinture cr√©e un autre pot de peinture avec une couleur potentiellement diff√©rente.&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;CH&lt;/th&gt;
      &lt;th&gt;¬†&lt;/th&gt;
      &lt;th&gt;¬†&lt;/th&gt;
      &lt;th&gt;¬†&lt;/th&gt;
      &lt;th&gt;¬†&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;C056&lt;/td&gt;
      &lt;td&gt;B084&lt;/td&gt;
      &lt;td&gt;M083&lt;/td&gt;
      &lt;td&gt;C189&lt;/td&gt;
      &lt;td&gt;M356&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;Henri a 8 ans, adore les cailloux et ses amis (Charles, Bertrand et Marie), il est aussi un sp√©cialiste des math√©matiques.&lt;/p&gt;

&lt;p&gt;Henri poss√®de 5 cailloux et une mani√®re tr√®s sp√©ciale de les nommer. Cependant Henri ne donne pas de noms al√©atoires. Ses cailloux ont un nom relatif √† l‚Äôendroit et au jour o√π ils les trouvent.&lt;br /&gt;
Par exemple Henri a trouv√© C056 dans le jardin de son ami Charles, le 56√®me jour de l‚Äôann√©e.&lt;/p&gt;

&lt;p&gt;CH est un sous-ensemble d‚Äôun ensemble. Il est caract√©ris√© par la concat√©nation d‚Äôune lettre et d‚Äôune s√©rie de chiffres allant de 000 √† 365 ; appelons cet ensemble CPH (Cailloux potentiels d‚ÄôHenri).&lt;/p&gt;

&lt;p&gt;Henri est confront√© √† un probl√®me, il veut savoir quel est son caillou le plus fort. Il va donc pour cela cr√©er une op√©ration pour lui permettre de s‚Äôy retrouver.&lt;/p&gt;

&lt;p&gt;Voici en quoi consiste son op√©ration (selon ses propres mots) :&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Calculer le poids de chaque caillou.&lt;/li&gt;
  &lt;li&gt;Multiplier la position dans l‚Äôalphabet de la lettre par le num√©ro du jour de l‚Äôann√©e.
Comparer lequel est le plus gros, si les deux sont √©galit√©s le poids de la lettre l‚Äôemporte.&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Le r√©sultat de l‚Äôop√©ration d‚ÄôHenri a cr√©√© ce tableau :&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/algebraic-structure//img-1.jpg&quot; alt=&quot;image&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Henri ne le sait pas mais il vient de cr√©er un Magma sur l‚Äôensemble CH.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;L‚Äôapplication du plus fort Caillou v0.1.0&lt;/b&gt;&lt;/p&gt;
&lt;details&gt;
  &lt;p&gt;&lt;b&gt;Configuration requise:&lt;/b&gt;&lt;br /&gt;
Un magma, ne poss√©dant aucune autre propri√©t√© que celles susmentionn√©es, permet deux choses essentielles.&lt;/p&gt;
  &lt;ol&gt;
    &lt;li&gt;Contr√¥ler les limites des entr√©es&lt;/li&gt;
    &lt;li&gt;Mettre en pratique une analyse s√©quentielle via une op√©ration (LCI).&lt;/li&gt;
  &lt;/ol&gt;

  &lt;p&gt;Classiquement (sans savoir que c‚Äôest un magma) une simple analyse syntaxique sur une cha√Æne de caract√®re suffit :&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stronger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cailloux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputFormat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;[A-Z]([0-2][0-9][0-9]|3([0-5][0-9]|6[0-5]))&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ToIntFunction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cailloux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;is not a Caillou&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;isEmpty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
       &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
         &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyAsInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyAsInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;Ici les cailloux potentiels d‚ÄôHenri ont une forme tr√®s sp√©cifique. Voici le r√©sultat avec un magma :&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;char&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;365&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;is not a Caillou&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;65&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;is not a Caillou&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dayOfYear&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;strongest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;weight&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stronger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;a&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;strongest&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;b&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;),&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)));&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;henrisCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputList&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;stream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;Caillou:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;Caillou:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stronger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
  &lt;p&gt;&lt;b&gt;Le magma permet de d√©finir le cadre de travail :&lt;/b&gt;&lt;/p&gt;
&lt;/details&gt;
&lt;ul&gt;
  &lt;li&gt;Conna√Ætre l‚Äôensemble des √©l√©ments sur lesquels les actions sont r√©alis√©es.&lt;/li&gt;
  &lt;li&gt;Conna√Ætre l‚Äôop√©ration qui sera utilis√©e en s‚Äôassurant que le r√©sultat fait partie de l‚Äôensemble
Aucune autre conclusion ne peut √™tre d√©duite de ce cadre de travail. Il s‚Äôagit de structurer la pens√©e mais pour aller plus loin et faciliter les traitements, il est n√©cessaire de d√©finir un cadre l√©g√®rement plus contraint.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Aucune autre conclusion ne peut √™tre d√©duite de ce cadre de travail. Il s‚Äôagit de structurer la pens√©e mais pour aller plus loin et faciliter les traitements, il est n√©cessaire de d√©finir un cadre l√©g√®rement plus contraint.&lt;/p&gt;

&lt;h3 id=&quot;les-mono√Ødes&quot;&gt;Les mono√Ødes&lt;/h3&gt;

&lt;p&gt;Les mono√Ødes proviennent d‚Äôun terme allemand, mal-traduit, signifiant ‚ÄúIndividu‚Äù.&lt;br /&gt;
Les mono√Ødes sont, comme toutes les structures alg√©briques, des magmas respectant des axiomes suppl√©mentaires. Ces axiomes permettent de d√©montrer des propri√©t√©s qui peuvent s‚Äôav√©rer tr√®s utiles.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Recette miracle&lt;/b&gt;
&lt;b&gt;Pour cr√©er un mono√Øde nous avons besoin d‚Äôun magma unif√®re et associatif.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Unif√®re signifie que l‚Äôensemble contient un √©l√©ment neutre vis-√†-vis de l‚Äôop√©ration du magma. Cet √©l√©ment neutre n‚Äôimpacte pas le r√©sultat si on r√©alise l‚Äôop√©ration avec n‚Äôimporte quel √©l√©ment. &lt;code class=&quot;highlighter-rouge&quot;&gt;(n+0 = n et 0+m = m; 0 est un √©l√©ment neutre pour l‚Äôop√©ration '+' dans l‚Äôensemble des entiers)&lt;/code&gt;.&lt;br /&gt;
Associatif signifie qu‚Äôune cha√Æne d‚Äôop√©ration peut √™tre r√©alis√©e dans n‚Äôimporte quel ordre sans que le r√©sultat s‚Äôen trouve modifi√©. &lt;code class=&quot;highlighter-rouge&quot;&gt;(a+b+c = (a+b)+c = a+(b+c); la somme est associative)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Associatif signifie qu‚Äôune cha√Æne d‚Äôop√©ration peut √™tre r√©alis√©e dans n‚Äôimporte quel ordre sans que le r√©sultat s‚Äôen trouve modifi√©. &lt;code class=&quot;highlighter-rouge&quot;&gt;(a+b+c = (a+b)+c = a+(b+c); la somme est associative)&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Ces deux propri√©t√©s du mono√Øde permettent de d√©montrer une loi tr√®s int√©ressante pour les traitements informatiques : les calculs parall√®les. Sans faire la d√©monstration, un exemple permet de s‚Äôimaginer cette propri√©t√© en utilisant le mono√Øde pr√©c√©demment utilis√© : l‚Äôensemble des entiers munis de la somme.&lt;/p&gt;

&lt;p&gt;L‚Äôop√©ration consiste √† r√©aliser &lt;code class=&quot;highlighter-rouge&quot;&gt;1+2+3+4+5+6&lt;/code&gt;. L‚Äôassociativit√© permet de r√©aliser les op√©rations sous la forme &lt;code class=&quot;highlighter-rouge&quot;&gt;(1+2)+(3+4)+(5+6) = 3+7+11 = 10+11 = 21&lt;/code&gt;. Pour r√©aliser les cinq op√©rations &lt;code class=&quot;highlighter-rouge&quot;&gt;(nombre de signes ‚Äò+‚Äô)&lt;/code&gt;, trois s√©ries de calculs ont √©t√© n√©cessaires &lt;code class=&quot;highlighter-rouge&quot;&gt;(nombre de '=')&lt;/code&gt; en parall√©lisant trois op√©rations dans la premi√®re √©tape. Cela est math√©matiquement permis uniquement dans le cadre du mono√Øde.&lt;/p&gt;

&lt;h3 id=&quot;exemple--le-mono√Øde-derri√®re-le-magma-dhenri&quot;&gt;Exemple : Le Mono√Øde derri√®re le Magma d‚ÄôHenri&lt;/h3&gt;

&lt;p&gt;Pr√©c√©demment, Henri a cr√©√© un magma, il a √©galement cr√©√© un mono√Øde sur l‚Äôensemble CPH (Cailloux potentiels d‚ÄôHenri).
Comment Henri a r√©ussi √† construire ce mono√Øde ?&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Associativit√©&lt;/b&gt;
Il faut d√©montrer l‚Äôassociativit√© de l‚Äôop√©ration stronger(), visuellement sur l‚Äôensemble CH on peut le voir (effet miroir) :&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/algebraic-structure//img-1.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Il s‚Äôagit d‚Äôappliquer ces v√©rifications sur l‚Äôensemble CPH. En math√©matiques il est cout√ªme de d√©montrer par formulation que tout √©l√©ment respecte l‚Äôassociativit√©. Na√Øvement c‚Äôest possible (un √©l√©ment √† la fois). Cet ensemble est pr√©sent dans 2 autres ensembles : L‚Äôalphabet et les chiffres allant de 0 √† 365.&lt;/p&gt;

&lt;p&gt;Il est possible de d√©composer et se placer dans un ensemble commun :&lt;/p&gt;

&lt;p&gt;Il existe une √©tape interm√©diaire : le calcul du poids. Le calcul du poids est un entiers allant de &lt;code class=&quot;highlighter-rouge&quot;&gt;0 √† 9 125 (25 (Z)  * 365)&lt;/code&gt; . Nous appliquons ensuite une comparaison au maximum. 
Cette √©tape interm√©diaire se place dans un sous-ensemble d‚Äôun ensemble tr√®s connu : les entiers naturels contenant 0. De plus, l‚Äôassociativit√© des extremums (calcul maximum et minimum) a √©t√© d√©montr√©e sur cet ensemble.&lt;/p&gt;

&lt;p&gt;&lt;ins&gt;Unif√®re&lt;/ins&gt;&lt;/p&gt;

&lt;p&gt;Il faut prouver l‚Äôexistence d‚Äô un √©l√©ment neutre. Selon les crit√®res d‚ÄôHenri le poids d‚Äôun cailloux est relatif √† sa position dans l‚Äôalphabet puis agr√©g√© au jour de l‚Äôann√©e o√π Henri l‚Äôa trouv√© (sauf exception en cas d‚Äô√©galit√© : la lettre l‚Äôemporte). Cela veut dire que le poids minimum qui est de 0 (repr√©sent√© par le cailloux potentiel d‚ÄôHenri A000) est le cailloux le plus faible possible dans cet ensemble. 0 √©tant le nombre le plus petit des entiers naturels contenant 0, cela fait de lui un √©l√©ment neutre dans le calcul du maximum :&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;highlighter-rouge&quot;&gt;Pour tout x dans N; tel que x &amp;gt;= 0 alors x&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Le classement est ing√©nieux, √† quoi peuvent servir ces axiomes ?&lt;/p&gt;

&lt;p&gt;L‚Äôassociativit√© permet de dire que peu importe le sens d‚Äôune op√©ration elle aura le m√™me r√©sultat. Si on l‚Äôapplique en premi√®re ou en derni√®re, rien ne change !&lt;br /&gt;
L‚Äô√©l√©ment neutre permet de mettre en place une forme d‚Äôinitialisation pour le cas o√π un jour Henri oublie de mettre le nom de tous ses cailloux dans son application par exemple.&lt;/p&gt;

&lt;p&gt;Henri aimerait vraiment que son application soit plus performante car il en a encore une centaine‚Ä¶. de milliers de cailloux √† traiter.
&lt;br /&gt;&lt;br /&gt;
&lt;b&gt;L‚Äôapplication du plus fort Caillou v0.1.1&lt;/b&gt;&lt;/p&gt;
&lt;details&gt;
  &lt;p&gt;L‚Äôassociativit√© permet de mettre en place du multi-threading.&lt;br /&gt;
L‚Äô√©l√©ment neutre a un r√¥le d‚Äôinitialisation/valeur par d√©faut.&lt;/p&gt;

  &lt;p&gt;Classiquement la mise en place d‚Äôune certaine parall√©lisation est enclin √† de nombreux doutes. Pour continuer l‚Äôexemple, il faut mettre ces doutes de c√¥t√©.&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;stronger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cailloux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputFormat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;[A-Z]([0-2][0-9][0-9]|3([0-5][0-9]|6[0-5]))&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;ToIntFunction&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;word&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;nc&quot;&gt;AtomicReference&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomicResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;AtomicReference&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;A000&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;pool&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;ForkJoinPool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;cailloux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;pool&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;execute&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(!&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;matches&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputFormat&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;IllegalArgumentException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;is not a Caillou&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomicResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;kt&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;charAt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;64&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Integer&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parseInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt;
                    &lt;span class=&quot;o&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;weightACaillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;weightResult&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyAsInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;letter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;applyAsInt&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;atomicResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;aCaillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;});&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;atomicResult&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Result : Y364
Time: 78 ms over 250000 iterations ; CPU usage (%): 4.438960808734625 %
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Avant : Y364
Time: 235 ms over 250000 iterations ; CPU usage (%): 4.438960808734625 %
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;p&gt;Voici le r√©sultat avec la r√©flexion sur les mono√Ødes :&lt;/p&gt;

  &lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;‚Ä¶&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;neutral&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;sc&quot;&gt;'A'&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;err&quot;&gt;‚Ä¶&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Optional&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;henrisCailloux&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;List&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputList&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputList&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parallelStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nl&quot;&gt;Caillou:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Caillou&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;neutral&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;nl&quot;&gt;Caillou:&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;stronger&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Result: Optional[Caillou[letter=Y, dayOfYear=364]]
Time: 8 ms over 250000 iterations ; CPU usage (%): 4.438960808734625 %
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;

  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;Avant : Optional[Caillou[letter=Y, dayOfYear=364]]
Time: 12 ms over 250000 iterations ; CPU usage (%): 4.438960808734625 %
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/details&gt;

&lt;p&gt;&lt;br /&gt;&lt;br /&gt;
Le mono√Øde permet d‚Äôapporter de nouvelles propri√©t√©s utiles pour une meilleure conception :&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Une cha√Æne d‚Äôop√©ration peut √™tre parall√©lis√©e en garantissant le r√©sultat&lt;/li&gt;
  &lt;li&gt;Une valeur par d√©faut peut √™tre utilis√©e pour √©viter les erreurs de traitement
Cette structure est la premi√®re √† apporter des propri√©t√©s utiles aux conceptions en informatique. Il en existe beaucoup d‚Äôautres, plus ou moins complexes √† identifier, pour obtenir divers avantages. Ainsi, en v√©rifiant des propri√©t√©s sur un ensemble et une op√©ration, il est possible de d√©duire de nombreuses lois qui facilitent ou optimisent les traitements.&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;ce-quon-doit-en-retenir&quot;&gt;Ce qu‚Äôon doit en retenir&lt;/h3&gt;

&lt;p&gt;Bien s√ªr il ne faut pas forc√©ment coder comme un grand math√©maticien avec son tableau rempli de formule (quoique en dehors des formules ?).&lt;br /&gt;
Comme l‚Äôa dit un grand sage ‚Äúapprendre √† coder via des structures et seulement des structures est un comportement √©litiste‚Äù.&lt;br /&gt;
Ce m√™me grand sage a dit qu‚Äôil est pr√©f√©rable d‚Äôapprendre √† les identifier.&lt;br /&gt;
Identifier leurs forces, leurs faiblesses, le contexte le plus ad√©quat √† leur utilisation. Une fois qu‚Äôon arrive √† les cerner, une porte s‚Äôouvre vers une autre mani√®re de d√©velopper des applications qualitatives.&lt;br /&gt;
La multitude de structures alg√©briques qui existent n‚Äôest pas expos√©e ici. Nous vous avons fait vivre les aventures d‚ÄôHenri pour ouvrir une perspective sur ce monde et dans l‚Äôespoir que vous puissiez vous y faire votre propre avis.&lt;br /&gt;
Sans les math√©matiques, tout est faisable, mais avec les math√©matiques, tout est structur√©.&lt;/p&gt;

&lt;h3 id=&quot;sources-&quot;&gt;Sources :&lt;/h3&gt;

&lt;ul&gt;
  &lt;li&gt;https://blog.derniercri.io/observons-une-premiere-structure-algebrique-appliquee-a-linformatique-le-monoide/&lt;/li&gt;
  &lt;li&gt;https://fr.wikipedia.org/wiki/Th%C3%A9orie_des_cat%C3%A9gories#Morphismes - Xavier Van de Woestyne&lt;/li&gt;
  &lt;li&gt;Thomas Haessl√© - Cours et discussions (https://oteku.github.io/)&lt;/li&gt;
  &lt;li&gt;Lambda Lille - conf√©rences (https://twitter.com/lambdalille)&lt;/li&gt;
  &lt;li&gt;https://www.youtube.com/watch?v=RaqlxOihGxw&amp;amp;list=PLNefH6S6myiMFlgsEIGHb8KZaLKE2eAZQ - micmaths&lt;/li&gt;
  &lt;li&gt;https://fr.wikipedia.org/wiki/Th%C3%A9orie_des_cat%C3%A9gories#Morphismes&lt;/li&gt;
  &lt;li&gt;https://fr.wikipedia.org/wiki/Structure_alg%C3%A9brique&lt;/li&gt;
&lt;/ul&gt;</content><author><name>[&quot;florian_barbet&quot;]</name></author><category term="Front-End" /><summary type="html">Les premiers algorithmes ont √©t√© r√©alis√©s bien avant que le premier ordinateur ne soit conceptualis√©. Le tout premier algorithme connu a √©t√© √©crit en -300 avant notre √®re par Euclide (PGCD). Aujourd‚Äôhui les math√©matiques font r√™ver, font peur et semblent parfois inaccessibles. Une chose est s√ªre, elles sont partout. Comptables, d√©veloppeurs, boulangers ou m√™me politiques, tous utilisent les math√©matiques : le langage suit un ensemble de r√®gles math√©matiques. Les structures du langage sont r√©alis√©es par l‚Äôapplication d‚Äôun arbre de la syntaxe abstraite. Les structures alg√©briques font partie des bases des math√©matiques. C‚Äôest un socle sur lequel de nombreuses r√®gles sont construites. En particulier, pour r√©aliser des applications robustes, performantes et maintenables. Elles peuvent apporter une aide pr√©cieuse.</summary></entry><entry><title type="html">Micro Front End</title><link href="/articles/front-end/micro-front-end/" rel="alternate" type="text/html" title="Micro Front End" /><published>2022-03-02T01:00:00-06:00</published><updated>2022-03-02T01:00:00-06:00</updated><id>/articles/front-end/micro-front-end</id><content type="html" xml:base="/articles/front-end/micro-front-end/">&lt;p&gt;Inspir√© par les architectures microservices Back-End, le principe du micro-front end se r√©sume en une agr√©gation de composants web ¬´ isol√©es ¬ª.&lt;br /&gt;
Voyez la page finale comme un puzzle o√π chaque morceau serait un composant MFE.
Ces composants peuvent √™tre une barre de navigation, un bouton ou tout simplement un texte. Cette d√©coupe apporte en quelque sorte de la ‚Äúlibert√©‚Äù.&lt;br /&gt;
Ce type d‚Äôarchitecture permet de choisir son framework Front, d‚Äô√™tre autonome sur sa livraison et de s√©parer les projets par √©quipes au lieu de travailler sur un monolith commun.
Le but du MFE est de simplifier la gestion, la maintenabilit√©, la conception et le d√©coupage des interfaces utilisateurs.&lt;br /&gt;
Garantir le bon fonctionnement de la page Web finale demandera de la rigueur et un travail commun.&lt;br /&gt;
Il existe une multitude de fa√ßon de faire du micro-front end notamment en utilisant des technologies HTML (Iframe) ou un agr√©gateur en Back End (type Node Js, Java etc..)‚Ä¶
&lt;!--END_SUMMARY--&gt;&lt;/p&gt;

&lt;h5 id=&quot;origine&quot;&gt;Origine&lt;/h5&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/micro-front-end//image_1.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Le terme est apparu dans les RADAR techniques de Thoughtworks en 2016 mais c‚Äôest en 2019 que les micro-front end commencent √† √©merger.&lt;/p&gt;

&lt;h4 id=&quot;thoughtworks--qui-sont-ils-&quot;&gt;Thoughtworks : qui sont-ils ?&lt;/h4&gt;

&lt;p&gt;C‚Äôest un organisme public qui se concentre sur la mise en place de concept technologique.&lt;br /&gt;
Ils mettent √† disposition la conception et participe √† la livraison de logiciels, d‚Äôoutils, ils proposent √©galement un service de conseil informatique.&lt;/p&gt;

&lt;h4 id=&quot;que-sest-il-pass√©-entre-lapparition-du-terme-et-sa-r√©elle-√©mergence-&quot;&gt;Que s‚Äôest-il pass√© entre l‚Äôapparition du terme et sa r√©elle √©mergence ?&lt;/h4&gt;

&lt;p&gt;Thoughtworks a mis √† disposition une recherche r√©alis√©e dans leurs √©quipes. Cette recherche porte sur la mise en place des micro-services au niveau de l‚ÄôUI. Thoughtworks a partag√© l‚Äô√©volution conceptuelle des micro-front end. En Novembre 2016, arrivent les premi√®res id√©es √† propos de ce type d‚Äôarchitecture (des id√©es mais aussi des POC et des phases d‚Äô√©valuation). &lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les ing√©nieurs de Thoughtworks pensent qu‚Äôil serait int√©ressant d‚Äôappliquer un syst√®me de micro-services au niveau de l‚ÄôUI afin d‚Äô√©viter les monolithes. Ils mettent en avant le fait que l‚Äôapproche BFF (back-for-front : couche permettant la communication entre le back-end et le front-end) en serait largement b√©n√©ficiaire.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;S‚Äôensuit une communication en Mai 2018 (lors de la phase d‚Äôessai), celle-ci nous informe que des √©quipes ont mis en place des structures monolithiques au niveau des services back. Ils font un petit rappel afin d‚Äôexpliquer l‚Äôobjectif des micro-front end : obtenir des composants/pages isol√©s et ind√©pendants les uns des autres et qui appartiennent √† diff√©rentes √©quipes.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;En Avril 2019 d√©bute la phase d‚Äô√©mergence, √† ce stade, Thoughtworks pense que la mise en place des micro-front end repr√©sente un b√©n√©fice certain pour les √©quipes de d√©veloppement. A partir de ce moment ils commencent √† informer et √† conseiller sur les impl√©mentations li√©es aux micro-front end.&lt;/p&gt;

&lt;h4 id=&quot;et-si-jai-rien-compris--petit-r√©sum√©&quot;&gt;‚ÄúEt si j‚Äôai rien compris ?‚Äù: Petit R√©sum√©&lt;/h4&gt;

&lt;p&gt;Le processus li√© √† ce concept, dans un format de type release/actualisation semble venir de la frustration de certaines √©quipes vis-√†-vis des monolithes.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Les ‚Äúassessments‚Äù donne pour d√©finition des structures monolithiques Front : ¬´ large and sprawling browser applications that are as difficult to maintain and evolve as the monolithic server-side applications we‚Äôve abandoned ¬ª&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Soit en fran√ßais : ¬´ Des applications ‚Äúnavigateurs‚Äù volumineuses et entrem√™l√©es √©tant aussi difficiles √† maintenir et √† faire √©voluer que des applications back monolithiques d√©j√†  abandonn√©es. ¬ª&lt;br /&gt;&lt;/p&gt;

&lt;h4 id=&quot;mise-en-place&quot;&gt;Mise en place&lt;/h4&gt;

&lt;h5 id=&quot;--la-gouvernance&quot;&gt;- La Gouvernance&lt;/h5&gt;

&lt;p&gt;La gouvernance est un √©l√©ment indispensable lors de l‚Äôinitialisation d‚Äôun projet micro-front end. La libert√© provenant de ce type d‚Äôarchitecture est √† double tranchant. Une plus grande libert√© permet de r√©aliser plus facilement un ensemble de t√¢ches mais c‚Äôest aussi un moyen de surcharger votre application.&lt;/p&gt;

&lt;p&gt;Voici 3 axes de r√©flexions afin de mieux comprendre la probl√©matique :&lt;/p&gt;

&lt;h5 id=&quot;--le-premier--d√©terminer-le-scope&quot;&gt;- Le premier : d√©terminer le scope&lt;/h5&gt;

&lt;p&gt;R√©fl√©chissez √† la taille de vos composants (comme ce qui est fait pour les briques dans un mod√®le microservice en back-end). Cela permet ainsi de r√©fl√©chir √† la taille de vos √©quipes et le nombre de ressources √† mobiliser. (Votre budget vous remerciera.)&lt;/p&gt;

&lt;h5 id=&quot;--le-second--il-en-faut-un-pour-les-gouverner-tous&quot;&gt;- Le second : il en faut un pour les gouverner tous.&lt;/h5&gt;

&lt;p&gt;L‚Äôind√©pendance des composants peut faire perdre de vue l‚Äôobjectif commun: la r√©alisation d‚Äôune interface graphique pour une application. Cette application a des attentes en termes d‚Äôobjectifs, de performances, ou encore d‚Äôimage (marketing etc‚Ä¶).&lt;br /&gt;
Il faut, par exemple, veiller √† avoir une √©quipe responsable du partage de la connaissance et de la culture afin de ne pas diviser ‚Äúpour mieux r√©gner‚Äù mais plut√¥t de ‚Äúr√©unir pour mieux r√©ussir‚Äù. Il est √©galement important d‚Äôimaginer la mise en place de tests d‚Äôint√©grations globaux au niveau du plus haut parent de la famille des composants.&lt;br /&gt;
(Imaginez une application dont chaque composant poss√®de sa propre charte graphique fa√ßon sapin de no√´l..)&lt;/p&gt;

&lt;p&gt;Une solution commune dite ‚ÄúCore‚Äù se mat√©rialise par une √©quipe g√©rant le noyau du site, elle r√©git les librairies de bases, la cr√©ation, la gestion des outils (e.g.. Eventbus), la charte graphique etc.&lt;br /&gt;
Les composants ‚Äúenfants‚Äù h√©riteront de tout ce qui aura √©t√© pr√©vu et partag√© par le noyau applicatif.&lt;/p&gt;

&lt;h5 id=&quot;--la-troisi√®me--comment-bien-s√©quiper-pour-la-performance-&quot;&gt;- La troisi√®me : comment bien s‚Äô√©quiper pour la performance ?&lt;/h5&gt;

&lt;p&gt;Il faut distinguer deux aspects lorsque l‚Äôon pense √† la qualit√© des MFE : la performance de chacun d‚Äôentre eux mais √©galement du site global en termes d‚Äôaffichage et de rendu.
Avoir de multiples composants, c‚Äôest accepter d‚Äôavoir un possible laps de temps au moment de la cr√©ation/initialisation de chacun.&lt;br /&gt;
Il faut √©galement penser au d√©marrage et √† l‚Äôint√©gration de nouveaux MFE dans l‚Äôarchitecture globale, que ce soit en termes de coh√©rence, de qualit√© de code, de s√©curit√©, de cha√Æne d‚Äôint√©gration et de d√©ploiement.&lt;br /&gt;
Pour √©viter cela, il faut mettre en relation des experts techniques (architectes, leader, etc.) capables de trouver des solutions performantes et de partager les bonnes pratiques √† tous ces diff√©rents niveaux.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Point d‚Äôattention : le runtime&lt;/b&gt;&lt;br /&gt;
Plus il y a de frameworks, plus il y aura de runtimes et donc plus de risques que le poids de la page soit augment√© et sa performance d√©grad√©e.&lt;br /&gt;
Il faudra limiter la diversit√© des frameworks utilis√©s.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/micro-front-end//image_2.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Ce graphique montre la consommation en runtime pour chaque build avec le runtime Svelte. On d√©note qu‚Äôavec √† peine 10 composants on consomme moins qu‚Äôun Angular pour ne citer que lui.&lt;/p&gt;

&lt;h5 id=&quot;que-doit-on-retenir-&quot;&gt;Que doit-on retenir ?&lt;/h5&gt;

&lt;p&gt;Pour r√©sumer en un seul mot :  ‚ÄúCommuniquez !‚Äù&lt;br /&gt;
L‚Äôind√©pendance apport√©e par les MFE peut desservir, chaque √©quipe faisant ses composants de mani√®re ‚Äúisol√©e‚Äù, si personne ne s‚Äôassure de la coh√©rence globale cela peut rapidement devenir n√©faste.&lt;br /&gt;
Sans communication et gouvernance, la page finale peut vite se retrouver alourdie (du au fait d‚Äôun ensemble de technologies m√©lang√©es et de la multiplicit√© des frameworks utilis√©s) ou chart√©e de fa√ßon bien diff√©rente et donc perdre de la coh√©rence (notamment via le design).&lt;br /&gt;
Tous ces risques peuvent vite amener √† regretter les monolithes.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Sch√©ma d‚Äôarchi&lt;br /&gt;&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Voici un exemple qui sch√©matise une architecture micro front avec trois MFE.
Chaque composant est d√©velopp√© avec une techno diff√©rente (Vue, Angular, React) et g√©r√© par une √©quipe sp√©cifique, poss√©dant ses outils de CI/CD, de tests, etc.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/articles/front-end/micro-front-end//image_3.jpg&quot; alt=&quot;image&quot; /&gt;&lt;br /&gt;&lt;/p&gt;

&lt;h5 id=&quot;framework-technos-et-outils&quot;&gt;Framework, technos et outils&lt;/h5&gt;

&lt;p&gt;Une pluralit√© de frameworks qui vont vous faciliter le d√©veloppement des micro frontend est disponible : chacun a sa propre philosophie dans la mani√®re d‚Äôaborder les concepts li√©s aux micro frontend.&lt;br /&gt;
Parmi les plus connus on peut citer Single-spa, Bit, Qiankun, Open components ‚Ä¶&lt;/p&gt;

&lt;h5 id=&quot;proscons&quot;&gt;Pros/Cons&lt;/h5&gt;
&lt;p&gt;De grandes entreprises ont choisi de se lancer dans les micro frontend, comme IKEA sur son magasin en ligne, Spotify avec son application desktop ou encore Leroy Merlin avec son site Web et Kobi.&lt;br /&gt;&lt;/p&gt;

&lt;p&gt;Pour chacune de ces applications, des b√©n√©fices se sont rapidement fait sentir, par exemple √† travers leur vie dans les diff√©rentes plateformes, √† travers l‚Äôexp√©rience de l‚Äôutilisateur ou encore sur une meilleure r√©alisation des d√©veloppements gr√¢ce √† des √©quipes plus r√©duite mais concentr√©es sur une seule feature.&lt;/p&gt;

&lt;p&gt;&lt;b&gt;Les avantages et inconv√©nients des MFE sont fortement li√©s.&lt;/b&gt;&lt;/p&gt;

&lt;p&gt;Le d√©coupage du code&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;Pros&lt;/b&gt; : plus simple, plus l√©ger, c‚Äôest un vrai bonus de lisibilit√© et de maintenabilit√©.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Cons&lt;/b&gt; : m√™me si la compr√©hension unitaire des composants est plus simple, la complexit√© globale de l‚Äôapplication peut en revanche √™tre plus floue.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;La libert√© des choix technologiques&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;Pros&lt;/b&gt; : plus de technologies disponibles implique plus de possibilit√©s.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Cons&lt;/b&gt; : cela peut induire des probl√®mes de performances, de compatibilit√© voire de maintenabilit√©.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;L‚Äôind√©pendance et l‚Äôautonomie des √©quipes&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;Pros&lt;/b&gt; : cet aspect am√©liore les conditions et la qualit√© de d√©veloppement.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Cons&lt;/b&gt; : la relation inter-√©quipes ne doit pas √™tre n√©glig√©e. Le risque √©tant de s‚Äô√©loigner de l‚Äôobjectif principal, d‚Äôavoir des demandes de refontes (e.g : ne correspond pas √† l‚Äôattente des composants consommateurs) et m√™me des migrations d‚Äôoutils.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;L‚Äôind√©pendance des livraisons&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;b&gt;Pros&lt;/b&gt; : le choix des outils d‚Äôint√©gration et de d√©ploiement continue est possible. Cela permet de livrer uniquement certaines parties de l‚Äôapplication.&lt;/li&gt;
  &lt;li&gt;&lt;b&gt;Cons&lt;/b&gt; : mais cela implique une gestion de la qualit√©, du release management ou software delivery global plus complexe √† mettre en place.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Il est n√©cessaire de mettre en place une gouvernance forte pour garantir une coh√©rence dans les choix pris lors du d√©veloppement des diff√©rents composants. (Objectif : assurer une qualit√© et maintenabilit√© globale).&lt;/p&gt;

&lt;p&gt;Links : https://www.infoq.com/news/2019/04/real-world-framework-benchmark/&lt;/p&gt;</content><author><name>[&quot;yohann_gueguin&quot;, &quot;florian_barbet&quot;, &quot;laurent_duchaussoy&quot;]</name></author><category term="Front-End" /><summary type="html">Inspir√© par les architectures microservices Back-End, le principe du micro-front end se r√©sume en une agr√©gation de composants web ¬´ isol√©es ¬ª. Voyez la page finale comme un puzzle o√π chaque morceau serait un composant MFE. Ces composants peuvent √™tre une barre de navigation, un bouton ou tout simplement un texte. Cette d√©coupe apporte en quelque sorte de la ‚Äúlibert√©‚Äù. Ce type d‚Äôarchitecture permet de choisir son framework Front, d‚Äô√™tre autonome sur sa livraison et de s√©parer les projets par √©quipes au lieu de travailler sur un monolith commun. Le but du MFE est de simplifier la gestion, la maintenabilit√©, la conception et le d√©coupage des interfaces utilisateurs. Garantir le bon fonctionnement de la page Web finale demandera de la rigueur et un travail commun. Il existe une multitude de fa√ßon de faire du micro-front end notamment en utilisant des technologies HTML (Iframe) ou un agr√©gateur en Back End (type Node Js, Java etc..)‚Ä¶</summary></entry></feed>