
<!doctype html>
<html>
    <head>
        <meta name="theme-color" content="#000000"/>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Feature Flipping</title>
        <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/assets/css/select2.min.css" />
        <link type="application/atom+xml" rel="alternate" href="http://0.0.0.0:4000/feed.xml" title="Bienvenue sur le Blog d'Ekite" />
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="/css/main.css" />
        <link rel="icon" href="/assets/images/favicon.png" href="logo.png" />
        <link rel="manifest" href="/manifest.webmanifest">
        
            <script
  async
  src="https://www.googletagmanager.com/gtag/js?id=G-D332437KRM"
></script>
<script>

    window.dataLayer = window.dataLayer || [];
    function gtag() {
        dataLayer.push(arguments);
    }

    var tagAnalyticsCNIL = {};

    tagAnalyticsCNIL.CookieConsent = (function () {
    var gaProperty = "G-D332437KRM";
    // D√©sactive le tracking si le cookie d‚ÄôOpt-out existe d√©j√†.
    var disableStr = `ga-disable-${gaProperty}`;
    var firstCall = false;
    var domaineName = "";

    //Cette fonction retourne la date d‚Äôexpiration du cookie de consentement

    function getCookieExpireDate() {
        var cookieTimeout = 33696000000; // Le nombre de millisecondes que font 13 mois
        var date = new Date();
        date.setTime(date.getTime() + cookieTimeout);
        var expires = "; expires=" + date.toGMTString();
        return expires;
    }

    function getDomainName() {
        if (domaineName != "") {
            return domaineName;
        } else {
            var hostname = document.location.hostname;
            if (hostname.indexOf("www.") === 0) hostname = hostname.substring(4);
            return hostname;
        }
    }

    //Cette fonction d√©finie le p√©rim√©tre du consentement ou de l'opposition  (en fonction du domaine)
    //Par d√©faut nous consid√©rons que le domaine est tout ce qu'il y'a apr√©s  "www"
    function getCookieDomainName() {
        var hostname = getDomainName();
        var domain = "domain=" + "." + hostname;
        return domain;
    }

    //Cette fonction v√©rifie si on  a d√©j√† obtenu le consentement de la personne qui visite le site
    function checkFirstVisit() {
        var consentCookie = getCookie("hasConsent");
        if (!consentCookie) return true;
    }

    function showBanner() {
        var bodytag = document.getElementsByTagName("body")[0];
        var div = document.createElement("div");
        div.setAttribute('id','cookie-banner');
        div.style.width = window.innerWidth + "px";
        div.style.height = window.innerHeight + "px";
        div.style.position = "fixed";
        div.style.zIndex = "100000";
        div.style.backgroundColor = "#11111190"
        div.innerHTML = `
                <div style="width: 300px; 1px solid #2F343A; border-radius: 5px; background-color: #f1f1f1; repeat scroll 0% 0% white; padding :10px 10px;text-align:center; position: fixed; top:30px; left:50%; margin-top:0px; margin-left:-150px; z-index:100000; id="inform-and-consent">
                    <div>
                        <span><b>Ce site utilise Google Analytics</b></span><br/><br/>
                        En continuant √† naviguer, vous nous autorisez √† d√©poser un cookie √† des fins de mesure d'audience.
                    </div>
                    <div style="padding :20px;text-align:center;">
                    <button 
                        style="margin-right:50px;"
                        class="btn btn-light"
                        name="Refuser"
                        onclick="tagAnalyticsCNIL.CookieConsent.gaOptout();tagAnalyticsCNIL.CookieConsent.hideInform();"
                        id="optout-button">
                        Refuser
                    </button>
                    <button
                        id="accept-ga"
                        name="Valider"
                        class="btn btn-success"
                        onclick="tagAnalyticsCNIL.CookieConsent.hideInform()">
                        Accepter
                    </button>
                    </div>
                </div>
            `;
      bodytag.insertBefore(div, bodytag.firstChild);
    }

    // Fonction utile pour r√©cup√©rer un cookie a partire de son nom
    function getCookie(NameOfCookie) {
        if (document.cookie.length > 0) {
            begin = document.cookie.indexOf(NameOfCookie + "=");
            if (begin != -1) {
            begin += NameOfCookie.length + 1;
            end = document.cookie.indexOf(";", begin);
            if (end == -1) end = document.cookie.length;
            return unescape(document.cookie.substring(begin, end));
            }
        }
        return null;
    }

    //R√©cup√®re la version d'Internet Explorer, si c'est un autre navigateur la fonction renvoie -1
    function getInternetExplorerVersion() {
        var rv = -1;
        if (navigator.appName == "Microsoft Internet Explorer") {
            var ua = navigator.userAgent;
            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null) rv = parseFloat(RegExp.$1);
        } else if (navigator.appName == "Netscape") {
            var ua = navigator.userAgent;
            var re = new RegExp("Trident/.*rv:([0-9]{1,}[\.0-9]{0,})");
            if (re.exec(ua) != null) rv = parseFloat(RegExp.$1);
        }
        return rv;
    }

    //Effectue une demande de confirmation de DNT pour les utilisateurs d'IE
    function askDNTConfirmation() {
        var r = confirm(
            "La signal DoNotTrack de votre navigateur est activ√©, confirmez vous activer la fonction DoNotTrack?"
        );
        return r;
    }

    //V√©rifie la valeur de navigator.DoNotTrack pour savoir si le signal est activ√© et est √† 1
    function notToTrack() {
        if (
            (navigator.doNotTrack &&
            (navigator.doNotTrack == "yes" || navigator.doNotTrack == "1")) ||
            (navigator.msDoNotTrack && navigator.msDoNotTrack == "1")
        ) {
            var isIE = getInternetExplorerVersion() != -1;
            if (!isIE) {
            return true;
            } else {
            return askDNTConfirmation();
            }
            return false;
        }
    }

    //Si le signal est √† 0 on consid√©re que le consentement a d√©j√† √©t√© obtenu
    function isToTrack() {
      if (
        navigator.doNotTrack &&
        (navigator.doNotTrack == "no" || navigator.doNotTrack == 0)
      ) {
        return true;
      }
    }

    // Fonction d'effacement des cookies
    function delCookie(name) {
      var path = ";path=" + "/";

      var expiration = "Thu, 01-Jan-1970 00:00:01 GMT";
      document.cookie = `${name}=${path} ; ${getCookieDomainName()} ;expires=${expiration}`;
    }

    // Efface tous les types de cookies utilis√©s par Google Analytics
    function deleteAnalyticsCookies() {
      var cookieNames = ["__utma", "__utmb", "__utmc", "__utmz", "_ga", "_gat"];
      for (var i = 0; i < cookieNames.length; i++) delCookie(cookieNames[i]);
    }

    function isClickOnOptOut(evt) {
      // Si le noeud parent ou le noeud parent du parent est la banni√©re, on ignore le clic
      return (
        evt.target.parentNode.id == "cookie-banner" ||
        evt.target.parentNode.parentNode.id == "cookie-banner" ||
        evt.target.id == "optout-button"
      );
    }

    function consent(evt) {
      if (!isClickOnOptOut(evt)) {
        // On v√©rifie qu'il ne s'agit pas d'un clic sur la banni√©re
        if (!clickprocessed) {
         evt.preventDefault();
         closeModalAfterClickProcessed();
        }
      }
      if(evt.target.id === 'accept-ga'){
        evt.preventDefault();
          document.cookie = `hasConsent=true ${getCookieExpireDate()} ${getCookieDomainName()} path=/`;
          callGoogleAnalytics();
          closeModalAfterClickProcessed();
        }
    }

    function closeModalAfterClickProcessed(){
        clickprocessed = true;
        window.setTimeout(function () {
        evt.target.click();
        }, 1000);
        tagAnalyticsCNIL.CookieConsent.hideInform();
    }

    // Tag Google Analytics, cette version est avec le tag Universal Analytics
    function callGoogleAnalytics() {
        if (firstCall) return;
        else firstCall = true;

        gtag("js", new Date());
        gtag("config", gaProperty);

        (function (i, s, o, g, r, a, m) {
            i["GoogleAnalyticsObject"] = r;
            (i[r] =
            i[r] ||
            function () {
                (i[r].q = i[r].q || []).push(arguments);
            }),
            (i[r].l = 1 * new Date());
            (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m);
        })(
            window,
            document,
            "script",
            "//www.google-analytics.com/analytics.js",
            "ga"
        );
        ga("create", gaProperty, "auto"); // Replace with your property ID.
        ga("send", "pageview", "/articles/architecture/feature-flipping/");
    }

    return {
        // La fonction d'opt-out
        gaOptout: function () {
            document.cookie = `${disableStr}=true ${getCookieExpireDate()} ${getCookieDomainName()} path=/`;
            document.cookie = `hasConsent=false ${getCookieExpireDate()} ${getCookieDomainName()} path=/`;
            var div = document.getElementById("cookie-banner");
            // on consid√®re que le site a √©t√© visit√©
            clickprocessed = true;
            // Ci dessous le code de la banni√®re affich√©e une fois que l'utilisateur s'est oppos√© au d√©pot
            // Vous pouvez modifier le contenu et le style
            if (div != null)
            div.innerHTML =
                '<div style="background-color:#fff;text-align:center;padding:5px;font-size:12px;border-bottom:1px solid #eeeeee;" id="cookie-message"> Vous vous √™tes oppos√© \
                au d√©p√¥t de cookies de mesures d\'audience dans votre navigateur </div>';
            window[disableStr] = true;
            deleteAnalyticsCookies();
        },

        hideInform: function () {
            var div = document.getElementById("cookie-banner");
            div.style.display = "none";
        },

        start: function () {
            //Ce bout de code v√©rifie que le consentement n'a pas d√©j√† √©t√© obtenu avant d'afficher
            // la banni√®re
            var consentCookie = getCookie("hasConsent");
            clickprocessed = false;
            if (!consentCookie) {
            //L'utilisateur n'a pas encore de cookie, on affiche la banni√©re et si il clique sur un autre √©l√©ment que la banni√©re, on enregistre le consentement
            if (notToTrack()) {
                //L'utilisateur a activ√© DoNotTrack. Do not ask for consent and just opt him out
                tagAnalyticsCNIL.CookieConsent.gaOptout();
            } else {
                if (isToTrack()) {
                //DNT is set to 0, no need to ask for consent just set cookies
                consent();
                } else {
                if (window.addEventListener) {
                    // See note https://github.com/CNILlab/Cookie-consent_Google-Analytics/commit/e323b3be2c4a4d05300e35cdc11102841abdcbc9
                    // Standard browsers
                    window.addEventListener("load", showBanner, false);
                    document.addEventListener("click", consent, false);
                } else {
                    window.attachEvent("onload", showBanner);
                    document.attachEvent("onclick", consent);
                }
                }
            }
            } else {
            if (document.cookie.indexOf("hasConsent=false") > -1)
                window[disableStr] = true;
            else callGoogleAnalytics();
            }
        },
    };
  })();

  tagAnalyticsCNIL.CookieConsent.start();
</script>

        
    </head>
    <body>
        <nav class="header">
    <a class="ekite" href="https://www.ekit3.com/" target="_blank"><img alt="logo Ekite" src="/assets/images/logo-ekite.png"></a>
    <a class="link" href="/"><span class="material-icons">roofing</span><span class="a-title">Accueil</span></a>
    <!--<a class="link" href="/pageTest"><span class="material-icons">star_border</span>Page test</a>-->
    <div class="search">
        <select class="search-article">
            <option></option>
            
                <optgroup label="Front-End">
                
                    <option value="/articles/front-end/web-assembly/">Web Assembly</option>
                
                    <option value="/articles/front-end/algebraic-structure/">Les structures alg√©briques</option>
                
                    <option value="/articles/front-end/micro-front-end/">Micro Front End</option>
                
                    <option value="/articles/front-end/pwa-innovation-or-consolation/">PWA : Innovation ou solution de consolation ?</option>
                
            </optgroup>
            
                <optgroup label="Testing">
                
                    <option value="/articles/testing/mutation-testing/">Mutation testing</option>
                
            </optgroup>
            
                <optgroup label="Green-IT">
                
                    <option value="/articles/green-it/eco-conception/">Eco Conception</option>
                
            </optgroup>
            
                <optgroup label="Other">
                
                    <option value="/articles/other/design-pattern/">Design Pattern</option>
                
            </optgroup>
            
                <optgroup label="Devops">
                
                    <option value="/articles/devops/direnv-pour-votre-shell/">direnv pour booster votre shell</option>
                
                    <option value="/articles/devops/skaffold-et-minikube/">Ex√©cuter une application localement sur minikube avec skaffold</option>
                
            </optgroup>
            
                <optgroup label="Common">
                
                    <option value="/articles/common/mkdocs-material/">Cr√©er un site web de documentation statique avec MkDocs</option>
                
                    <option value="/articles/common/abstract-data-types/">Abstract Data Types</option>
                
            </optgroup>
            
                <optgroup label="Architecture">
                
                    <option value="/articles/architecture/feature-flipping/">Feature Flipping</option>
                
                    <option value="/articles/architecture/kafka/">Kafka</option>
                
            </optgroup>
            
        </select>
    </div>
</nav>

        <main class="page-content" aria-label="Content">
            
  <div class="posts single">
    <button type="button" class="btn btn-dark btn-return" onclick="goBackHistory()">Retour</button>
    <article>
      <h2>Feature Flipping</h2>
      <div class="post-header">
          <span>Ecrit par</span>


    
    
         <a href="">Yohann Gueguin</a>,
    

    
    
         <a href="">Maxime Montagne</a>,
    

    
    
         <a href="">Jean Dusenne</a>,
    


          <span>Publi√© le 27 Jul 2023</span>
      </div>
      <div class="extract">
          <span></span><h5 id="introduction">Introduction</h5>

<p>Ici nous allons parler de Feature Flipping, (que vous pouvez aussi connaitre sous le nom de Feature Toggles, Feature Switches, Feature Flag et bien d‚Äôautres encore), qui a pour principe de donner la possibilit√© de contr√¥ler l‚Äôacc√®s √† des fonctionnalit√©s de vos applications.</p>

<p>Cette technique devient pertinente lorsque que par exemple, nous voulons mettre en place des fonctionnalit√©s destin√©es √† un public cible (beta user, premium user ‚Ä¶), que nous souhaitons avoir plus de contr√¥le sur l‚Äôensemble des services propos√©s par une application (possibilit√© de d√©sactiver telle ou telle fonctionnalit√© pour maintenance, √©volution, correctifs).</p>

<p>Cette m√©thodologie peut √™tre impl√©ment√©e dans diff√©rents langage et de mani√®re diff√©rente, cela va √™tre √† vous de choisir ce qui correspond le mieux √† votre besoin. 
Il existe d√©j√† des librairies, des Frameworks, et m√™me des solutions SaaS pour r√©pondre √† ce besoin.</p>

<p><img src="/articles/architecture/feature-flipping//intro.jpg" alt="image" /> <br />
<!--END_SUMMARY--></p>

<h2 id="quel-int√©r√™t-pour-la-technique-">Quel int√©r√™t pour la technique ?</h2>

<h3 id="cycle-de-vie-de-livraison-dapplication">Cycle de vie de livraison d‚Äôapplication</h3>

<p>Le Feature Flipping apporte beaucoup de souplesse dans le cycle de vie d‚Äôune application et ce √† plusieurs niveaux.</p>

<p>D‚Äôabord l‚Äô√©quipe de d√©veloppement va pouvoir d√©sactiver tout ou partie du code source d‚Äôune ou de plusieurs features. Une feature non finalis√©e ou qu‚Äôon ne souhaite pas activer ne bloquera pas le d√©ploiement d‚Äôune release compl√®te. Ce qui ajoute √©norm√©ment de libert√© √† l‚Äô√©quipe de d√©veloppement dans ses r√©alisations.</p>

<p>Ces features pourront √™tre activ√©es dans un second temps et n‚Äôemp√™chent donc pas le bon fonctionnement du processus de d√©ploiement continu d‚Äôune application.</p>

<h3 id="graceful-degradation--progressive-enhancement--fr-d√©gradation-gracieuse--am√©lioration-progressive">Graceful degradation &amp; Progressive enhancement ( fr: D√©gradation gracieuse &amp; Am√©lioration progressive)</h3>

<p>Cela permet aussi, lorsqu‚Äôon identifie un probl√®me sur une fonctionnalit√©, de pouvoir la d√©sactiver sans avoir besoin de d√©ployer une nouvelle release. L‚Äôactivation et la d√©sactivation d‚Äôune feature peut se faire distinctement du d√©ploiement d‚Äôune release. Imaginons que votre parcours de vente soit compl√©tement bloqu√© √† cause d‚Äôune √©tape facultative, la d√©sactiver rendra le service √† vos utilisateurs</p>

<p>On peut √©galement faire du d√©ploiement ‚Äúprogressif‚Äù de fonctionnalit√©s. C‚Äôest √† dire, n‚Äôautoriser l‚Äôacc√®s qu‚Äô√† une poign√©e d‚Äôutilisateurs de l‚Äôapplication. Ainsi, cela permet √† l‚Äô√©quipe de s‚Äôassurer de la pertinence d‚Äôune fonctionnalit√© avant un d√©ploiement complet √† l‚Äôensemble des utilisateurs, et aussi potentiellement d√©tecter des anomalies niveau applicatif ou infrastructure, qui n‚Äôavaient pas √©t√© anticip√©es.</p>

<h2 id="quel-int√©r√™t-pour-le-m√©tier-">Quel int√©r√™t pour le M√©tier ?</h2>

<h3 id="tests-ab">Tests A/B</h3>

<p>Dans l‚Äôagilit√©, nous parlons souvent du principe de l‚Äôempirisme. Ce principe se r√©sume grosso-modo √† l‚Äôapprentissage par l‚Äôexp√©rience. L‚ÄôA/B testing en est un bel exemple. Il permet de proposer des parcours diff√©rents de fa√ßon al√©atoire afin de r√©colter des datas sur l‚Äôutilisation de l‚Äôapplication, et donc, de comprendre comment les utilisateurs l‚Äôutilisent en r√©alit√©.</p>

<p>La mise en place de campagnes de test ‚ÄúA/B testing‚Äù est simple √† comprendre, il permet de donner l‚Äôacc√®s √† diff√©rents parcours utilisateurs sur une m√™me fonctionnalit√© ou encore de modifier graphiquement l‚Äôapplication pour avoir diff√©rents retours selon son utilisation. Ainsi, gr√¢ce aux donn√©es r√©colt√©es lors des campagnes de test, nous allons pouvoir valider une ou plusieurs hypoth√®ses sur l‚Äôutilisation d‚Äôune ou de plusieurs fonctionnalit√©s.</p>

<p>Nous avons donc appris par l‚Äôexp√©rience des utilisateurs que l‚Äôapplication devra s‚Äôorienter vers la version d√©finitive d‚Äôune fonctionnalit√© qui correspond mieux aux besoins utilisateurs.</p>

<h3 id="fonctionnalit√©s-temporaires--payantes">Fonctionnalit√©s temporaires &amp; Payantes</h3>

<p>Le feature flipping permet √©galement de pouvoir activer des fonctionnalit√©s uniquement lors de p√©riodes sp√©cifiques. Comme par exemple, un jeu ou un affichage sp√©cifique pour la p√©riode de No√´l, qu‚Äôon pourra d√©sactiver une fois les f√™tes termin√©es. 
Des modules activ√©s uniquement en p√©riode de soldes, ou m√™me des campagnes r√©serv√©es aux premiers utilisateurs qui acc√©derons a la fonctionnalit√©. 
On peut √©galement rapidement mettre en place un syst√®me pour g√©rer des fonctionnalit√©s payantes de la m√™me mani√®re que pour les features temporaire, juste en changeant les crit√®res de s√©lection.</p>

<h2 id="comment-impl√©menter">Comment impl√©menter</h2>

<p>Il existe un <a href="https://featureflags.io/">site web</a> qui rassemble √©norm√©ment de ressources autour de ce sujet, des guides, mais aussi une liste de librairies/SDKs. En le parcourant, nous nous rendons compte qu‚Äôil existe beaucoup de fa√ßons diff√©rentes de l‚Äôimpl√©menter.</p>

<p>Il existe plusieurs frameworks disponibles, parfois pour plusieurs langages de d√©veloppement, nous pouvons retrouver par exemple, FF4J pour Java, FFLIP pour nodeJS ou encore Toggle pour Golang.</p>

<p>On peut √©galement retrouver des solutions Saas qui vont vous permettre via un SDK, (et bien s√ªr moyennant finance üòä), d‚Äôimpl√©menter du feature flipping dans votre code, c‚Äôest le cas par exemple de launchdarkly, qui a un sdk disponible pour quasiment tous les langages du march√©.</p>

<p>Le plus int√©ressant serait peut-√™tre de cr√©er une solution maison, mais cela demanderait pas mal d‚Äôeffort, et pourrait devenir vite complexe √† g√©rer pour les diff√©rents langages qu‚Äôon peut utiliser. Cependant ! Il existe une solution open source, que vous pouvez d√©ployer, via du conteneur dans votre infrastructure, compatible avec les langages les plus communs, il s‚Äôagit de Unleash qui apprait comme √©tant une solution tr√®s attrayante ! Mettant √† disposition facilement une plateforme de gestion des features, facile √† d√©ployer et √† maintenir, vous laissant √©galement la possibilit√© d‚Äôy impl√©menter des fonctionnalit√©s propres √† vos besoin, compatible avec la plupart des langages, que demander de mieux !</p>

<h2 id="quelques-tests-pour-se-faire-un-avis">Quelques tests pour se faire un avis</h2>

<p>Pour tester rapidement, nous avons d√©cid√© de fabriquer une application web, d√©velopp√©e en React, qui ferait appel √† deux APIs diff√©rentes, une d√©velopp√©e en NestJS, l‚Äôautre en Java Spring, pour justement activer ou non des features.</p>

<p>C√¥t√© React nous avons utilis√© <a href="https://github.com/paralleldrive/react-feature-toggles/">React Feature Toggles</a>, l‚Äôimpl√©mentation du feature flipping est assez simple cot√© front. Nous r√©cup√©rons la liste des features et en fonction de leur disponibilit√© : les composants relatifs √† ces features sont activ√©s/charg√©s.</p>

<p>Pour l‚ÄôAPI Nestjs, nous avons utilis√© <a href="https://github.com/FredKSchott/fflip">FFLIP</a>, plut√¥t simple √† mettre en place, qui fonctionne avec un principe de crit√®res qui peuvent √™tre d√©finis, calcul√©s et cumul√©s, qui donnent acc√®s √† une ou plusieurs features. La simplicit√© d‚Äôutilisation et de compr√©hension permet une mutualisation rapide du code et le tout sans co√ªt suppl√©mentaire, contrairement √† d‚Äôautres solutions Saas.</p>

<p>Exemple d‚Äôun crit√®re</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> 
    <span class="nl">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">isPaidUser</span><span class="dl">'</span><span class="p">,</span> 
    <span class="nx">check</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">isPaid</span><span class="p">)</span> <span class="p">{</span> 
        <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">isPaid</span> <span class="o">==</span> <span class="nx">isPaid</span><span class="p">;</span> 
    <span class="p">},</span> 
<span class="p">}</span> 
</code></pre></div></div>

<p>Exemple d‚Äôune feature</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> 
    <span class="nl">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">newFeatureRollout</span><span class="dl">'</span><span class="p">,</span> 
    <span class="c1">// Si la feature est associ√©e √† une liste de crit√®re, tous les crit√®res doivent √™tre √©valu√©s √† vrai pour rendre accessible la feature √† l‚Äôutilisateur </span>
    <span class="nx">criteria</span><span class="p">:</span> <span class="p">[</span> 
        <span class="p">{</span> <span class="na">isPaidUser</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span> 
        <span class="p">{</span> <span class="na">percentageOfUsers</span><span class="p">:</span> <span class="mf">0.5</span> <span class="p">},</span> 
        <span class="p">{</span> <span class="na">allowUserIDs</span><span class="p">:</span> <span class="nx">AllowEdIds</span> <span class="p">},</span> 
    <span class="p">],</span> 
    <span class="nx">enabled</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> 
<span class="p">}</span> 
</code></pre></div></div>

<p>Exemple utilisation simple</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">fflip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">fflip</span><span class="dl">'</span><span class="p">);</span> 

 <span class="kd">let</span> <span class="nx">Users</span> <span class="o">=</span> <span class="p">[</span> 
    <span class="p">{</span> 
    <span class="na">id</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> 
    <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Bob</span><span class="dl">'</span><span class="p">,</span> 
    <span class="na">isPaid</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> 
    <span class="na">role</span><span class="p">:</span> <span class="dl">'</span><span class="s1">scrum</span><span class="dl">'</span><span class="p">,</span> 
    <span class="na">canDrinkBeer</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> 
    <span class="p">}</span> 
<span class="p">];</span> 

<span class="nx">fflip</span><span class="p">.</span><span class="nx">config</span><span class="p">({</span> 
    <span class="na">criteria</span><span class="p">:</span> <span class="nx">Criteria</span><span class="p">,</span> <span class="c1">// Une liste de crit√®res comme d√©finie plus haut </span>
    <span class="na">features</span><span class="p">:</span> <span class="nx">Features</span><span class="p">,</span> <span class="c1">// Une liste de feature comme d√©finie plus haut </span>
<span class="p">});</span> 

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">fflip</span><span class="p">.</span><span class="nx">getFeaturesForUser</span><span class="p">(</span><span class="nx">Users</span><span class="p">[</span><span class="mi">0</span><span class="p">]));</span> 

<span class="kd">let</span> <span class="nx">str</span><span class="p">:</span> <span class="nx">string</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">listName</span><span class="p">:</span> <span class="nx">string</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">Users</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="nx">fflip</span><span class="p">.</span><span class="nx">isFeatureEnabledForUser</span><span class="p">(</span><span class="dl">'</span><span class="s1">canDrinkBeer</span><span class="dl">'</span><span class="p">,</span> <span class="nx">user</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="nx">user</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Welcome to the Closed Beta!</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">str</span> <span class="o">+=</span> <span class="s2">`</span><span class="p">${</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span><span class="s2"> can go drink some beer!\n`</span><span class="p">;</span>
    <span class="k">return</span> <span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">;</span>
  <span class="p">});</span>
</code></pre></div></div>

<p>Pour finir, avec l‚ÄôAPI Spring, nous avons essay√© de mettre en place un syst√®me maison, afin de v√©rifier la possibilit√© de se passer de librairie ou solution tierce. Et le r√©sultat est plut√¥t concluant, nous avons des r√©sultats similaires entre les 2 APIs.</p>

<p>Tr√®s grossi√®rement, pour imager √† quoi ressemble un bout de code qui utilise du Feature Flipping, nous pourrions le r√©sumer √† un ensemble de ‚Äúif‚Äù.</p>

<p>Type impl√©mentation simple</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    if Feature.is_enabled(‚Äònew_feature‚Äô) 
        # new feature 
    else 
        # other 
    End 
</code></pre></div></div>

<p>Le Feature Flipping consiste √† activer ou d√©sactiver une fonctionnalit√© en fonction d‚Äôune variable, dynamiquement dans le code.</p>

<p>Mais vous vous rendrez compte que c‚Äôest un peu plus complexe que cela, si vous le souhaitez, vous pouvez retrouver nos essais <a href="https://github.com/ekit3/feature-flipping">ici</a>.</p>

<p>Au final il nous restait un bon nombre de librairies sur diff√©rentes technologies √† tester, la liste √©tant longue, peu importe les affinit√©s que vous avez dans les langages de d√©veloppement vous trouverez de quoi essayer et pourquoi pas le mettre en place</p>

<h2 id="limites">Limites</h2>

<h3 id="multiplications-des-cas-de-tests">Multiplications des cas de tests</h3>

<p>Ce type de d√©veloppement implique une grande rigueur quant au suivi et √† la mise en place des tests autour de l‚Äôapplication. La multiplication des sc√©narios de tests et des diff√©rents parcours utilisateurs peut √™tre une source de complication si le Feature Flipping n‚Äôest pas suivi ni appliqu√© correctement. Une grande rigueur est n√©cessaire de la part de toute l‚Äô√©quipe de d√©veloppement.</p>

<h3 id="changement-mod√®le-de-donn√©es">Changement mod√®le de donn√©es</h3>

<p>Il ne faut pas oublier non plus que certaines modifications de fonctionnalit√©s peuvent impliquer des impacts sur le mod√®le de donn√©es de l‚Äôapplication, ce qui peut rendre compliqu√© la cohabitation de plusieurs features.</p>

<p>Le m√©tier ne demandera pas le feature flipping pour les m√™mes raisons (activation des features en fonctions des p√©riodes, des profils utilisateurs) que le d√©veloppement (faciliter le d√©veloppement, le d√©ploiement et rendre dispo la feature une fois termin√©e et test√©e)</p>

<p>Alors, dans quelle mesure et jusqu‚Äôo√π peut-on aller avec le Feature Flipping ?</p>

<h3 id="quelques-conseils">Quelques conseils</h3>

<p>Si vous deviez mettre en place le Feature Flipping, un premier conseil serait de le faire d√®s le d√©but de vos projets ou de l‚Äôint√©grer sur des nouvelles fonctionnalit√©s ind√©pendantes, cela peut repr√©senter un gros travail de reprendre un syst√®me d√©j√† en place.</p>

<p>Il vous faudra √©galement beaucoup de liant entre les √©quipes de d√©veloppement, la qualit√© et le m√©tier afin garantir une application parfaitement fonctionnelle de bout en bout. 
Mais ces efforts en valent la peine, vous n‚Äôaurez plus √† attendre les tests de telle ou telle feature pour d√©ployer, vous pourrez interagir plus facilement avec vos utilisateurs et mieux r√©agir en cas de probl√®mes.</p>
</span>
      </div>
    </article>
  </div>

            <footer class="footer">
    <div class="footer-content">
        <h4>Qui sommes nous :</h4>
        <p>"Nos experts vous accompagnent sur la r√©alisation et l‚Äôam√©lioration de vos syst√®mes d‚Äôinformation tout en √©tant en immersion dans vos √©quipes."</p>
    </div>
    <div class="footer-content">
        <h4>La plus-value propos√©e :</h4>
        <p>
            vous permettre de prendre du recul sur l‚Äôutilisation technologique afin qu‚Äôelle soit adapt√©e √† votre contexte.
        </p>
    </div>
    <div class="footer-content">
        <h4>Nous suivre :</h4>
        <div class="social">
            <a href="https://www.linkedin.com/company/ekite/" target="_blank"><img alt="linkedin" src="/assets/images/logo-linkedin.png"></a>
            <a href="https://twitter.com/Ekite_" target="_blank"><img alt="Twitter" src="/assets/images/logo-twitter.png"></a>
            <a href="https://github.com/ekit3" target="_blank"><img alt="Github" src="/assets/images/logo-github.png"></a>
        </div>
    </div>
</footer>
 <div class="copyright">
    <span>Ekite ¬© Copyright 2021. Tous droits r√©serv√©s</span>
    <a href="/mentions">Mentions l√©gales</a>
    <a href="https://github.com/Ekawa-fr" target="_blank">R√©alis√© par Ekawa</a>
</div>

        </main>
        <script src="/assets/libs/jquery-3.5.1.min.js"></script>
        <script src="/scripts/index.js"></script>
        <script src="/assets/libs/bootstrap.bundle.min.js"></script>
        <script src="/assets/libs/select2.full.min.js"></script>
        <script>
            if (window.Worker) {
                navigator.serviceWorker.register('/worker.js').then(function(registration) {
                    // console.log('ServiceWorker registration successful with scope:',  registration.scope);
                }).catch(function(error) {
                    console.warn('ServiceWorker registration failed:', error);
                });
            }
        </script>
    </body>
</html>
